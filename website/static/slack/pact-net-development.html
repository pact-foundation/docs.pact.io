<html><body><style>
			* {
				font-family:sans-serif;
			}
			body {
				text-align:center;
				padding:1em;
			}
			.messages {
				width:100%;
				max-width:700px;
				text-align:left;
				display:inline-block;
			}
			.messages img {
				background-color:rgb(248,244,240);
				width:36px;
				height:36px;
				border-radius:0.2em;
				display:inline-block;
				vertical-align:top;
				margin-right:0.65em;
			}
			.messages .time {
				display:inline-block;
				color:rgb(200,200,200);
				margin-left:0.5em;
			}
			.messages .username {
				display:inline-block;
				font-weight:600;
				line-height:1;
			}
			.messages .message {
				display:inline-block;
				vertical-align:top;
				line-height:1;
				width:calc(100% - 3em);
			}
			.messages .message .msg {
				line-height:1.5;
			}
		</style><div class="messages"><div><a id="1620992803.000200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1620992803.000200" ><div class="time">2021-05-14 11:46</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1620992804.000300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1620992804.000300" ><div class="time">2021-05-14 11:46</div></a><div class="msg">set the channel description: Pact .NET contributor / maintainer chat</div></div></div><br/>
<div><a id="1620992872.000500"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1620992872.000500" ><div class="time">2021-05-14 11:47</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1620992872.000700"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1620992872.000700" ><div class="time">2021-05-14 11:47</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1620992872.000900"><img src="https://secure.gravatar.com/avatar/ff4d7aaab0e23ec95c3a7a4a3f7274fd.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png" /></a><div class="message"><div class="username">hugo</div><a style="text-decoration: none" href="#1620992872.000900" ><div class="time">2021-05-14 11:47</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1620992957.001200"><img src="https://secure.gravatar.com/avatar/74228480057fa0e2b0254145c5317d42.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0002-72.png" /></a><div class="message"><div class="username">tony.foster</div><a style="text-decoration: none" href="#1620992957.001200" ><div class="time">2021-05-14 11:49</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1620993261.001900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1620993261.001900" ><div class="time">2021-05-14 11:54</div></a><div class="msg">First up, going to re-release the change from the other day as a `3.0.0` , with the async fix from Martin (cool to see that Just Eat are still using Pact!)</div></div></div><br/>
<div><a id="1620994695.002900"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1620994695.002900" ><div class="time">2021-05-14 12:18</div></a><div class="msg">hey matt.. my tests will be a little delayed, but no hurry.. i wil get a grip on C# Rust then gat back to this group</div></div></div><br/>
<div><a id="1620995940.003900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1620995940.003900" ><div class="time">2021-05-14 12:39</div></a><div class="msg">*Update on the Rust work*

? :white_check_mark: the Rust FFI bindings for the provider interface are good to go
? :ok: the FFI bindings for the consumer side are about 80% there (no request matching rules or generators on the headers, query string, path). But by the time the work is done to set up here, the Rust code may be ready.
See <a href="https://github.com/pact-foundation/pact-go/blob/feat/v3-ffi-verifier/v3/internal/native/mockserver/mock_server.go">https://github.com/pact-foundation/pact-go/blob/feat/v3-ffi-verifier/v3/internal/native/mockserver/mock_server.go</a> for the Golang raw FFI boundary.</div></div></div><br/>
<div><a id="1620995988.004900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1620995988.004900" ><div class="time">2021-05-14 12:39</div></a><div class="msg">The provider verifier is almost a drop-in replacement for the current ruby one. You also have two choices in terms of replacing it

? Use the CLI and spawn it (just like the Ruby one, except it would be an executable)
? Use the FFI boundary</div></div></div><br/>
<div><a id="1620996096.005500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1620996096.005500" ><div class="time">2021-05-14 12:41</div></a><div class="msg">It?s also SUPER FAST. In the JS spike I?ve done, this is how fast the test runs:

```?  native git:(spike/ffi-provider) ? time node test.js
node test.js  0.10s user 0.02s system 102% cpu 0.117 total```</div></div></div><br/>
<div><a id="1620996125.006100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1620996125.006100" ><div class="time">2021-05-14 12:42</div></a><div class="msg">When I showed Tim (another maintainer) he actually went back to the IDE to look for the problem, assuming that it failed so quickly there must have been an obvious code error</div></div></div><br/>
<div><a id="1620996210.006900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1620996210.006900" ><div class="time">2021-05-14 12:43</div></a><div class="msg">Greg - I think we?ll need to get some help from our new contributors for the mocking. Neil is trying to step away, and Beth knows this much C# -&gt; `0`</div></div></div><br/>
<div><a id="1621037225.007800"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1621037225.007800" ><div class="time">2021-05-15 00:07</div></a><div class="msg">lol... fair enough neil wants to step away.....</div></div></div><br/>
<div><a id="1621037383.010100"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1621037383.010100" ><div class="time">2021-05-15 00:09</div></a><div class="msg">using the FFI boundary would have the advantage we can pass results/data/errors back for handling them in the appropriate library. CLI is easier but we get isolated from the run, getting something back requires us to use a headless prompt and read in the stdout and stderr streams</div></div></div><br/>
<div><a id="1621329522.000200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1621329522.000200" ><div class="time">2021-05-18 09:18</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1621332738.000300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1621332738.000300" ><div class="time">2021-05-18 10:12</div></a><div class="msg">Hi. I had a question regarding the version number. Why we upgraded to 3.0.0 since we are not in sync with the pact specs 3.0? Wouldn't it have been more adequate to have a minor version change? =&gt; 2.7.0
Thanks</div></div></div><br/>
<div><a id="1621332825.001200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1621332825.001200" ><div class="time">2021-05-18 10:13</div></a><div class="msg">Hi everyone, nice to see we are starting to have some contributors. I will go over the PACT 3.0 specs and see what little time I can get to help. Keep you all posted.</div></div></div><br/>
<div><a id="1621332871.001300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621332871.001300" ><div class="time">2021-05-18 10:14</div></a><div class="msg">The version of the library is independent of the spec version. There was a breaking change in this version from a semver perspective, which we believe is the appropriate versioning mechanism at this moment. But we should all get together and start to agree on our governing processes. I'll be up on my computer in the next hour and will see how we can find some timea to chat</div></div></div><br/>
<div><a id="1621333388.001700"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1621333388.001700" ><div class="time">2021-05-18 10:23</div></a><div class="msg">hi yann - welcome to the dev corner</div></div></div><br/>
<div><a id="1621339935.001900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1621339935.001900" ><div class="time">2021-05-18 12:12</div></a><div class="msg">ok I understand. That is actually not a bad idea. If I were to start looking at a solution, could I then start with the 3.0.0? To see the feasibility of some features of the 3.0 specs.</div></div></div><br/>
<div><a id="1621340602.003000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621340602.003000" ><div class="time">2021-05-18 12:23</div></a><div class="msg">Judging by the timezones we have, a 10pm call here in Australia is 8am on the west coast (US/Canada) and 2pm in Central Europe</div></div></div><br/>
<div><a id="1621340741.003400"><img src="" /></a><div class="message"><div class="username"></div><a style="text-decoration: none" href="#1621340741.003400" ><div class="time">2021-05-18 12:25</div></a><div class="msg">@matt.fellows has a polly for you!</div></div></div><br/>
<div><a id="1621340771.003900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621340771.003900" ><div class="time">2021-05-18 12:26</div></a><div class="msg">10pm is a pain in the butt Greg, so if you can?t make it, we could schedule another time together</div></div></div><br/>
<div><a id="1621340796.004300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621340796.004300" ><div class="time">2021-05-18 12:26</div></a><div class="msg">In the meantime, we need to scratch together an agenda</div></div></div><br/>
<div><a id="1621340807.004600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621340807.004600" ><div class="time">2021-05-18 12:26</div></a><div class="msg">:thread: on an agenda :point_down:</div></div></div><br/>
<div><a id="1621341619.004700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621341619.004700" ><div class="time">2021-05-18 12:40</div></a><div class="msg">Whipped together a quick document that we can collaborate on: <a href="https://docs.google.com/document/d/1I8Ww4v4td5t1d3uNrKEjGAKHnbsR9osBotz5xLMBCqw/edit#">https://docs.google.com/document/d/1I8Ww4v4td5t1d3uNrKEjGAKHnbsR9osBotz5xLMBCqw/edit#</a></div></div></div><br/>
<div><a id="1621341638.005100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621341638.005100" ><div class="time">2021-05-18 12:40</div></a><div class="msg">If you could please share an email, i?ll add you all as editors so we can work on this asynchronously</div></div></div><br/>
<div><a id="1621342133.005600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1621342133.005600" ><div class="time">2021-05-18 12:48</div></a><div class="msg">Done. Thanks Matt</div></div></div><br/>
<div><a id="1621398525.000200"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1621398525.000200" ><div class="time">2021-05-19 04:28</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1621406100.000300"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1621406100.000300" ><div class="time">2021-05-19 06:35</div></a><div class="msg">Hi matt.. done.. my machine has been a royal pain today.. slack crashed out</div></div></div><br/>
<div><a id="1621420397.000600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621420397.000600" ><div class="time">2021-05-19 10:33</div></a><div class="msg">Thoughts or feedback?</div></div></div><br/>
<div><a id="1621421013.000800"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1621421013.000800" ><div class="time">2021-05-19 10:43</div></a><div class="msg">hi matt, my "good" machine played up. 25th at 10pm</div></div></div><br/>
<div><a id="1621421660.001100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621421660.001100" ><div class="time">2021-05-19 10:54</div></a><div class="msg">Thanks Greg!</div></div></div><br/>
<div><a id="1621421708.001300"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1621421708.001300" ><div class="time">2021-05-19 10:55</div></a><div class="msg">everything crashed or threw errors... sheesh.. upgrade is coming</div></div></div><br/>
<div><a id="1621421724.001500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621421724.001500" ><div class="time">2021-05-19 10:55</div></a><div class="msg">:grimacing:</div></div></div><br/>
<div><a id="1621425377.001700"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1621425377.001700" ><div class="time">2021-05-19 11:56</div></a><div class="msg">On my nachine or the doc?</div></div></div><br/>
<div><a id="1621425414.001900"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1621425414.001900" ><div class="time">2021-05-19 11:56</div></a><div class="msg">I put unit testing and rfc referencing up</div></div></div><br/>
<div><a id="1621921638.000200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621921638.000200" ><div class="time">2021-05-25 05:47</div></a><div class="msg">So only 2 responses, might need to find another time for all?</div></div></div><br/>
<div><a id="1621921656.000400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621921656.000400" ><div class="time">2021-05-25 05:47</div></a><div class="msg">@jacek.helper are you keen? Hugo has let me know he can't contribute at this time</div></div></div><br/>
<div><a id="1621930834.000600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621930834.000600" ><div class="time">2021-05-25 08:20</div></a><div class="msg">@greg595au sorry to do this, but I actually now have a 10pm meeting (my fault for not blocking the calendar, but I was also hoping to get more responses to the above)</div></div></div><br/>
<div><a id="1621930841.000800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621930841.000800" ><div class="time">2021-05-25 08:20</div></a><div class="msg">@yann.courtel is still keen to join</div></div></div><br/>
<div><a id="1621930858.001000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621930858.001000" ><div class="time">2021-05-25 08:20</div></a><div class="msg">@yann.courtel are you free up to 1 hour earlier? (i.e. 1pm your local time)</div></div></div><br/>
<div><a id="1621930874.001200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621930874.001200" ><div class="time">2021-05-25 08:21</div></a><div class="msg">@greg595au is 9pm local time workable? If so, i?ll get an invite out shortly</div></div></div><br/>
<div><a id="1621930896.001400"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1621930896.001400" ><div class="time">2021-05-25 08:21</div></a><div class="msg">Hi matt.. 9 pm works..</div></div></div><br/>
<div><a id="1621930900.001600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621930900.001600" ><div class="time">2021-05-25 08:21</div></a><div class="msg">Apologies, we only need to align 2 timezones? now. Alternatively, we wait for others to respond to see if it?s worth rescheduling</div></div></div><br/>
<div><a id="1621930910.001900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621930910.001900" ><div class="time">2021-05-25 08:21</div></a><div class="msg">But I reckon we get cracking</div></div></div><br/>
<div><a id="1621930917.002100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621930917.002100" ><div class="time">2021-05-25 08:21</div></a><div class="msg">I?ll record and share</div></div></div><br/>
<div><a id="1621931178.002300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1621931178.002300" ><div class="time">2021-05-25 08:26</div></a><div class="msg">Yep. Looks like for me it's 1PM. I'll be there!</div></div></div><br/>
<div><a id="1621931835.002500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621931835.002500" ><div class="time">2021-05-25 08:37</div></a><div class="msg">:raised_hands:</div></div></div><br/>
<div><a id="1621934252.002700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621934252.002700" ><div class="time">2021-05-25 09:17</div></a><div class="msg">Anyone wanting to join tonight to discuss the future/roadmap of Pact .NET can join at 9pm AEST / 1pm CET 



Pact .NET
Tuesday, 25 May  ?  9:00 ? 10:00 pm
Google Meet joining info
Video call link: <a href="https://meet.google.com/hzm-njxs-kwt">https://meet.google.com/hzm-njxs-kwt</a>
Or dial: +61 2 9051 3678 PIN: 497 948 990#
More phone numbers: <a href="https://tel.meet/hzm-njxs-kwt?pin=4275417422534">https://tel.meet/hzm-njxs-kwt?pin=4275417422534</a></div></div></div><br/>
<div><a id="1621940620.003100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621940620.003100" ><div class="time">2021-05-25 11:03</div></a><div class="msg">We?re on <a href="https://meet.google.com/hzm-njxs-kwt?authuser=1">https://meet.google.com/hzm-njxs-kwt?authuser=1</a></div></div></div><br/>
<div><a id="1621948869.003500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621948869.003500" ><div class="time">2021-05-25 13:21</div></a><div class="msg">recording <a href="https://drive.google.com/file/d/1Tk6AlRK36NS8QisdmCZ62UEOs_utCUA_/view?usp=sharing">https://drive.google.com/file/d/1Tk6AlRK36NS8QisdmCZ62UEOs_utCUA_/view?usp=sharing</a></div></div></div><br/>
<div><a id="1621948884.004000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621948884.004000" ><div class="time">2021-05-25 13:21</div></a><div class="msg">(it will be denied by default for those who didn?t attend, but i?ll approve when you try to open as I?ll be notified :stuck_out_tongue: )</div></div></div><br/>
<div><a id="1621958703.004300"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1621958703.004300" ><div class="time">2021-05-25 16:05</div></a><div class="msg">Sorry I have missed that plus I have couple of extra things in this week so this way or another it will be hard to still yet another hour from my sleep time. Next week looks more promising to me.</div></div></div><br/>
<div><a id="1621977687.004500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621977687.004500" ><div class="time">2021-05-25 21:21</div></a><div class="msg">Agenda from that meeting and working doc: <a href="https://docs.google.com/document/d/1I8Ww4v4td5t1d3uNrKEjGAKHnbsR9osBotz5xLMBCqw/edit#">https://docs.google.com/document/d/1I8Ww4v4td5t1d3uNrKEjGAKHnbsR9osBotz5xLMBCqw/edit#</a></div></div></div><br/>
<div><a id="1621982024.004800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621982024.004800" ><div class="time">2021-05-25 22:33</div></a><div class="msg">no worries</div></div></div><br/>
<div><a id="1621982048.005000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1621982048.005000" ><div class="time">2021-05-25 22:34</div></a><div class="msg">I?ll aim for some time in the next day or so to document more of what happened. See the main channel for the video recording. The last 30 are about the FFI bindings stuff</div></div></div><br/>
<div><a id="1622011800.005300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622011800.005300" ><div class="time">2021-05-26 06:50</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1622012412.012400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622012412.012400" ><div class="time">2021-05-26 07:00</div></a><div class="msg">Hi all - quick update from me about something I'm doing locally. I've started porting from the Ruby implementation to the Rust version via the FFI interface for consumer tests (not provider yet). I get the feeling we may need to make some breaking changes because of the differences between them.

For example, the Ruby version supports supplying your own TLS cert but the Rust version appears to only be able to use a built-in self-signed cert but allows you to retrieve the CA programatiicaly so you could technically trust the cert at runtime. We'd either have to remove custom TLS from PactNet or try to add custom TLS to pact-rs instead.

Another awkward change which I'm just in the middle of is that the `Path` and `Query` params on the request setup are of type `object` but the Rust implementation wants them supplied in string key/value pairs (with an index as well). At the moment my version supports Path and Query of `string` type (by splitting on `&amp;` and then each segment on `=` for query) and we can definitely support `Dictionary&lt;string, string&gt;`, but I think in the current version lots of people use `dynamic` with an anonymous object. We'd have to use some reflection to retrieve the properties from the `dynamic` I think. You'd have to throw an exception if those params were of any type that we didn't support.

Either that or we make a breaking change and stop those two properties on request from being of type `object` and pick something that's easier to support.

I'm sure ther are more challenges but those are the two off the top of my head :slightly_smiling_face: I've not got to matchers yet so I imagine there's plenty more trouble headed my way :smile:</div></div></div><br/>
<div><a id="1622012577.012500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622012577.012500" ><div class="time">2021-05-26 07:02</div></a><div class="msg">cool!</div></div></div><br/>
<div><a id="1622012585.012700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622012585.012700" ><div class="time">2021-05-26 07:03</div></a><div class="msg">OK so the rust interface for those are fairly low level</div></div></div><br/>
<div><a id="1622012622.012900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622012622.012900" ><div class="time">2021-05-26 07:03</div></a><div class="msg">The TLS cert is something we can add in later - honestly, using TLS in most cases is just overkill. But we should support it eventually</div></div></div><br/>
<div><a id="1622012638.013100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622012638.013100" ><div class="time">2021-05-26 07:03</div></a><div class="msg">For version 1, I would consider ignoring completely</div></div></div><br/>
<div><a id="1622012682.013400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622012682.013400" ><div class="time">2021-05-26 07:04</div></a><div class="msg">Cool I'll drop those args then</div></div></div><br/>
<div><a id="1622012685.013600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622012685.013600" ><div class="time">2021-05-26 07:04</div></a><div class="msg">Can you please elaborate on the query/path problem?</div></div></div><br/>
<div><a id="1622012708.013800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622012708.013800" ><div class="time">2021-05-26 07:05</div></a><div class="msg">(we do need a strategy to move forward so we?re not constantly adding breaking changes, but let?s separate the two problems for now)</div></div></div><br/>
<div><a id="1622012763.014000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622012763.014000" ><div class="time">2021-05-26 07:06</div></a><div class="msg">on the indexed query/header values, it?s because it now supports multiple _values_ for a given key</div></div></div><br/>
<div><a id="1622012809.014200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622012809.014200" ><div class="time">2021-05-26 07:06</div></a><div class="msg">i.e. if you had `?foo=bar&amp;foo=baz`  That could be represented more strictly than the current version. The index is for the array values, so it?s just `0` for others</div></div></div><br/>
<div><a id="1622012812.014400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622012812.014400" ><div class="time">2021-05-26 07:06</div></a><div class="msg">ditto for headers</div></div></div><br/>
<div><a id="1622012838.014600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622012838.014600" ><div class="time">2021-05-26 07:07</div></a><div class="msg">But appreciate it is a bit clunky - you would need to map/iterate over any objects that translate to it. So yes, probably breaking change</div></div></div><br/>
<div><a id="1622012918.014800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622012918.014800" ><div class="time">2021-05-26 07:08</div></a><div class="msg">So the Ruby version can take pretty much any argument for query because it's of type `object`(code <a href="https://github.com/pact-foundation/pact-net/blob/c2b8dfeeeebf2312bb37d7c54137802b117720bc/PactNet/Mocks/MockHttpService/Models/ProviderServiceRequest.cs#L20">https://github.com/pact-foundation/pact-net/blob/c2b8dfeeeebf2312bb37d7c54137802b117720bc/PactNet/Mocks/MockHttpService/Models/ProviderServiceRequest.cs#L20</a> ) but the Rust FFI interface `with_query` just takes a string key and string value (plus an index so you could repeat query params with the same name)</div></div></div><br/>
<div><a id="1622012954.015100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622012954.015100" ><div class="time">2021-05-26 07:09</div></a><div class="msg">That's fine for the Ruby one because <a href="http://JSON.Net">http://JSON.Net</a> will just serialise that properly if you pass a dynamic object</div></div></div><br/>
<div><a id="1622012971.015300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622012971.015300" ><div class="time">2021-05-26 07:09</div></a><div class="msg">Like
```Query = new
{
    foo = "bar"
}```</div></div></div><br/>
<div><a id="1622013026.015500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622013026.015500" ><div class="time">2021-05-26 07:10</div></a><div class="msg">But you can also do `Query = "foo=bar&amp;baz=bash"` and just pass it a string, which works also</div></div></div><br/>
<div><a id="1622013084.015700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622013084.015700" ><div class="time">2021-05-26 07:11</div></a><div class="msg">I imagine you can also pass it a dictionary like the `Headers` property takes, but I've never tried that</div></div></div><br/>
<div><a id="1622013118.015900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622013118.015900" ><div class="time">2021-05-26 07:11</div></a><div class="msg">yeah, that?s definitely not easily doable now. FWIW the current implementation for query strings is a constant source of issues, so I think the newer version is actually better because it?s more explicit, but it?s different</div></div></div><br/>
<div><a id="1622013128.016100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622013128.016100" ><div class="time">2021-05-26 07:12</div></a><div class="msg">The problem with having an API of type `object` is we have no idea how consumers are actually using this thing, so trying to support all the current usages is near-impossible. I think we need to either pick a sensible-subset to support, or change from `object` to something more usable for us</div></div></div><br/>
<div><a id="1622013196.016400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622013196.016400" ><div class="time">2021-05-26 07:13</div></a><div class="msg">in pact-go, I?m moving to a more builder style pattern. You could then over load methods to take different types, and provide better type support etc.</div></div></div><br/>
<div><a id="1622013210.016600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622013210.016600" ><div class="time">2021-05-26 07:13</div></a><div class="msg">I'd personally prefer some kind of `QueryBuilder` class so that it can internally keep everything as key/value pairs and also support adding the same key multiple times (which eventually ends up as `foo=bar&amp;foo=whatever`</div></div></div><br/>
<div><a id="1622013219.016800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622013219.016800" ><div class="time">2021-05-26 07:13</div></a><div class="msg">Ha, snap</div></div></div><br/>
<div><a id="1622013222.017000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622013222.017000" ><div class="time">2021-05-26 07:13</div></a><div class="msg">:slightly_smiling_face:</div></div></div><br/>
<div><a id="1622013249.017200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622013249.017200" ><div class="time">2021-05-26 07:14</div></a><div class="msg">But yeah, that'd be another breaking change on top of dropping custom TLS</div></div></div><br/>
<div><a id="1622013270.017400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622013270.017400" ><div class="time">2021-05-26 07:14</div></a><div class="msg">you?ll see a similar conundrum when dealing with bodies. Because it now supports binary payloads/multipart etc. you might want to provide different typed options</div></div></div><br/>
<div><a id="1622013278.017600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622013278.017600" ><div class="time">2021-05-26 07:14</div></a><div class="msg">e.g. a `.JSON(?)` for json bodies</div></div></div><br/>
<div><a id="1622013300.017800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622013300.017800" ><div class="time">2021-05-26 07:15</div></a><div class="msg">Yeah at the moment `Body` is just `dynamic` so it can be literally anything and is expected to be JSONified</div></div></div><br/>
<div><a id="1622013341.018000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622013341.018000" ><div class="time">2021-05-26 07:15</div></a><div class="msg">We'd need that to be like an `IPactBody` and then have different implementations for it, so one for JSON and one for binary</div></div></div><br/>
<div><a id="1622013354.018200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622013354.018200" ><div class="time">2021-05-26 07:15</div></a><div class="msg">sounds reasonable</div></div></div><br/>
<div><a id="1622013371.018400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622013371.018400" ><div class="time">2021-05-26 07:16</div></a><div class="msg">One of the challenges at the moment is for users knowing what they can actually put in there.</div></div></div><br/>
<div><a id="1622013378.018600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622013378.018600" ><div class="time">2021-05-26 07:16</div></a><div class="msg">examples only go so far</div></div></div><br/>
<div><a id="1622013433.018800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622013433.018800" ><div class="time">2021-05-26 07:17</div></a><div class="msg">Yeah for sure. The current version is super flexible by effectively skipping the type system and delegating the problem to <a href="http://Json.Net">http://Json.Net</a>, but that's not so easy in Rust land where you don't get to defer problems to someone else :smile:</div></div></div><br/>
<div><a id="1622013462.019000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622013462.019000" ><div class="time">2021-05-26 07:17</div></a><div class="msg">yeah. But it?s not ideal for users either, because they have to work trial and error</div></div></div><br/>
<div><a id="1622013508.019200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622013508.019200" ><div class="time">2021-05-26 07:18</div></a><div class="msg">A related problem is the v2/v3 problem - you don?t want somebody using a v3 matcher in a v2 test. Ideally, you want the type system to prevent this.</div></div></div><br/>
<div><a id="1622013520.019400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622013520.019400" ><div class="time">2021-05-26 07:18</div></a><div class="msg">Yep definitely. If we're OK with the idea of making breaking changes there and using the type system more to guide users into the pit of success, I'm all for that</div></div></div><br/>
<div><a id="1622013565.019600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622013565.019600" ><div class="time">2021-05-26 07:19</div></a><div class="msg">a major upgrade to Rust would warrant a breaking change, but we need general community consensus. A place to consider this is creating a GH issue with an RFC like proposal - keen to submit that?</div></div></div><br/>
<div><a id="1622013581.019800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622013581.019800" ><div class="time">2021-05-26 07:19</div></a><div class="msg">It starts sounding like a more fundamental rewrite though once you do stuff like that :smile:</div></div></div><br/>
<div><a id="1622013597.020000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622013597.020000" ><div class="time">2021-05-26 07:19</div></a><div class="msg">well, it may well need it - I?m not sure</div></div></div><br/>
<div><a id="1622013622.020200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622013622.020200" ><div class="time">2021-05-26 07:20</div></a><div class="msg">Yeah I can submit a proposal. I'll probably carry on with where I am at the moment until I hit an inevitable brick wall, and then write up what I think is best to do next</div></div></div><br/>
<div><a id="1622013624.020400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622013624.020400" ><div class="time">2021-05-26 07:20</div></a><div class="msg">(I don?t maintain pact .NET but am helping out whilst we build up our new set of maintainers)</div></div></div><br/>
<div><a id="1622013665.020700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622013665.020700" ><div class="time">2021-05-26 07:21</div></a><div class="msg">The earlier you get it into the public domain the better so we can give feedback/guidance etc., and also ensure somebody else doesn?t waste their time doubling up</div></div></div><br/>
<div><a id="1622014323.020900"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622014323.020900" ><div class="time">2021-05-26 07:32</div></a><div class="msg">I have a very very early version available here: <a href="https://github.com/adamrodger/pact-net/tree/feature/rust-interop">https://github.com/adamrodger/pact-net/tree/feature/rust-interop</a>

In the middle of adding the query support</div></div></div><br/>
<div><a id="1622018322.021200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622018322.021200" ><div class="time">2021-05-26 08:38</div></a><div class="msg">cool - have you tackled matchers yet?</div></div></div><br/>
<div><a id="1622018329.021400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622018329.021400" ><div class="time">2021-05-26 08:38</div></a><div class="msg">i.e. I can see <a href="https://github.com/adamrodger/pact-net/blob/feature/rust-interop/PactNet/Matchers/Type/MinTypeMatcher.cs">https://github.com/adamrodger/pact-net/blob/feature/rust-interop/PactNet/Matchers/Type/MinTypeMatcher.cs</a> still uses the old Ruby style</div></div></div><br/>
<div><a id="1622018351.021600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622018351.021600" ><div class="time">2021-05-26 08:39</div></a><div class="msg">I?m aiming to publish some guidance in the next week about what matchers can go into places, and the JSON structure you can give the FFI</div></div></div><br/>
<div><a id="1622018399.021800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622018399.021800" ><div class="time">2021-05-26 08:39</div></a><div class="msg">But if you want some inspiration, <a href="https://github.com/pact-foundation/pact-go/blob/feat/ffi-consumer/v3/matcher.go">https://github.com/pact-foundation/pact-go/blob/feat/ffi-consumer/v3/matcher.go</a> mighthelp</div></div></div><br/>
<div><a id="1622018447.022000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622018447.022000" ><div class="time">2021-05-26 08:40</div></a><div class="msg">e.g. an `eachLike` <a href="https://github.com/pact-foundation/pact-go/blob/feat/ffi-consumer/v3/matcher.go#L26-L29">https://github.com/pact-foundation/pact-go/blob/feat/ffi-consumer/v3/matcher.go#L26-L29</a>
Also JS =&gt; <a href="https://github.com/pact-foundation/pact-js/blob/feat/v3.0.0/src/v3/matchers.ts">https://github.com/pact-foundation/pact-js/blob/feat/v3.0.0/src/v3/matchers.ts</a></div></div></div><br/>
<div><a id="1622018477.022200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622018477.022200" ><div class="time">2021-05-26 08:41</div></a><div class="msg">JSON structure looks like this:
```{
  'pact:matcher:type': 'type',
  value: [template],
}```</div></div></div><br/>
<div><a id="1622032632.023300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622032632.023300" ><div class="time">2021-05-26 12:37</div></a><div class="msg">So the API I've got to at the moment now looks like this for consumer tests (with matchers not done yet) using the Rust FFI integration internally and maintaing support for using a remote service:

```[Fact]
public async Task GetAllEvents_WithNoAuthorizationToken_ShouldFail()
{
    var config = new PactConfig
    {
        SpecificationVersion = "2.0.0",
        DefaultJsonSettings = new JsonSerializerSettings(), /* ... set whatever ... */
        LogDir = "./logs",
        PactDir = "./pacts",
        Overwrite = true
    };

    IInteractionBuilder interactions = new PactBuilder(config).ServiceConsumer("consumer")
                                                              .HasPactWith("provider")
                                                              .UsingNativeBackend(8080, IPAddress.Any);
                                                              // or .UsingRemoteBackend(new Uri("<a href="http://remote.example.org">http://remote.example.org</a>");

    var interaction = interactions
                      .UponReceiving("a request to retrieve all events with no authorization")
                          .Given("there are events with ids '45D80D13-D5A2-48D7-8353-CBB4C0EAABF5'")
                          .WithRequest(HttpMethod.Get, "/events")
                          .WithHeader("Accept", "application/json")
                      .WillRespond()
                          .WithStatus(HttpStatusCode.Unauthorized)
                          .WithHeader("Content-Type", "application/json; charset=utf-8")
                          .WithJsonBody(new
                          {
                              message = "Authorization has been denied for this request."
                          });

    var consumer = new EventsApiClient(_mockProviderServiceBaseUri);

    await Assert.ThrowsAnyAsync&lt;Exception&gt;(() =&gt; consumer.GetAllEvents());

    interaction.Verify();
}```</div></div></div><br/>
<div><a id="1622032724.023800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622032724.023800" ><div class="time">2021-05-26 12:38</div></a><div class="msg">The fluent API ensures that you can't try to configure the request/response out of order and stuff, effectively using the typestate pattern</div></div></div><br/>
<div><a id="1622032973.026500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622032973.026500" ><div class="time">2021-05-26 12:42</div></a><div class="msg">I think we'd distribute the FFI stuff as a NuGet using the `native/` layout and then NuGet will automatically restore the env-specific FFI libraries without that stuff having to pollute the PactNet core code. I've also separated out the "backend provider" so we could keep supporting the Ruby version, the Rust native version and the remote version all in one package. Or we could ship like a `PactNet.Providers.Native` and `PactNet.Providers.Remote` etc in the same way you have things like `Microsoft.Extensions.Configuration.Json` shipping custom providers on top of a library with the core logic that's provider-agnostic</div></div></div><br/>
<div><a id="1622033217.026800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622033217.026800" ><div class="time">2021-05-26 12:46</div></a><div class="msg">Great progress!!</div></div></div><br/>
<div><a id="1622033278.028000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622033278.028000" ><div class="time">2021-05-26 12:47</div></a><div class="msg">One comment I?ll make (and I say this without much knowledge of the nuget ecosystem). Ideally, we bundle the rust package into the artifact. We get a lot of complaints from enterprises behind proxies when dependencies need to be downloaded dynamically during instnall (e.g. pulling a release down from GH releases). I don?t think you?re proposing it, but _just in case_</div></div></div><br/>
<div><a id="1622038041.029900"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622038041.029900" ><div class="time">2021-05-26 14:07</div></a><div class="msg">Yeah it'd be bundled up with a NuGet, which matches how it works now. Currently you need to install `PactNet` and also like `PactNet.Windows` because that contains the Ruby dependencies. I'm proposing we ship a single `PactNet.Native` instead of one per OS which contains all native deps. NuGet will unpack the correct one at build time depending on the OS (it's a single nuget with like `native/win-x64/mock_server_ffi.dll` inside it, with a path per binary)</div></div></div><br/>
<div><a id="1622038189.032100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622038189.032100" ><div class="time">2021-05-26 14:09</div></a><div class="msg">Anyway, I've pushed an updated version which now actually manages to call the Rust mock server, can recognise failed interactions and does all the appropriate unmanaged cleanup stuff. However, it keeps thinking every request is unexpected so there's probably some kind of issue there (I assume it's mismatched headers?)

If you want to build it locally you'll have to unload the unit tests as I've not sorted those yet. Wanted to make sure we agree on the API/layout before spending too much time on them. The samples compile though.

Branch here: <a href="https://github.com/adamrodger/pact-net/tree/feature/rust-interop">https://github.com/adamrodger/pact-net/tree/feature/rust-interop</a></div></div></div><br/>
<div><a id="1622038460.032900"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622038460.032900" ><div class="time">2021-05-26 14:14</div></a><div class="msg">I'm hoping I don't need to specify the Host/Connection headers. I'm sure the Ruby version didn't require that</div></div></div><br/>
<div><a id="1622039227.034800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622039227.034800" ><div class="time">2021-05-26 14:27</div></a><div class="msg">So yeah, that kinda exposes a pretty brutal experience when using the Rust backend from xUnit - it doesn't capture stdout or anything so you've got absolutely no idea what the backend is doing. My interaction says it's unexpected (which is likely a bug in my new interop code) but you can't tell what interactions it _thinks_ are registered so that you can spot which bit went wrong. You don't get any logging from the Rust backend at all and you can inspect the internals of it in the debugger or anything.</div></div></div><br/>
<div><a id="1622042862.036000"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1622042862.036000" ><div class="time">2021-05-26 15:27</div></a><div class="msg">Ah. We were discussing this with the JS implementation - when we use the FFI bindings there, we get the standard out (which is nice), but we don?t have the ability to say ?hey, can you log to this file? (which would be great, and is what the Ruby impl lets you do)</div></div></div><br/>
<div><a id="1622042900.036700"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1622042900.036700" ><div class="time">2021-05-26 15:28</div></a><div class="msg">I think we may want to look at extending the Rust side to be more configurable with logging</div></div></div><br/>
<div><a id="1622043029.037200"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1622043029.037200" ><div class="time">2021-05-26 15:30</div></a><div class="msg">Also, hi! It?s really great to see so much progress on the .NET engine!</div></div></div><br/>
<div><a id="1622063526.037300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622063526.037300" ><div class="time">2021-05-26 21:12</div></a><div class="msg">I've extended the Rust FFI locally for my testing with log4rs so maybe I could contribute that back also if it turns out to be useful</div></div></div><br/>
<div><a id="1622063585.037400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622063585.037400" ><div class="time">2021-05-26 21:13</div></a><div class="msg">I raised it as an issue against pact-reference anyway in case someone there has a better idea</div></div></div><br/>
<div><a id="1622072114.000200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622072114.000200" ><div class="time">2021-05-26 23:35</div></a><div class="msg">I?d do the same. compressed, they?re probably not that big that it makes a big deal for people these days</div></div></div><br/>
<div><a id="1622107031.001200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622107031.001200" ><div class="time">2021-05-27 09:17</div></a><div class="msg">Hmmm, so yeah I think I may have hit a bit of a wall on this. Without the logging it's really difficult to know what's going wrong, and the way that you typically do these calls from .Net doesn't really suit how the Rust library is laid out. In C# you do this:

```//Arrange
const string eventType = "DetailsView";

this.interactions
    .UponReceiving($"a request to retrieve events with type '{eventType}'")
        .Given($"there is one event with type '{eventType}'")
        .WithRequest(HttpMethod.Get, "/events")
        .WithQuery("type", eventType)
        .WithHeader("Accept", "application/json")
        .WithHeader("Authorization", $"Bearer {Token}")
    .WillRespond()
        .WithStatus(200)
        .WithHeader("Content-Type", "application/json; charset=utf-8")
        .WithJsonBody(new[]
        {
            new
            {
                eventType
            }
        });

//Act
var result = await this.authorisedClient.GetEventsByType(eventType);

//Assert
result.Should().OnlyContain(e =&gt; e.EventType == eventType);
this.interactions.Verify();```</div></div></div><br/>
<div><a id="1622107137.002500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622107137.002500" ><div class="time">2021-05-27 09:18</div></a><div class="msg">The problem is that the `Verify` call will probably never happen in the failure situation because the client call will typically throw an exception and the test will fail early. That means you don't get the output of `mock_server_mismatches` from the Rust side to see what went wrong, and without the stdout/stderr output you can't even go and investigate it.</div></div></div><br/>
<div><a id="1622107193.003300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622107193.003300" ><div class="time">2021-05-27 09:19</div></a><div class="msg">You could wrap it in a `try/finally` so that `Verify` is always called and then you get the mismatches output, but that's putting a lot on the caller to make sure they always do that. I don't think that's the way to go</div></div></div><br/>
<div><a id="1622107404.005000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622107404.005000" ><div class="time">2021-05-27 09:23</div></a><div class="msg">Also the entire process crashes when I try to use the `free_string` method to deallocate the string result from `mock_server_mistmatches` so that's also a problem :smile: I think I need to make the P/Invoke interop return an `IntPtr` instead and use `Marshall.PtrToString` to get the string out, then pass the same pointer back to free it</div></div></div><br/>
<div><a id="1622107646.005800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622107646.005800" ><div class="time">2021-05-27 09:27</div></a><div class="msg">And also if `mock_server_mismatches` returns some errors, how come `mock_server_matched` returns true?</div></div></div><br/>
<div><a id="1622109702.006100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622109702.006100" ><div class="time">2021-05-27 10:01</div></a><div class="msg">that sounds like a bug</div></div></div><br/>
<div><a id="1622109714.006300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622109714.006300" ><div class="time">2021-05-27 10:01</div></a><div class="msg">If you can raise an issue, I/@uglyog can look into that</div></div></div><br/>
<div><a id="1622109716.006600"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622109716.006600" ><div class="time">2021-05-27 10:01</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1622109811.007100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622109811.007100" ><div class="time">2021-05-27 10:03</div></a><div class="msg">I still think the framework should be responsible for extra checks, rather than relying on the caller. i.e. `Verify()` should be called by Pact .NET, not relied upon by the user</div></div></div><br/>
<div><a id="1622109859.007300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622109859.007300" ><div class="time">2021-05-27 10:04</div></a><div class="msg">Interesting. I think I do call `free_string` and haven?t seen this. I?ll double check next time I?m there</div></div></div><br/>
<div><a id="1622109883.007500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622109883.007500" ><div class="time">2021-05-27 10:04</div></a><div class="msg">TBH it?s probably not critical it get called anyway, because the test process is pretty short lived and any memory will be freed at the end of the test process</div></div></div><br/>
<div><a id="1622109889.007700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622109889.007700" ><div class="time">2021-05-27 10:04</div></a><div class="msg">but still, nice to be correct :wink:</div></div></div><br/>
<div><a id="1622110400.007900"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622110400.007900" ><div class="time">2021-05-27 10:13</div></a><div class="msg">I've managed to get the string to deallocate safely now (it does need to be IntPtr to safely deallocate) but now it crashes on cleanup_mock_server instead :joy: Perhaps I shouldn't even be trying to free this string at all</div></div></div><br/>
<div><a id="1622110893.008200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622110893.008200" ><div class="time">2021-05-27 10:21</div></a><div class="msg">Raised <a href="https://github.com/pact-foundation/pact-reference/issues/107">https://github.com/pact-foundation/pact-reference/issues/107</a></div></div></div><br/>
<div><a id="1622111256.008500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622111256.008500" ><div class="time">2021-05-27 10:27</div></a><div class="msg">Yep, that's the issue. I think that's a bit of a wrinkle in the Rust FFI tbh - most of the methods that return strings say you need to free them afterwards with `free_string` but the `mock_server_mismatches` method _doesn't_ need the result to be passed to `free_string`. If you do pass it to `free_string` then the process crashes when you later call `cleanup_mock_server`, presumably because it tries to double-free the mismatches.</div></div></div><br/>
<div><a id="1622123871.013400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622123871.013400" ><div class="time">2021-05-27 13:57</div></a><div class="msg">So yeah, I'm pretty stuck now tbh. I've added file logging to `mock_server_ffi` and I can get logging out of all the mock server bits, but the matcher modules don't log anything (presumably they use a different log than the global one and/or override the log somewhere internally?). None of my requests will match against registered interactions - I can see the interactions being set up properly and the request coming in looks identical to me. Without seeing the output of the matcher module I totally can't work out why this won't match my requests.

Log output:

```2021-05-27 14:45:49  INFO - Successfully initialised logger
2021-05-27 14:45:49 DEBUG - Created new pact between consumer Event API Consumer and provider Event API with ID 1
2021-05-27 14:45:49 DEBUG - Set specification version on pact 1: V2
2021-05-27 14:45:49 TRACE - registering event source with poller: token=Token(0), interests=READABLE | WRITABLE
2021-05-27 14:45:49 DEBUG - Started mock server on 127.0.0.1:6868
2021-05-27 14:45:49 DEBUG - Added new interaction with ID 1 to pact 1 : a request to retrieve event with id '83f9262f-28f1-4703-ab1a-8cfd9e8249c9'
2021-05-27 14:45:49 DEBUG - Updated description for interaction 1: a request to retrieve event with id '83f9262f-28f1-4703-ab1a-8cfd9e8249c9'
2021-05-27 14:45:49 DEBUG - Added provider state for interaction 1: there is an event with id '83f9262f-28f1-4703-ab1a-8cfd9e8249c9'
2021-05-27 14:45:49 DEBUG - Added request to interaction 1: GET /events/83f9262f-28f1-4703-ab1a-8cfd9e8249c9
2021-05-27 14:45:49 DEBUG - Added request header to interaction 1: accept application/json
2021-05-27 14:45:49 DEBUG - Added request header to interaction 1: authorization Bearer abcdef1234567890
2021-05-27 14:45:49 DEBUG - Added response status to interaction 1: 200
2021-05-27 14:45:49 DEBUG - Added response header to interaction 1: content-type application/json; charset=utf-8
2021-05-27 14:45:50 DEBUG - Added response body to interaction 1: Present(606 bytes)
2021-05-27 14:45:53 TRACE - registering event source with poller: token=Token(1), interests=READABLE | WRITABLE
2021-05-27 14:45:53 DEBUG - Creating pact request from hyper request
2021-05-27 14:45:53 DEBUG - Extracting query from uri /events/83f9262f-28f1-4703-ab1a-8cfd9e8249c9
2021-05-27 14:45:53 TRACE - path_and_query -&gt; /events/83f9262f-28f1-4703-ab1a-8cfd9e8249c9
2021-05-27 14:45:53  INFO - Received request Request ( method: GET, path: /events/83f9262f-28f1-4703-ab1a-8cfd9e8249c9, query: None, headers: Some({"accept": ["application/json"], "host": ["localhost:6868"], "connection": ["Keep-Alive"], "authorization": ["Bearer abcdef1234567890"]}), body: Empty )
2021-05-27 14:45:53 DEBUG - Request did not match: Request was not expected - Request ( method: GET, path: /events/83f9262f-28f1-4703-ab1a-8cfd9e8249c9, query: None, headers: Some({"accept": ["application/json"], "host": ["localhost:6868"], "connection": ["Keep-Alive"], "authorization": ["Bearer abcdef1234567890"]}), body: Empty )
2021-05-27 14:45:53  WARN - Mismatch: {"method":"GET","path":"/events/83f9262f-28f1-4703-ab1a-8cfd9e8249c9","request":{"body":"","headers":{"accept":"application/json","authorization":"Bearer abcdef1234567890","connection":"Keep-Alive","host":"localhost:6868"},"method":"GET","path":"/events/83f9262f-28f1-4703-ab1a-8cfd9e8249c9"},"type":"request-not-found"}
2021-05-27 14:45:53  INFO - Writing pact out to '../../../pacts/Event API Consumer-Event API.json'
2021-05-27 14:45:53 DEBUG - Writing new pact file to "../../../pacts/Event API Consumer-Event API.json"
2021-05-27 14:45:53 DEBUG - Shutting down mock server with port 6868
2021-05-27 14:45:53 DEBUG - Shutting down mock server with port 6868 - MockServerMetrics { requests: 1 }
2021-05-27 14:45:53 DEBUG - Mock server a681ad3a-2695-4577-aea7-b56cd5e8f462 shutdown - MockServerMetrics { requests: 1 }```
AFAIK it's supposed to ignore the `connection` and `host` headers, and the headers are supposed to be case-insensitive (I've tried both types) and no luck.

Second problem: The Ruby implementation has a "clear interactions" method which you call after each unit test. Without this, whenever one interaction fails then every subsequent test fails because the previously-failed interaction still shows up as a mismatched interaction until the entire test run ends. The Rust version doesn't seem to support that.</div></div></div><br/>
<div><a id="1622128079.014400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622128079.014400" ><div class="time">2021-05-27 15:07</div></a><div class="msg">OK I've managed to add some logging that's worked out there are no interactions inside that Pact, which is why nothing is matching (and presumably why there's no logging from the matching module - there's nothing to actually match against so it'll never get called)</div></div></div><br/>
<div><a id="1622160740.015200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622160740.015200" ><div class="time">2021-05-28 00:12</div></a><div class="msg">Strange, I?ve not had this problem, but also I have been working with a local copy of the FFI bindings because the new matchers only got merged yesterday</div></div></div><br/>
<div><a id="1622160750.015500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622160750.015500" ><div class="time">2021-05-28 00:12</div></a><div class="msg">Are you working with the released artifacts or locally compiled ones?</div></div></div><br/>
<div><a id="1622160773.016100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622160773.016100" ><div class="time">2021-05-28 00:12</div></a><div class="msg">Should we maybe setup a call early next week to pair througch a bit of this? You?ve got the energy, so it makes sense to capitalise on that</div></div></div><br/>
<div><a id="1622186380.020200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622186380.020200" ><div class="time">2021-05-28 07:19</div></a><div class="msg">So if I've read this code correctly - do you need to set up your interactions before you can start the mock server?

`MockServer::new` calls `Pact::thread_safe()` :
<a href="https://github.com/pact-foundation/pact-reference/blob/2b581d177ec6975bf1d2d94a9fa81f0b19792fb8/rust/pact_mock_server/src/mock_server.rs#L96-L107">https://github.com/pact-foundation/pact-reference/blob/2b581d177ec6975bf1d2d94a9fa81f0b19792fb8/rust/pact_mock_server/src/mock_server.rs#L96-L107</a>

And `Pact::thread_safe` creates a clone of the pact wrapped in an Arc/Mutex:
<a href="https://github.com/pact-foundation/pact-reference/blob/2b581d177ec6975bf1d2d94a9fa81f0b19792fb8/rust/pact_matching/src/models/mod.rs#L925-L927">https://github.com/pact-foundation/pact-reference/blob/2b581d177ec6975bf1d2d94a9fa81f0b19792fb8/rust/pact_matching/src/models/mod.rs#L925-L927</a>

Doesn't that mean the server is hosting whatever the pact happened to look like at the point the server was started? If so, if you haven't established your interactions yet then the clone will have none, which would match with what I'm seeing.</div></div></div><br/>
<div><a id="1622186665.020400"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622186665.020400" ><div class="time">2021-05-28 07:24</div></a><div class="msg">Yes, previous version was a separate process so it had to startup at the beginning of the test run, and was a stateful mock server. Each test had to then communicate with it via HTTP.</div></div></div><br/>
<div><a id="1622186709.020600"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622186709.020600" ><div class="time">2021-05-28 07:25</div></a><div class="msg">The Rust version is in-process, so we start up a new mock server for each test with the Pact required for that test.</div></div></div><br/>
<div><a id="1622186771.020800"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622186771.020800" ><div class="time">2021-05-28 07:26</div></a><div class="msg">There is not need to communicate with it via HTTP, we just pass it everything directly via FFI call.</div></div></div><br/>
<div><a id="1622186839.021000"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622186839.021000" ><div class="time">2021-05-28 07:27</div></a><div class="msg">It is way more efficient, but you need to setup the expected interactions first, and then start the server.</div></div></div><br/>
<div><a id="1622187429.021200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622187429.021200" ><div class="time">2021-05-28 07:37</div></a><div class="msg">Ah, oh dear. Yeah that's not gonna match how PactNet works at all</div></div></div><br/>
<div><a id="1622187501.021400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622187501.021400" ><div class="time">2021-05-28 07:38</div></a><div class="msg">There's quite a foot gun there as well - it looks like it should work given how the old version works but actually it's silently falling. You're adding interactions to an old clone of a pact that nothing is using, and nothing warns you of that</div></div></div><br/>
<div><a id="1622187632.021600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622187632.021600" ><div class="time">2021-05-28 07:40</div></a><div class="msg">The current versions of pact libraries have you set up and verify each interaction in a separate unit test, with the server started once at the beginning then the pact file written at the end.

You can't support a "unit test per interaction" workflow if you've got to set up all your interactions ahead of time and then verify them all together at the end.</div></div></div><br/>
<div><a id="1622187921.021800"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622187921.021800" ><div class="time">2021-05-28 07:45</div></a><div class="msg">No, each interaction can be for a separate test. They get merged into the pact file.</div></div></div><br/>
<div><a id="1622187951.022000"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622187951.022000" ><div class="time">2021-05-28 07:45</div></a><div class="msg">So each test can setup the interaction for that test</div></div></div><br/>
<div><a id="1622188096.022200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622188096.022200" ><div class="time">2021-05-28 07:48</div></a><div class="msg">But how if you can't start the server yet? The server needs to start at the beginning of the test run, but then you can't add any further interactions into it</div></div></div><br/>
<div><a id="1622188155.022400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622188155.022400" ><div class="time">2021-05-28 07:49</div></a><div class="msg">This is the current way that PactNet works:

<a href="https://github.com/pact-foundation/pact-net/blob/master/Samples/EventApi/Consumer.Tests/EventsApiConsumerTests.cs#L24-L57">https://github.com/pact-foundation/pact-net/blob/master/Samples/EventApi/Consumer.Tests/EventsApiConsumerTests.cs#L24-L57</a>

? The server starts once at the beginning
? Each test establishes an interaction
? You do the real HTTP call
? You verify the results of the HTTP call</div></div></div><br/>
<div><a id="1622188221.022800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622188221.022800" ><div class="time">2021-05-28 07:50</div></a><div class="msg">So you need to the verify inside each test, otherwise they won't fail when things go wrong</div></div></div><br/>
<div><a id="1622188270.023100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622188270.023100" ><div class="time">2021-05-28 07:51</div></a><div class="msg">And you need to do the HTTP call inside each test, so the server has to be started at that point, which means all interactions must already be registered, and therefore the test can't establish the interaction</div></div></div><br/>
<div><a id="1622188349.023300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622188349.023300" ><div class="time">2021-05-28 07:52</div></a><div class="msg">No wonder I've spent a couple of days struggling to understand why it doesn't work :smile: Those interactions that it looks like I'm adding are actually having no effect because they're being added to a pact that's not being used by the mock server</div></div></div><br/>
<div><a id="1622188417.023500"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622188417.023500" ><div class="time">2021-05-28 07:53</div></a><div class="msg">I would do something like (excuse my <a href="http://non-.Net">http://non-.Net</a> code):
```            _mockProviderService.Given("there are events with ids '45D80D13-D5A2-48D7-8353-CBB4C0EAABF5', '83F9262F-28F1-4703-AB1A-8CFD9E8249C9' and '3E83A96B-2A0C-49B1-9959-26DF23F83AEB'")
                .UponReceiving("a request to retrieve all events with no authorization")
                .With(new ProviderServiceRequest
                {
                    Method = HttpVerb.Get,
                    Path = "/events",
                    Headers = new Dictionary&lt;string, object&gt;
                    {
                        { "Accept", "application/json" },
                    }
                })
                .WillRespondWith(new ProviderServiceResponse
                {
                    Status = 401,
                    Headers = new Dictionary&lt;string, object&gt;
                    {
                        { "Content-Type", "application/json; charset=utf-8" }
                    },
                    Body = new 
                    {
                        message = "Authorization has been denied for this request."
                    }
                });
           _mockProviderService.RunTest { mock_server -&gt;

              var consumer = new EventsApiClient(mock_server.url());
              
              //Act //Assert
              await Assert.ThrowsAnyAsync&lt;Exception&gt;(() =&gt; consumer.GetAllEvents());
            
           }
           ```</div></div></div><br/>
<div><a id="1622188456.023700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622188456.023700" ><div class="time">2021-05-28 07:54</div></a><div class="msg">Yeah you can't do that. That test will always pass no matter what</div></div></div><br/>
<div><a id="1622188457.023900"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622188457.023900" ><div class="time">2021-05-28 07:54</div></a><div class="msg">The `runTest` method can call start and the beginning and then verify at the end</div></div></div><br/>
<div><a id="1622188531.024100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622188531.024100" ><div class="time">2021-05-28 07:55</div></a><div class="msg">Plus it's a definitely not an idiomatic way to write C#, and very different to how it is now.</div></div></div><br/>
<div><a id="1622188659.024300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622188659.024300" ><div class="time">2021-05-28 07:57</div></a><div class="msg">The only way I can see that working is if we start and stop the mock server for each every unit test, but that means it'll be starting and stopping potentially hundreds of times in a given test run, and writing the pact file hundreds of times also. You could only support the merge strategy for the pact file, never overwrite, which would be problematic also.

I imagine starting and stopping on the same port over and over will eventually cause problems as well, like the OS just won't accept that happening loads of times or something.</div></div></div><br/>
<div><a id="1622188710.024500"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622188710.024500" ><div class="time">2021-05-28 07:58</div></a><div class="msg">It does do that. I've implemented that pattern in Pact-JVM and Rust. It is very fast to spin up a server and shut it down again</div></div></div><br/>
<div><a id="1622188745.024800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622188745.024800" ><div class="time">2021-05-28 07:59</div></a><div class="msg">How do you support overwrite for the pact instead of merge?</div></div></div><br/>
<div><a id="1622188745.025000"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622188745.025000" ><div class="time">2021-05-28 07:59</div></a><div class="msg">Each mock server gets it's own port</div></div></div><br/>
<div><a id="1622188773.025200"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622188773.025200" ><div class="time">2021-05-28 07:59</div></a><div class="msg">overwrite won't be work</div></div></div><br/>
<div><a id="1622188807.025400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622188807.025400" ><div class="time">2021-05-28 08:00</div></a><div class="msg">Oof. Yeah I'm really not sure this is the best approach</div></div></div><br/>
<div><a id="1622188855.025600"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622188855.025600" ><div class="time">2021-05-28 08:00</div></a><div class="msg">@matt.fellows wants to have a chat next week, but it works in Rust, Java/Jvm and JS, so I'm pretty sure it will work in .Net</div></div></div><br/>
<div><a id="1622188874.025800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622188874.025800" ><div class="time">2021-05-28 08:01</div></a><div class="msg">@matt.fellows How do the JS and Go versions work? Do they start and stop the server for each interaction as well?</div></div></div><br/>
<div><a id="1622188935.026000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622188935.026000" ><div class="time">2021-05-28 08:02</div></a><div class="msg">Yep</div></div></div><br/>
<div><a id="1622188950.026200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622188950.026200" ><div class="time">2021-05-28 08:02</div></a><div class="msg">(sorry just making dinner but will try and follow up later)</div></div></div><br/>
<div><a id="1622188966.026400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622188966.026400" ><div class="time">2021-05-28 08:02</div></a><div class="msg">The trick is to clear out the pact file before use</div></div></div><br/>
<div><a id="1622188969.026600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622188969.026600" ><div class="time">2021-05-28 08:02</div></a><div class="msg">You can probably get it to work in .Net yes, but you'll end up with quite a non-idiomatic API and you'll only be able to support merge instead of overwrite (which is really annoying when working locally)</div></div></div><br/>
<div><a id="1622188981.026800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622188981.026800" ><div class="time">2021-05-28 08:03</div></a><div class="msg">The benefit is that you can do this in parallel</div></div></div><br/>
<div><a id="1622189050.027000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622189050.027000" ><div class="time">2021-05-28 08:04</div></a><div class="msg">Well, I'll give it a go and see where we end up. Got to say I'm sceptical though :smile: We'll need to drop remote server support as well, and that feature was literally just added</div></div></div><br/>
<div><a id="1622189130.027200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622189130.027200" ><div class="time">2021-05-28 08:05</div></a><div class="msg">And, some feedback for the Rust FFI end - if the server has already started then you should probably get an error back if you try to add/modify interactions. At the moment it accepts them but actually they have no effect, which has really confused me for 2 days now</div></div></div><br/>
<div><a id="1622189273.027500"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622189273.027500" ><div class="time">2021-05-28 08:07</div></a><div class="msg">Can you raise an issue for that, otherwise I might forget</div></div></div><br/>
<div><a id="1622189286.027700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622189286.027700" ><div class="time">2021-05-28 08:08</div></a><div class="msg">Yep, will do</div></div></div><br/>
<div><a id="1622189323.027900"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622189323.027900" ><div class="time">2021-05-28 08:08</div></a><div class="msg">How do you prevent the pact file from becoming corrupted if you start multiple servers all sharing that one file and run the tests in parallel?</div></div></div><br/>
<div><a id="1622189343.028100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622189343.028100" ><div class="time">2021-05-28 08:09</div></a><div class="msg">You could end up with 2 tests trying to both write the file at the same time</div></div></div><br/>
<div><a id="1622189380.028300"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622189380.028300" ><div class="time">2021-05-28 08:09</div></a><div class="msg">There is a memory lock as well as a file lock</div></div></div><br/>
<div><a id="1622189408.028500"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622189408.028500" ><div class="time">2021-05-28 08:10</div></a><div class="msg">Memory lock ensures thread access, file lock for multiple processes</div></div></div><br/>
<div><a id="1622189704.028700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622189704.028700" ><div class="time">2021-05-28 08:15</div></a><div class="msg">OK so multiple servers accessing the same file are sequential anyway? Is that for the entire time the file is being accessed? Otherwise if you lock on read, release the lock, do the processing, lock again then write, you'd have a race condition where an interaction could get dropped from the file</div></div></div><br/>
<div><a id="1622189924.028900"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622189924.028900" ><div class="time">2021-05-28 08:18</div></a><div class="msg">The memory lock is for the whole `write_pact` method, the file lock is for the entire read -&gt; merge -&gt; write, but only if the file all ready exists</div></div></div><br/>
<div><a id="1622190037.029100"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622190037.029100" ><div class="time">2021-05-28 08:20</div></a><div class="msg">There is a potential race condition there, but only for multiple processes accessing the file</div></div></div><br/>
<div><a id="1622194302.030600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622194302.030600" ><div class="time">2021-05-28 09:31</div></a><div class="msg">OK so the API you naturally end up with if it's "interaction per test" but also "start/stop server for every test" is this. I think that's kinda OK tbh. One problem is if the user has all the tests run in parallel and specifies the same port in multiple tests (instead of omitting the port and letting the backend allocate one dynamically)</div></div></div><br/>
<div><a id="1622201159.031000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622201159.031000" ><div class="time">2021-05-28 11:25</div></a><div class="msg">I think it?s worth calling out that the new .NET API does not have to look the same as the old. That might be ideal in terms of migration, and I?m not saying we should change it, but if we?re going to revisit what it looks like, now is the time.</div></div></div><br/>
<div><a id="1622201227.031200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622201227.031200" ><div class="time">2021-05-28 11:27</div></a><div class="msg">There are several classes of errors / problems this new design addresses. I?m not saying it couldn?t be improved, but it certainly solves a bunch of problems we frequently see as maintainers</div></div></div><br/>
<div><a id="1622201514.032400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622201514.032400" ><div class="time">2021-05-28 11:31</div></a><div class="msg">That looks pretty good to me! I?m assuming there was something like `using` that could be done here - happily it exists.</div></div></div><br/>
<div><a id="1622201570.033400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622201570.033400" ><div class="time">2021-05-28 11:32</div></a><div class="msg">I almost removed the ability to choose a port, but if I did, I knew that somebody would immediately ask. But we want to discourage it for that exact reason</div></div></div><br/>
<div><a id="1622201613.033800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622201613.033800" ><div class="time">2021-05-28 11:33</div></a><div class="msg">I?ll have a think about how to do that remotely.</div></div></div><br/>
<div><a id="1622201693.035100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622201693.035100" ><div class="time">2021-05-28 11:34</div></a><div class="msg">If you do want to catch up, let?s see if we can find an overlapping time. We?re exactly 9 hours ahead of you, so I?m assuming you?re based in UK/EU. We could do 5-6pm or something one weeknight (or later, but after 9pm here is usually once we have the gremlins down for sleep)</div></div></div><br/>
<div><a id="1622201715.035400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622201715.035400" ><div class="time">2021-05-28 11:35</div></a><div class="msg">Mon, Tues and Thurs are looking :ok_hand: at the moment</div></div></div><br/>
<div><a id="1622210106.035700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622210106.035700" ><div class="time">2021-05-28 13:55</div></a><div class="msg">OK, I've got it working! :tada:</div></div></div><br/>
<div><a id="1622210155.036500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622210155.036500" ><div class="time">2021-05-28 13:55</div></a><div class="msg">For simple consumer tests (as in ones with fixed bodies, not ones containing matching rules) then it works absolutely fine and writes out the pact file etc. Bodies containing matchers don't work, but I think we were expecting that at the moment?</div></div></div><br/>
<div><a id="1622210251.037000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622210251.037000" ><div class="time">2021-05-28 13:57</div></a><div class="msg">I'll have to have a look how you guys do the matching rules stuff in JS/Go and then try and get that working as well</div></div></div><br/>
<div><a id="1622210360.038600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622210360.038600" ><div class="time">2021-05-28 13:59</div></a><div class="msg">One potentially breaking change I've noticed in the Rust backend btw - the pact file that's written out now doesn't have the same name. In the Ruby version my file would be called `my_consumer-my_provider.json` but in the Rust version that would be `My Consumer-My Provider.json` which has spaces instead of underscores and hasn't been forced to lowercase. I could maybe see that causing problems (especially the spaces).</div></div></div><br/>
<div><a id="1622233186.040200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622233186.040200" ><div class="time">2021-05-28 20:19</div></a><div class="msg">And now the matchers are fixed as well since I've got a spare moment this evening, and all the consumer tests in the sample now work :tada: They really are quite slow though. I imagine starting and stopping the server over and over is quite a bottleneck. I can try out the current stable version for comparison but I don't remember them being this slow.</div></div></div><br/>
<div><a id="1622234206.042000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622234206.042000" ><div class="time">2021-05-28 20:36</div></a><div class="msg">Struggling to get the verification to work though. My code constructs the args properly but when it calls in to the `verify` method it gets a status code of 4 (invalid arguments). If I pass these exact same argument into the `pact_verifier_cli.exe` though then they work absolutely fine. Since I can't get the stderr logging I have no idea which of those it doesn't like.</div></div></div><br/>
<div><a id="1622234361.042700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622234361.042700" ><div class="time">2021-05-28 20:39</div></a><div class="msg">I wonder if those file path separators need double-escaping</div></div></div><br/>
<div><a id="1622240772.042800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622240772.042800" ><div class="time">2021-05-28 22:26</div></a><div class="msg">The FFI takes newline delimited arguments</div></div></div><br/>
<div><a id="1622240812.042900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622240812.042900" ><div class="time">2021-05-28 22:26</div></a><div class="msg">That's unbelievably slow.</div></div></div><br/>
<div><a id="1622240870.043200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622240870.043200" ><div class="time">2021-05-28 22:27</div></a><div class="msg">My node JS tests run in  in fractions of a second</div></div></div><br/>
<div><a id="1622244484.043400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622244484.043400" ><div class="time">2021-05-28 23:28</div></a><div class="msg">It looks ok to my eyes though. We'll get the logging so it can goto file and stdout (configurable)</div></div></div><br/>
<div><a id="1622245175.043500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622245175.043500" ><div class="time">2021-05-28 23:39</div></a><div class="msg">Matchers on bodies should definitely work.</div></div></div><br/>
<div><a id="1622245186.043700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622245186.043700" ><div class="time">2021-05-28 23:39</div></a><div class="msg">I added support for the other parts recently also</div></div></div><br/>
<div><a id="1622245195.043900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622245195.043900" ><div class="time">2021-05-28 23:39</div></a><div class="msg">But that may not be released it only just got merged</div></div></div><br/>
<div><a id="1622245252.044200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622245252.044200" ><div class="time">2021-05-28 23:40</div></a><div class="msg">The file name shouldn't be relevant for functionality but probably good to clean that up as you say</div></div></div><br/>
<div><a id="1622245263.044400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622245263.044400" ><div class="time">2021-05-28 23:41</div></a><div class="msg">It's the content that matters</div></div></div><br/>
<div><a id="1622276066.044600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622276066.044600" ><div class="time">2021-05-29 08:14</div></a><div class="msg">I've had a bit of a thought on that as well. Logging to a file would be great, but what would be even better is if you could init with a string as a sink (I've not checked it there are any crates for that or a way to redirect stdout though).

A file is a good first step, but in reality the UX would be annoying. Your test would fall and it could only say "go and check the file to find out why", and the file would have output from every test.

If it could log to a string sink instead (per server port, like with mismatches) then the test could retrieve it and include it in the test output. That would be a really good UX.</div></div></div><br/>
<div><a id="1622276101.044700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622276101.044700" ><div class="time">2021-05-29 08:15</div></a><div class="msg">Yep that's a good idea</div></div></div><br/>
<div><a id="1622276120.044800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622276120.044800" ><div class="time">2021-05-29 08:15</div></a><div class="msg">Or if it just returned the log at the end (like fetching the mismatches)</div></div></div><br/>
<div><a id="1622276164.044900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622276164.044900" ><div class="time">2021-05-29 08:16</div></a><div class="msg">Writing to the same address might be problematic, but providing an option to fetch the current log might be simpler and safer. What do you think?</div></div></div><br/>
<div><a id="1622276175.045000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622276175.045000" ><div class="time">2021-05-29 08:16</div></a><div class="msg">Yeah that'd be best. I can include that in the xUnit output then, so everything you need to know for your failing test should just be there</div></div></div><br/>
<div><a id="1622276248.045100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622276248.045100" ><div class="time">2021-05-29 08:17</div></a><div class="msg">Perhaps we should've gone the route of just calling the CLI like the ruby one did after all :joy:</div></div></div><br/>
<div><a id="1622276675.045300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622276675.045300" ><div class="time">2021-05-29 08:24</div></a><div class="msg">Just so I'm clear - we talking consumer or provider side for the logging? Might get some time for a play later (dinner Joe :wave:)</div></div></div><br/>
<div><a id="1622333306.045400"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622333306.045400" ><div class="time">2021-05-30 00:08</div></a><div class="msg">That's a really good idea. I'll try implement it today</div></div></div><br/>
<div><a id="1622334461.045700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622334461.045700" ><div class="time">2021-05-30 00:27</div></a><div class="msg">That's be awesome, thanks</div></div></div><br/>
<div><a id="1622341604.045900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622341604.045900" ><div class="time">2021-05-30 02:26</div></a><div class="msg">As an FYI, this is an example consumer test (just one) that goes through the full cycle. It?s not passing through a test framework like Jest/Mocha but I think is still indicative of the performance</div></div></div><br/>
<div><a id="1622341675.046300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622341675.046300" ><div class="time">2021-05-30 02:27</div></a><div class="msg">And my machine is far from quick!</div></div></div><br/>
<div><a id="1622354270.048100"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1622354270.048100" ><div class="time">2021-05-30 05:57</div></a><div class="msg">Hi matt and co - sorry I have been offline this weekend.. my mac (replacing the existing machine) is almost ready - just emails and get the project from git to go</div></div></div><br/>
<div><a id="1622356327.048200"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622356327.048200" ><div class="time">2021-05-30 06:32</div></a><div class="msg">@pact544 @matt.fellows I've been playing around with this. While I've got the logs being captured into a buffer, we can't stop the logs being interleaved from different threads.</div></div></div><br/>
<div><a id="1622356359.048400"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622356359.048400" ><div class="time">2021-05-30 06:32</div></a><div class="msg">The problem is that the matching code runs on a thread pool, so it could be running on any number of threads.</div></div></div><br/>
<div><a id="1622356522.048600"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622356522.048600" ><div class="time">2021-05-30 06:35</div></a><div class="msg">The only way it might work, is having a thread pool per mock server, but that would be wasting thread resources</div></div></div><br/>
<div><a id="1622360590.048900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622360590.048900" ><div class="time">2021-05-30 07:43</div></a><div class="msg">Ah makes sense.</div></div></div><br/>
<div><a id="1622360759.049100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622360759.049100" ><div class="time">2021-05-30 07:45</div></a><div class="msg">How expensive are we talking? Could we reduce the number of threads per server?</div></div></div><br/>
<div><a id="1622360851.049300"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622360851.049300" ><div class="time">2021-05-30 07:47</div></a><div class="msg">It's actually a little more complex. It is currently configured for one thread in the pool, but it is async on a Tokio runtime, so we can't use thread local state because different parts of different mock servers might be scheduled at any given time.</div></div></div><br/>
<div><a id="1622360881.049500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622360881.049500" ><div class="time">2021-05-30 07:48</div></a><div class="msg">I'd seen it as a property on the mock server object, which you know at the point you run the consumer tests so you can pass a mutable reference to its log buffer around. Probably be a bit awkward passing it around instead of holding it somewhere centrally though</div></div></div><br/>
<div><a id="1622360963.049800"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622360963.049800" ><div class="time">2021-05-30 07:49</div></a><div class="msg">The problem is the logging infrastructure is global, so you can't know which mock server the log entry is for</div></div></div><br/>
<div><a id="1622360998.050000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622360998.050000" ><div class="time">2021-05-30 07:49</div></a><div class="msg">Yeah, I assume that's the change that needs to happen</div></div></div><br/>
<div><a id="1622361033.050200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622361033.050200" ><div class="time">2021-05-30 07:50</div></a><div class="msg">(if we go that route)</div></div></div><br/>
<div><a id="1622361111.050400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622361111.050400" ><div class="time">2021-05-30 07:51</div></a><div class="msg">Is the verifier side any easier or is that also on multiple threads? At the moment there's no way to get anything other than a generic failed error code, so it's even more needed there</div></div></div><br/>
<div><a id="1622361189.050600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622361189.050600" ><div class="time">2021-05-30 07:53</div></a><div class="msg">You're probably unlikely to be running other pact tests, although I suppose you could be both a consumer and provider</div></div></div><br/>
<div><a id="1622361289.050900"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622361289.050900" ><div class="time">2021-05-30 07:54</div></a><div class="msg">Or perhaps we store the failures as actual objects and return those instead of a string representation of everything? Then multi threaded isn't a problem and it's not via global infrastructure</div></div></div><br/>
<div><a id="1622361291.051100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622361291.051100" ><div class="time">2021-05-30 07:54</div></a><div class="msg">Are you saying the the xunit framework doesn't let you see the stdout at all?it just swallows it and discards it</div></div></div><br/>
<div><a id="1622361301.051300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622361301.051300" ><div class="time">2021-05-30 07:55</div></a><div class="msg">Essentially, yes</div></div></div><br/>
<div><a id="1622361315.051600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622361315.051600" ><div class="time">2021-05-30 07:55</div></a><div class="msg">Crazy</div></div></div><br/>
<div><a id="1622361330.051800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622361330.051800" ><div class="time">2021-05-30 07:55</div></a><div class="msg">I'd like a JSON representation of the errors though</div></div></div><br/>
<div><a id="1622361362.052000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622361362.052000" ><div class="time">2021-05-30 07:56</div></a><div class="msg">That is something on my list of things to investigate (ala what the mock server does but in reverse)</div></div></div><br/>
<div><a id="1622361424.052200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622361424.052200" ><div class="time">2021-05-30 07:57</div></a><div class="msg">Yeah I think that's fine. For consumer tests it already stores the mismatches I think, and just converts to JSON as part of the FFI? We could do the same for verification errors.</div></div></div><br/>
<div><a id="1622361510.052500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622361510.052500" ><div class="time">2021-05-30 07:58</div></a><div class="msg">What's nice about structured data is you can convert them back into tests results (so you get a set of green ticks/crosses on provider side too)</div></div></div><br/>
<div><a id="1622361589.052700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622361589.052700" ><div class="time">2021-05-30 07:59</div></a><div class="msg">Yeah that'd be cool. Not sure how that'd work on the .Net side but I could see that for JS</div></div></div><br/>
<div><a id="1622361785.052900"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622361785.052900" ><div class="time">2021-05-30 08:03</div></a><div class="msg">Ooh, Tokio supports task local state: <a href="https://docs.rs/tokio/1.6.1/tokio/task/struct.LocalKey.html">https://docs.rs/tokio/1.6.1/tokio/task/struct.LocalKey.html</a></div></div></div><br/>
<div><a id="1622361818.053200"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622361818.053200" ><div class="time">2021-05-30 08:03</div></a><div class="msg">Might be able to push the mock server ID onto that, and then accumulate the log entries by that value</div></div></div><br/>
<div><a id="1622361838.053400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622361838.053400" ><div class="time">2021-05-30 08:03</div></a><div class="msg">:raised_hands:</div></div></div><br/>
<div><a id="1622361894.053700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622361894.053700" ><div class="time">2021-05-30 08:04</div></a><div class="msg">Most frameworks have hooks to be able to generate tests. I actually haven't done it for JS because too many frameworks to do it for. But Go was easy because just one</div></div></div><br/>
<div><a id="1622361918.053900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622361918.053900" ><div class="time">2021-05-30 08:05</div></a><div class="msg">More generally though, structured data I think gives flexibility</div></div></div><br/>
<div><a id="1622361948.054100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622361948.054100" ><div class="time">2021-05-30 08:05</div></a><div class="msg">E.g. a simple/quick wrapper could just use the default Rust output, complex integrations could do as they please</div></div></div><br/>
<div><a id="1622402295.054400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622402295.054400" ><div class="time">2021-05-30 19:18</div></a><div class="msg">I fixed this btw :thumbsup: I was passing an arg like `--loglevel info&lt;newline&gt;--foo bar` instead of having a newline between an argument and its value. Now that everything is separated by newline it's passing in fine, but I get a general verification failure and no logging so can't tell why.</div></div></div><br/>
<div><a id="1622406029.055800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622406029.055800" ><div class="time">2021-05-30 20:20</div></a><div class="msg">I've added the following to `pact_provider_ffi/lib.rs` by the way to get some file logging out:

```/// Init the library with logging directed to a file as well as stdout
///
/// # Safety
///
/// Exported functions are inherently unsafe.
///
/// # Errors
///
/// Errors are returned as non-zero numeric values.
///
/// | Error | Description |
/// |-------|-------------|
/// | -1 | Unable to convert the file name to a valid string |
/// | -2 | Unable to create a logging sink with the given file name |
/// | -3 | Unable to initialise the logger |
/// | -4 | A null pointer was received |
#[no_mangle]
pub unsafe extern "C" fn init_with_file(
    file_name: *const c_char,
    level_filter: LevelFilter,
) -&gt; i32 {
    if file_name.is_null() {
        return -4;
    }

    let file_name = match CStr::from_ptr(file_name).to_str() {
        Ok(file_name) =&gt; file_name,
        Err(_) =&gt; return -1
    };

    let file = match fern::log_file(file_name) {
        Ok(f) =&gt; f,
        Err(_) =&gt; return -2
    };

    let result = fern::Dispatch::new()
        .format(|out, message, record| {
            out.finish(format_args!(
                "[{}][{}] {}",
                record.target(),
                record.level(),
                message
            ))
        })
        .level(level_filter)
        .chain(std::io::stdout())
        .chain(file)
        .apply();

    match result {
        Ok(()) =&gt; 0,
        Err(_) =&gt; -3
    }
}```
It uses `fern` since `pact_matching_ffi` already uses that, except that sets up a thread local logger instead of a global one, which isn't what you need when doing verification via FFI really.</div></div></div><br/>
<div><a id="1622406101.057000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622406101.057000" ><div class="time">2021-05-30 20:21</div></a><div class="msg">As an aside, is there any particular reason the Rust code doesn't use the standard `rustfmt` and `clippy` conventions? Whenever I'm doing Rust code I always get in the habit of doing a `cargo fmt` before committing anything (you could set it up as a pre-commit hook even) and making sure I've sorted all clippy warnings out</div></div></div><br/>
<div><a id="1622420420.057200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622420420.057200" ><div class="time">2021-05-31 00:20</div></a><div class="msg">Ron added the interfaces from the matching ffi lib, so I think that would be redundant now</div></div></div><br/>
<div><a id="1622436655.057400"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622436655.057400" ><div class="time">2021-05-31 04:50</div></a><div class="msg">Task local vars is working! :tada:</div></div></div><br/>
<div><a id="1622436661.057600"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622436661.057600" ><div class="time">2021-05-31 04:51</div></a><div class="msg">```$ src/consumer-verification basic ../../rust/target/debug/libpact_mock_server_ffi.so
This is consumer-verification 0.0.0.
Setup logging result: 0
Running basic pact test
Mock server started on port 46267
Executing request against <a href="http://localhost:46267/mallory?name=ron&amp;status=good">http://localhost:46267/mallory?name=ron&amp;status=good</a>
*   Trying 127.0.0.1:46267...
* Connected to localhost (127.0.0.1) port 46267 (#0)
&gt; GET /mallory?name=ron&amp;status=good HTTP/1.1
Host: localhost:46267
Accept: */*

* Mark bundle as not supporting multiuse
&lt; HTTP/1.1 200 OK
&lt; access-control-allow-origin: *
&lt; access-control-allow-headers: *
&lt; access-control-allow-methods: GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH
&lt; access-control-expose-headers: Location, Link
&lt; content-type: text/html
&lt; content-length: 28
&lt; date: Mon, 31 May 2021 04:49:08 GMT
&lt; 
* Connection #0 to host localhost left intact
"That is some good Mallory."

OK: Mock server verified all requests, as expected
--------------- MOCK SERVER LOGS ---------------
[DEBUG][pact_mock_server::hyper_server] Creating pact request from hyper request
[DEBUG][pact_mock_server::hyper_server] Extracting query from uri /mallory?name=ron&amp;status=good
[INFO][pact_mock_server::hyper_server] Received request Request ( method: GET, path: /mallory, query: Some({"name": ["ron"], "status": ["good"]}), headers: Some({"accept": ["*/*"], "host": ["localhost:46267"]}), body: Empty )
[INFO][pact_matching] comparing to expected Request ( method: GET, path: /mallory, query: Some({"status": ["good"], "name": ["ron"]}), headers: None, body: Missing )
[DEBUG][pact_matching]      body: ''
[DEBUG][pact_matching]      matching_rules: MatchingRules { rules: {} }
[DEBUG][pact_matching]      generators: Generators { categories: {} }
[DEBUG][pact_matching::matchers] String -&gt; String: comparing '/mallory' to '/mallory' using Equality
[DEBUG][pact_matching] expected content type = '*/*', actual content type = '*/*'
[DEBUG][pact_matching] content type header matcher = 'None'
[DEBUG][pact_matching::matchers] String -&gt; String: comparing 'good' to 'good' using Equality
[DEBUG][pact_matching::matchers] String -&gt; String: comparing 'ron' to 'ron' using Equality
[DEBUG][pact_matching] --&gt; Mismatches: []
[DEBUG][pact_mock_server::hyper_server] Test context = {"mockServer": Object({"href": String("<a href="http://127.0.0.1:46267">http://127.0.0.1:46267</a>"), "port": Number(46267)})}
[INFO][pact_mock_server::hyper_server] Request matched, sending response Response ( status: 200, headers: Some({"Content-Type": ["text/html"]}), body: Present(28 bytes, text/html) )
[DEBUG][pact_mock_server::hyper_server]      body: '"That is some good Mallory."'

------------------------------------------------
------------------ GLOBAL LOGS ------------------
[WARN][pact_matching::models] No metadata found in pact file "&lt;create_mock_server&gt;", assuming V3 specification
[WARN][pact_matching::models] No metadata found in pact file "&lt;create_mock_server&gt;", assuming V3 specification
[DEBUG][pact_mock_server::mock_server] Started mock server on 127.0.0.1:46267
[DEBUG][pact_mock_server::server_manager] Shutting down mock server with port 46267
[DEBUG][pact_mock_server::server_manager] Shutting down mock server with port 46267 - MockServerMetrics { requests: 1 }
[DEBUG][pact_mock_server::mock_server] Mock server f23a4853-09ad-4ce7-b489-3c7a51a4cba5 shutdown - MockServerMetrics { requests: 1 }

------------------------------------------------```</div></div></div><br/>
<div><a id="1622436732.057800"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622436732.057800" ><div class="time">2021-05-31 04:52</div></a><div class="msg">Global log entries are not associated with any mock server, and each mock server will be able to fetch it's log entries regardless of threads</div></div></div><br/>
<div><a id="1622436865.058000"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622436865.058000" ><div class="time">2021-05-31 04:54</div></a><div class="msg">Expect for the thread local support, but we should consolidate that</div></div></div><br/>
<div><a id="1622437099.058200"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622437099.058200" ><div class="time">2021-05-31 04:58</div></a><div class="msg">Clippy is run as part of the CI build. I'm generally apposed to formatting tools (like lints), as I don't feel they provide any value apart for people who get agitated with formatting mismatches. I prefer the commit diffs to only contain the functional changes. But that is just me.</div></div></div><br/>
<div><a id="1622437137.058400"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622437137.058400" ><div class="time">2021-05-31 04:58</div></a><div class="msg">@matt.fellows has to deal with me always removing his lint tools and deleting his commit hooks.</div></div></div><br/>
<div><a id="1622438518.058600"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622438518.058600" ><div class="time">2021-05-31 05:21</div></a><div class="msg">Speaking of which, latest build has failed due to a clippy violation</div></div></div><br/>
<div><a id="1622439878.058900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622439878.058900" ><div class="time">2021-05-31 05:44</div></a><div class="msg">I don?t like any formatting/linting that requires humans to do anything. But my OCD does like consistent formatting.
More importantly (and I could be wrong about Clippy), I want those tools to tell me when I?m doing something stupid, or if I could be doing it better - better I want them to do it for me</div></div></div><br/>
<div><a id="1622439899.059100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622439899.059100" ><div class="time">2021-05-31 05:44</div></a><div class="msg">I absolutely don?t want to get into dumb arguments about spaces/tabs, the size of the tabs etc.</div></div></div><br/>
<div><a id="1622439924.059300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622439924.059300" ><div class="time">2021-05-31 05:45</div></a><div class="msg">That?s one thing Go does well - this is the format you use. No exceptions, don?t waste valuable brain capacity on it</div></div></div><br/>
<div><a id="1622439954.059700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622439954.059700" ><div class="time">2021-05-31 05:45</div></a><div class="msg">wow! Awesome</div></div></div><br/>
<div><a id="1622440049.059900"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622440049.059900" ><div class="time">2021-05-31 05:47</div></a><div class="msg">I need to verify it working with multiple threads, but is a problem for another day</div></div></div><br/>
<div><a id="1622440171.060100"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622440171.060100" ><div class="time">2021-05-31 05:49</div></a><div class="msg">Clippy has been pretty good, you can learn to be better at Rust by fixing the warnings</div></div></div><br/>
<div><a id="1622440271.060300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622440271.060300" ><div class="time">2021-05-31 05:51</div></a><div class="msg">is that something that gives you compile time feedback, or in the IDE? or better question - how should I use it :slightly_smiling_face:</div></div></div><br/>
<div><a id="1622440290.060500"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622440290.060500" ><div class="time">2021-05-31 05:51</div></a><div class="msg">But the build I just fixed was not a useful one</div></div></div><br/>
<div><a id="1622440413.060800"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622440413.060800" ><div class="time">2021-05-31 05:53</div></a><div class="msg">It's CLI at the moment, but I'm sure you can set something in the IDE</div></div></div><br/>
<div><a id="1622440530.061000"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622440530.061000" ><div class="time">2021-05-31 05:55</div></a><div class="msg">There is a VSC plugin, but look like it is slow</div></div></div><br/>
<div><a id="1622440553.061200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622440553.061200" ><div class="time">2021-05-31 05:55</div></a><div class="msg">&gt;  Look like it is slow
It?s ok, my rust compiler is also slow</div></div></div><br/>
<div><a id="1622440587.061400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622440587.061400" ><div class="time">2021-05-31 05:56</div></a><div class="msg">This one? :stuck_out_tongue:</div></div></div><br/>
<div><a id="1622440645.061800"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622440645.061800" ><div class="time">2021-05-31 05:57</div></a><div class="msg">Yeah, that! :smile:</div></div></div><br/>
<div><a id="1622440647.062000"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622440647.062000" ><div class="time">2021-05-31 05:57</div></a><div class="msg"><a href="https://rust-analyzer.github.io/manual.html#vs-code">https://rust-analyzer.github.io/manual.html#vs-code</a></div></div></div><br/>
<div><a id="1622440751.062400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622440751.062400" ><div class="time">2021-05-31 05:59</div></a><div class="msg">haha thanks, found that one too</div></div></div><br/>
<div><a id="1622440932.062700"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622440932.062700" ><div class="time">2021-05-31 06:02</div></a><div class="msg">IntelliJ IDEA supports it as well</div></div></div><br/>
<div><a id="1622441122.062900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622441122.062900" ><div class="time">2021-05-31 06:05</div></a><div class="msg">It might be time for me to bite that bullet</div></div></div><br/>
<div><a id="1622442778.063100"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622442778.063100" ><div class="time">2021-05-31 06:32</div></a><div class="msg">Clippy in IntelliJ feels really slow, and that's on my metabox, CLI is better</div></div></div><br/>
<div><a id="1622442798.063300"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622442798.063300" ><div class="time">2021-05-31 06:33</div></a><div class="msg">You can just run `cargo clippy` on the project</div></div></div><br/>
<div><a id="1622446675.063800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622446675.063800" ><div class="time">2021-05-31 07:37</div></a><div class="msg">Yeah I like the "just follow the format" and "tool does it for me" approach that `cargo fmt` does for me. I'm really struggling to read the code locally because it's so dense (I have some sight problems) so I've had to reformat to be able to follow it. That does make it difficult to contribute though.</div></div></div><br/>
<div><a id="1622446999.064000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622446999.064000" ><div class="time">2021-05-31 07:43</div></a><div class="msg">So headline is that both provider and consumer tests now work in my PactNet branch (which is essentially a rewrite pretty much from scratch now tbh) :tada: There's plenty still to do, like adding V3 matchers (easy), integrating with whatever logging solution lands in core, redoing the sample to <a href="http://ASP.Net">http://ASP.Net</a> Core (easy) and sorting the unit tests out (tests for native integration might be fun...).</div></div></div><br/>
<div><a id="1622447077.064100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622447077.064100" ><div class="time">2021-05-31 07:44</div></a><div class="msg">Oh and message pacts, of course! It should be very natural to add those on now given the new API I've created.</div></div></div><br/>
<div><a id="1622450539.064800"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1622450539.064800" ><div class="time">2021-05-31 08:42</div></a><div class="msg">hi all... looks like my mac is set up.. where can i fit into this discussion</div></div></div><br/>
<div><a id="1622459038.065100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622459038.065100" ><div class="time">2021-05-31 11:03</div></a><div class="msg">You?ll probably have to do more work to actually expose the message pact interface and make it usable - keen to hear your thoughts on this (outside of the proxy approach mentioned/alluded to at <a href="https://github.com/pact-foundation/pact-reference/issues/110">https://github.com/pact-foundation/pact-reference/issues/110</a>)</div></div></div><br/>
<div><a id="1622459516.072500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622459516.072500" ><div class="time">2021-05-31 11:11</div></a><div class="msg">@pact544 first up, thanks - this work was so timely and getting onto the Rust core is a strategic priority for the framework.

Let?s step back for a quick moment. There are a few things we should discuss before we go too far, and some flags to raise as we progress (storm!?) into a v3 release:

1. Adam - what are your plans/ambitions going forward? We recently reached out to the community for involvement and have a number of parties interested in driving forward the .NET agenda, so it would be good to know what your plans are and how we can accommodate them / work together
2. For getting the next major Pact .NET out, I suggest we get a project board setup for visibility, discussion, collaboration etc. We should also put it on the main home page that this work is underway (and probably a pinned issue) (<a href="https://github.com/pact-foundation/pact-js/projects/3">https://github.com/pact-foundation/pact-js/projects/3</a> and <a href="https://github.com/pact-foundation/pact-go/projects/2">https://github.com/pact-foundation/pact-go/projects/2</a> have them)
3. QA / release process (how do we validate the new interface, FFI boundary, feature tests etc.)
4. As far as getting beta users and feedback, we have a Pactflow POST going out in June - we can do a callout for beta users to get involved, and I?d also like to do a callout to all of our new contributors there
5. Migration guide - we?ll need one of these to help users make the transition
6. Blogs, tutorials .net workshop update - 
7. Message support - how do we see that working? 

:point_down: let?s get a :thread: going on this</div></div></div><br/>
<div><a id="1622461509.072700"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1622461509.072700" ><div class="time">2021-05-31 11:45</div></a><div class="msg">for QA/Release, do we want a slightly more formal methodology? Sets of tests for critical and not critical operations (ie must work every release and have a lower expectation of the non-critical)</div></div></div><br/>
<div><a id="1622461577.072900"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1622461577.072900" ><div class="time">2021-05-31 11:46</div></a><div class="msg">Specs need to be formulated with minimal standards that enable integrations like FFI to be exercised with RFC compliance in mind</div></div></div><br/>
<div><a id="1622461694.073100"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1622461694.073100" ><div class="time">2021-05-31 11:48</div></a><div class="msg">If the new .NET does not have to look like the current one,  perhaps a wrapper to enable quick updating would allow quicker uptake of an upgrade, with a migration strategy so users can assess the size and work over a period of time instead of big banging it</div></div></div><br/>
<div><a id="1622462101.073300"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1622462101.073300" ><div class="time">2021-05-31 11:55</div></a><div class="msg">The ultimate goal would be as much automated testing as feasible, with CI/CD quality gates for measured values such as unit test code coverage, pass rates and code smells (eg sonarqube)</div></div></div><br/>
<div><a id="1622487177.073500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622487177.073500" ><div class="time">2021-05-31 18:52</div></a><div class="msg">In terms of my intentions - my company is very heavily invested in PactNet as pushed by me a number of years ago, and I've been checking in regularly for message-type support.

Upon seeing the call for replacement maintainers I asked our Director if I could take a stab at it on work time, so I spent quite a lot of last week almost full time on it (and can spend a lot this coming week also).

I'm happy to be a contributor but not sure I can commit to X hours per week or anything like that unless my company allows me to do so on work time. I was kinda planning to discuss that with them in the near future, and I can see a good case for allowing me (and others at my company) to help out.

I think the alternative would be that we dropped PactNet entirely and went with a very different approach as it's a risk relying heavily on an open source project with no maintainer, so I can see the talks generally going well.</div></div></div><br/>
<div><a id="1622487434.073700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622487434.073700" ><div class="time">2021-05-31 18:57</div></a><div class="msg">In terms of migrating users over to a Rust-backed version - I mean, effectively this is a complete rewrite at the moment for 2 key reasons:

1. The semantics of the mock server have changed so much (now it's set up interactions then start it vs. old way of starting then setting up/tearing down interactions as you go) that people are going to have to rewrite their consumer tests pretty much no matter what. I haven't tried it obviously, but I think some kind of compatibility wrapper is probably a non-starter.
2. Some of the existing API for PactNet just wouldn't be compatible with some v3 stuff. There are too many things of type `object` whereas all the Rust backend expects nicely split out strings. For example, query string params are now very different.
Unfortunately, I think it looks like a "big bang" from where I'm sitting, albeit a pretty easy transition that should be quite easy to write a migration guide for.</div></div></div><br/>
<div><a id="1622487697.074000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622487697.074000" ><div class="time">2021-05-31 19:01</div></a><div class="msg">On point 1 above - I'd really urge us to reconsider that approach. I know we said it makes the mock server more efficient, but in my testing it's made performance much worse. Each consumer test now takes ~3s on my very fast machine and you're likely to have dozens of them.

I haven't done any profiling to find out why but I'd put good money on it being the mock server starting and stopping over and over for each interaction.

It could also be that the FFI is very fine-grained with lots of calls, where FFI is known to be quite slow, but I'd say that's unlikely to be contributing seconds of latency.</div></div></div><br/>
<div><a id="1622488088.074200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622488088.074200" ><div class="time">2021-05-31 19:08</div></a><div class="msg">On QA - I have absolutely no idea short of beta testing. Obviously you'd have unit/integration tests in there, but writing those for interop code sounds like a real nightmare. You can't inspect the internal state of the other end of the FFI boundary so you'd basically have to write proper consumer tests in order to validate and check the resultant pact file afterwards.</div></div></div><br/>
<div><a id="1622488148.074400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622488148.074400" ><div class="time">2021-05-31 19:09</div></a><div class="msg">On release process - obviously it would be a breaking change so we bump major version, and we also need to distribute the FFI libs on an OS-specific way. I think you can use NuGet for this to bundle native deps and then it restores the correct one at build time via OS detection, but we'd need to check that</div></div></div><br/>
<div><a id="1622488277.074600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622488277.074600" ><div class="time">2021-05-31 19:11</div></a><div class="msg">On message support - I've not given too much thought to how you have an equivalent "mock server" given you don't know which message queue the client is using. I was hoping to steal ideas from other Pact libraries for that :smile: The actual API inside PactNet itself is pretty straightforward though I think once the message queue tech is abstracted</div></div></div><br/>
<div><a id="1622488525.074900"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622488525.074900" ><div class="time">2021-05-31 19:15</div></a><div class="msg">Oh, another thing for QA - we're going to have to do plenty of cross-platform testing now that we're entirely reliant on FFI. There are probably tons of gotchas (even stuff like the library having a different name/extension on different platforms)</div></div></div><br/>
<div><a id="1622529538.075200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622529538.075200" ><div class="time">2021-06-01 06:38</div></a><div class="msg">I had a quick look how `Com-Pact` (an alternative PactNet implementation in pure C#) works for message pacts, and in that you simply supply a `Func&lt;string, object&gt;` which will be called for each consumer/provider interaction which is expected to  work like the real message queue. I think that's a good approach and it abstracts away the underlying MQ technology from PactNet.</div></div></div><br/>
<div><a id="1622530961.075500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622530961.075500" ><div class="time">2021-06-01 07:02</div></a><div class="msg">sounds very similar to the other approaches</div></div></div><br/>
<div><a id="1622531005.075700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622531005.075700" ><div class="time">2021-06-01 07:03</div></a><div class="msg">FYI see the diagrams here for the Ruby implementation: <a href="https://github.com/pact-foundation/pact-message-demo">https://github.com/pact-foundation/pact-message-demo</a></div></div></div><br/>
<div><a id="1622531021.076000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622531021.076000" ><div class="time">2021-06-01 07:03</div></a><div class="msg">This is how Pact Go \ JS \ PHP \ Python do it</div></div></div><br/>
<div><a id="1622531057.076200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622531057.076200" ><div class="time">2021-06-01 07:04</div></a><div class="msg">We talked about passing a function to the FFI to invoke, but the thinking was that may be problematic - e.g. async/promises etc.</div></div></div><br/>
<div><a id="1622531103.076400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622531103.076400" ><div class="time">2021-06-01 07:05</div></a><div class="msg">so it currently works like the verifier, needing an HTTP endpoint to call. If the framework spins this up, it can simply register those `Func&lt;string, string&gt;`and the framework can map the incoming message (via the  `description` ) to the correct registered  function</div></div></div><br/>
<div><a id="1622531114.076600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622531114.076600" ><div class="time">2021-06-01 07:05</div></a><div class="msg">this was what I was alludinsg to with provider states. Basically the same mechanism</div></div></div><br/>
<div><a id="1622535923.077000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622535923.077000" ><div class="time">2021-06-01 08:25</div></a><div class="msg">Hi @pact544 it actually is. I've done the change on the pact-net side but was stuck because I didn't have the rust system implemented :slightly_smiling_face:</div></div></div><br/>
<div><a id="1622535949.077200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622535949.077200" ><div class="time">2021-06-01 08:25</div></a><div class="msg">I might take your branch and simply plug my integration test / code to see if it works</div></div></div><br/>
<div><a id="1622536493.077400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622536493.077400" ><div class="time">2021-06-01 08:34</div></a><div class="msg">Hi evereone. Thanks @pact544 on all the work with the Rust integration! That's going to prove useful! I will be focused on the messaging part but have to really understand the difference with the Rust integration. As far as pact messages go, I'm not 100% sold on the approach with a proxy server that simulates an HTTP request. That would mean for each interaction model we would need to have a specific route... maybe look at the java approach and have a build-in verification for the messages. Regardless, I stand with my 4 hours contribution per week. in the next few weeks.</div></div></div><br/>
<div><a id="1622536605.077700"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622536605.077700" ><div class="time">2021-06-01 08:36</div></a><div class="msg">@pact544 on our internal lib, we created a fixture class that takes care of the port, clearing interactions, the mock service, etc. That could be a way to "factorize" the work you do initializing each test.</div></div></div><br/>
<div><a id="1622538894.078100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622538894.078100" ><div class="time">2021-06-01 09:14</div></a><div class="msg">Yeah cool. The way I saw it working was adding a method onto `IPactBuilder` that returns an `IMessageBuilder` which mirrors the existing `UponReceiving` which returns an `IRequestBuilder`. That way the API means you can't get it wrong, so like:

```public interface IPactBuilder
{
    IRequestBuilder UponReceiving(string description);
    IMessageBuilder WhenReceiving(...); // or whatever the method is called
}```</div></div></div><br/>
<div><a id="1622541637.078300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622541637.078300" ><div class="time">2021-06-01 10:00</div></a><div class="msg">The WhenReceiving is not bad. That would allow a new builder to implicitly add the provider state with the description. (on my end, the provider state is mandatory to simulate the message on the provider side)

The IMessageBuilder will also need to Verify a certain message is being sent without any problem.</div></div></div><br/>
<div><a id="1622541714.078500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622541714.078500" ><div class="time">2021-06-01 10:01</div></a><div class="msg">`ExpectsToReceive` would be more consistent with the other languages, FWIW</div></div></div><br/>
<div><a id="1622541946.079300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622541946.079300" ><div class="time">2021-06-01 10:05</div></a><div class="msg">That's the one :thumbsup: Couldn't remember the term used</div></div></div><br/>
<div><a id="1622542036.079600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622542036.079600" ><div class="time">2021-06-01 10:07</div></a><div class="msg">@matt.fellows Do you see another interaction model (in the upcoming PACT specs)? We would need to create a builder for each one in that case. Not a bad idea.</div></div></div><br/>
<div><a id="1622542045.079800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622542045.079800" ><div class="time">2021-06-01 10:07</div></a><div class="msg">&gt; I will be focused on the messaging part but have to really understand the difference with the Rust integration. 
Awesome - hopefully your work does translate nicely!

&gt; As far as pact messages go, I?m not 100% sold on the approach with a proxy server that simulates an HTTP request. 
I?m not sure I understand. There is no simulation of the HTTP request with message pact, because in message pact it doesn?t  model an HTTP req/res cycle. The HTTP proxy is simply an implementation detail for *message producer tests* in order to communicate to the message pact FFI interface, which is essentially a call to a verifier CLI - see <a href="https://github.com/pact-foundation/pact-reference/tree/master/rust/pact_verifier_cli#verifying-message-pacts">https://github.com/pact-foundation/pact-reference/tree/master/rust/pact_verifier_cli#verifying-message-pacts</a> (it needs to communicate to an HTTP interface, something I don?t think we should expose to an end user wanting to test that their function is able to produce the correct message for say, a kafka or SNS topic)



&gt; That would mean for each interaction model we would need to have a specific route... maybe look at the java approach and have a build-in verification for the messages.
Java does it all in proc, but it is not using the FFI interface. The luxury of Ron being the core maintainer of both JVM and Rust means he?s happy to do that work twice :wink:

&gt;  Regardless, I stand with my 4 hours contribution per week. in the next few weeks.
Amazing - thanks!</div></div></div><br/>
<div><a id="1622542075.080000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622542075.080000" ><div class="time">2021-06-01 10:07</div></a><div class="msg">Yeah I think it's best doing it that way because then all the 'sub-operations' are grouped together on the specific builder</div></div></div><br/>
<div><a id="1622542094.080300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622542094.080300" ><div class="time">2021-06-01 10:08</div></a><div class="msg">Like that means you can't accidentally do a `WithQuery` on a message interaction and stuff</div></div></div><br/>
<div><a id="1622542134.080500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622542134.080500" ><div class="time">2021-06-01 10:08</div></a><div class="msg">Got it @matt.fellows in any way, to me the first step is to have a consumer pact with a message using the rust and the provider side will follow. Thanks for the clarification</div></div></div><br/>
<div><a id="1622542192.080900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622542192.080900" ><div class="time">2021-06-01 10:09</div></a><div class="msg">and each interaction model is served by the IPactBuilder but work independently. Agreed!</div></div></div><br/>
<div><a id="1622542218.081200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622542218.081200" ><div class="time">2021-06-01 10:10</div></a><div class="msg">I'd also had a thought about how to handle different spec versions and thought we probably want like an `IPactBuilderV2` and `IPactBuilderV3` to support different things you can do between specs. For example, v3 supports multiple provider states and provider state params, but v2 doesn't. If you put `GivenWithParam` on `IRequestBuilder` then you've got to validate every call to check if the spec supports it.

I'd rather the API means you just can't get it wrong</div></div></div><br/>
<div><a id="1622542285.081600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622542285.081600" ><div class="time">2021-06-01 10:11</div></a><div class="msg">Indeed</div></div></div><br/>
<div><a id="1622542311.081800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622542311.081800" ><div class="time">2021-06-01 10:11</div></a><div class="msg">I?m really not wedded to implementation, and I?m an outsider as far as .NET is concerned. I have to trust that you know what is ideal for .NET library consumers</div></div></div><br/>
<div><a id="1622542337.082000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622542337.082000" ><div class="time">2021-06-01 10:12</div></a><div class="msg">I?m mostly here to provide the frameworks overarching goals, help wrangle, coordinate where I see opportunity and connect people</div></div></div><br/>
<div><a id="1622542465.082200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622542465.082200" ><div class="time">2021-06-01 10:14</div></a><div class="msg">@greg595au?s points around testing are valid, so I would love to encourage us to think about what the testing approach looks like. I think testing the FFI interface directly (from the .NET code base) may not be the best use of time though, and feature level suites that exercise the interface in the ways we need to remain reliable are probably a better approach.

This way we prevent breaking API changes at the consumer level, which will help stability, we prevent breaking changes from FFI going out and we also get a nice set of examples we can share with users</div></div></div><br/>
<div><a id="1622542519.082400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622542519.082400" ><div class="time">2021-06-01 10:15</div></a><div class="msg">We kind of do this in Pact JS. The example projects now get tested as part of the build, so if we change the API in a backwards incompatible way, they will discover it. That was a bit by accident, but going forward we?ll invest in more of those because it turns out they?ve been really handy</div></div></div><br/>
<div><a id="1622542553.082700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622542553.082700" ><div class="time">2021-06-01 10:15</div></a><div class="msg">yes</div></div></div><br/>
<div><a id="1622542560.082900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622542560.082900" ><div class="time">2021-06-01 10:16</div></a><div class="msg">to both :stuck_out_tongue:</div></div></div><br/>
<div><a id="1622542581.083100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622542581.083100" ><div class="time">2021-06-01 10:16</div></a><div class="msg">Yeah I think the PactNet stuff is already like that, with the sample actually containing tests :thumbsup: They just probably need fleshing out a bit more</div></div></div><br/>
<div><a id="1622542613.083400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622542613.083400" ><div class="time">2021-06-01 10:16</div></a><div class="msg">How are you going to prevent V3 matchers from goinsg into a V2 pact? Presumably you allow essentially any object in the body, which can contain matchers? Can you detect htat at the type layer? (ideal)</div></div></div><br/>
<div><a id="1622542627.083600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622542627.083600" ><div class="time">2021-06-01 10:17</div></a><div class="msg">I had to resort to reflection in Go, which was a bit shit</div></div></div><br/>
<div><a id="1622542642.083800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622542642.083800" ><div class="time">2021-06-01 10:17</div></a><div class="msg">It needs a test to actually look what the resultant spec file looks like though as well, which isn't there at the moment. They're samples of how to write consumer tests, but don't actually verify the the resultant pact file is valid or did everything you expected</div></div></div><br/>
<div><a id="1622542678.084000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622542678.084000" ><div class="time">2021-06-01 10:17</div></a><div class="msg">For example, if `IRequestBuilder.WithQuery` just did nothing, the consumer tests would all pass but the resultant pact file would be wrong. You need tests to make sure it does call the FFI when you call it</div></div></div><br/>
<div><a id="1622542687.084200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622542687.084200" ><div class="time">2021-06-01 10:18</div></a><div class="msg">I  would _love_ to see a feature suite (e.g. in BDD/Cucumber) that specifies the behaviour we?d like to see for _all_ rust implementations</div></div></div><br/>
<div><a id="1622542697.084400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622542697.084400" ><div class="time">2021-06-01 10:18</div></a><div class="msg">and then implementing that per language is the roadmap to done</div></div></div><br/>
<div><a id="1622542707.084600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622542707.084600" ><div class="time">2021-06-01 10:18</div></a><div class="msg">@greg595au what do you think about that concept?</div></div></div><br/>
<div><a id="1622542709.084800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622542709.084800" ><div class="time">2021-06-01 10:18</div></a><div class="msg">Yeah that'd be great, just implementing the steps files per library</div></div></div><br/>
<div><a id="1622542888.085100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622542888.085100" ><div class="time">2021-06-01 10:21</div></a><div class="msg">&gt; @matt.fellowsDo you see another interaction model (in the upcoming PACT specs)? We would need to create a builder for each one in that case. Not a bad idea.
yes, v4 introduces a few new things. The main interaction level ones are synchronous messages (1 request &lt;-&gt; * response). There is also plugins coming, but that would probably be a separate interface altogether.

See also <a href="https://github.com/pact-foundation/pact-specification/tree/version-4/">https://github.com/pact-foundation/pact-specification/tree/version-4/</a> and <a href="https://github.com/pact-foundation/pact-specification/issues/71">https://github.com/pact-foundation/pact-specification/issues/71</a>

It just turned 1, so Ron is about to kill it and close it off.</div></div></div><br/>
<div><a id="1622542928.085400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622542928.085400" ><div class="time">2021-06-01 10:22</div></a><div class="msg">The rest of it is going to be new matchers, and new annotations for the Pact file (labels, pending tests). HTTP interactions can also be in the same file as the Messages</div></div></div><br/>
<div><a id="1622543159.085600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622543159.085600" ><div class="time">2021-06-01 10:25</div></a><div class="msg">I've done a lot of BDD in .Net but for anyone that hasn't: <a href="https://docs.specflow.org/projects/getting-started/en/latest/index.html">https://docs.specflow.org/projects/getting-started/en/latest/index.html</a></div></div></div><br/>
<div><a id="1622543184.085900"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622543184.085900" ><div class="time">2021-06-01 10:26</div></a><div class="msg">That's basically the only BDD framework, but it's also very good and integrates with VS very nicely</div></div></div><br/>
<div><a id="1622543198.086100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622543198.086100" ><div class="time">2021-06-01 10:26</div></a><div class="msg">I?ve not done .NET before, but even I?ve heard of it!</div></div></div><br/>
<div><a id="1622543285.086300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622543285.086300" ><div class="time">2021-06-01 10:28</div></a><div class="msg">Yeah adding v3 matchers to v2 pacts is def problematic because at the moment the request body is just a `dynamic` (and has to be really) which the Rust end translates into the proper rules (which is a very nice feature btw)</div></div></div><br/>
<div><a id="1622543324.086500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622543324.086500" ><div class="time">2021-06-01 10:28</div></a><div class="msg">I was hoping you had some brilliant idea I could steal for Pact Go, but that makes me feel better</div></div></div><br/>
<div><a id="1622543355.086700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622543355.086700" ><div class="time">2021-06-01 10:29</div></a><div class="msg">So what I have, is a method that navigates the object that was put in, and errors if it contains a matcher with the wrong specification version</div></div></div><br/>
<div><a id="1622543363.086900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622543363.086900" ><div class="time">2021-06-01 10:29</div></a><div class="msg">But that might be better off in the rust core, tbh</div></div></div><br/>
<div><a id="1622543379.087100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622543379.087100" ><div class="time">2021-06-01 10:29</div></a><div class="msg">Com-Pact does it a very different way where you build up the request very rigidly, which I do kinda like but it's also very strict and verbose, like this:

```        .With(Pact.JsonContent.With(
            Some.String.Named("eventId").LikeGuid("f84fe18f-d871-4dad-9723-65b6dc9b0578"),
            Some.Object.Named("recipe").With(
                Some.Element.Named("name").Like("A Recipe"),
                Some.Element.Named("instructions").Like("Mix it up"),
                Some.Array.Named("ingredients").InWhichEveryElementIs(ingredient)
            )))```</div></div></div><br/>
<div><a id="1622543422.087300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622543422.087300" ><div class="time">2021-06-01 10:30</div></a><div class="msg">The DSL is all here: <a href="https://github.com/bartschotten/com-pact#pact-content-dsl">https://github.com/bartschotten/com-pact#pact-content-dsl</a></div></div></div><br/>
<div><a id="1622543509.087600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622543509.087600" ><div class="time">2021-06-01 10:31</div></a><div class="msg">I considered that, but I know how JS and Go get used based on a few years of maintainership, and I didn?t think it would fly (despite have a much stronger type system)</div></div></div><br/>
<div><a id="1622543512.087800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622543512.087800" ><div class="time">2021-06-01 10:31</div></a><div class="msg">trade offs</div></div></div><br/>
<div><a id="1622543583.088000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622543583.088000" ><div class="time">2021-06-01 10:33</div></a><div class="msg">Yeah you could do the same in .Net and have like an `IBodyBuilderV2` and `IBodyBuilderV3` with lots of methods for building up the body that were only valid for the specific spec version, but I don't think that would fly with users either. It's very verbose even if it is technically the most correct way</div></div></div><br/>
<div><a id="1622543653.088200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622543653.088200" ><div class="time">2021-06-01 10:34</div></a><div class="msg">Like

```.WithJsonBody(builder =&gt; builder.Object.Like(...))```
and chain those all the way down like Com-Pact does</div></div></div><br/>
<div><a id="1622560849.088500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622560849.088500" ><div class="time">2021-06-01 15:20</div></a><div class="msg">Hey @matt.fellows we are doing BDD also heavily with Specflow. Our PACT lib actually has some BDD integrated. We could add some for sure. Sharing the Gerkins would be an idea.</div></div></div><br/>
<div><a id="1622563359.090400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622563359.090400" ><div class="time">2021-06-01 16:02</div></a><div class="msg">I've started filling in unit tests for my branch now, with all the interop stuff abstracted so at least I can prove that everything _should_ call the Rust core properly as long as that one interop class is implemented properly, although obviously that one interop class currently has no tests because they'd be very tricky to write properly. We should definitely do at least one happy path integration test against it though just to make sure.</div></div></div><br/>
<div><a id="1622565757.090600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622565757.090600" ><div class="time">2021-06-01 16:42</div></a><div class="msg">OK, integration test is there also which fully starts the mock server with a properly setup pact and interaction, calls the mock server, writes the file and verifies the pact contents afterwards, all using the real Rust core library :thumbsup:</div></div></div><br/>
<div><a id="1622586109.090900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622586109.090900" ><div class="time">2021-06-01 22:21</div></a><div class="msg">That would be ace</div></div></div><br/>
<div><a id="1622588827.091400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622588827.091400" ><div class="time">2021-06-01 23:07</div></a><div class="msg"><a href="https://github.com/adamrodger/pact-net/blob/feature/rust-interop/tests/PactNet.Native.Tests/NativeMockServerTests.cs">https://github.com/adamrodger/pact-net/blob/feature/rust-interop/tests/PactNet.Native.Tests/NativeMockServerTests.cs</a> looks very similar to how I started. Good to see :stuck_out_tongue:</div></div></div><br/>
<div><a id="1622598348.091600"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1622598348.091600" ><div class="time">2021-06-02 01:45</div></a><div class="msg">@matt.fellows we can write cucumber style tests in a tech agnostic way. This gives us a lot of flexibility and re-use. @pact544 interested to see what u have in that space. We'll need to agree on the statements but i think we can do that in a few conference sessions</div></div></div><br/>
<div><a id="1622616027.091900"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622616027.091900" ><div class="time">2021-06-02 06:40</div></a><div class="msg">Yeah I was thinking along the lines of

```Feature: Multiple provider states

Scenario: v2 pact should error
    Given a v2 pact between 'consumer' and 'provider'
      And an interaction named 'v2 multi provider states'
    When I add the provider state 'test provider state'
     And I add the provider state 'another provider state'
    Then I should receive the error 'v2 pacts don't support multiple provider states'
 
Scenario: v3 pact should work
    Given a v3 pact between 'consumer' and 'provider'
      And an interaction named 'v3 multi provider states'
    When I add the provider state 'test provider state'
     And I add the provider state 'another provider state'
    Then the interaction should have provider state 'test provider state'
     And the interaction should have provider state 'another provider state'```
If those were all in a centralised place as the spec files, then each library could simply implement the steps files required to drive it all and we'd have a kind of 'spec compliance' suite which is library-agnostic. That'd be awesome.

We'd just have to be careful that the tests themselves weren't written with particular implementations in mind or something because the idiomatic APIs across different languages may make it difficult to fit in with the steps otherwise.</div></div></div><br/>
<div><a id="1622616495.092300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622616495.092300" ><div class="time">2021-06-02 06:48</div></a><div class="msg">exactly</div></div></div><br/>
<div><a id="1622616557.092600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622616557.092600" ><div class="time">2021-06-02 06:49</div></a><div class="msg">As an aside, Seb Rose is a big Pact fan - I wonder if we could get him involved in some way?</div></div></div><br/>
<div><a id="1622616576.092800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622616576.092800" ><div class="time">2021-06-02 06:49</div></a><div class="msg">He also recently got Beth to talk about Pact at an upcoming conference, so perhaps we could ask him to return the favour :stuck_out_tongue:</div></div></div><br/>
<div><a id="1622624145.093100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622624145.093100" ><div class="time">2021-06-02 08:55</div></a><div class="msg">It's not a bad idea to put the specs as Gerkins based but just a footnote, with specflow, it is quite different from normal integration tests. While it's a good idea, I think we should do it at the end because it can be quite a big code base.</div></div></div><br/>
<div><a id="1622624335.093400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622624335.093400" ><div class="time">2021-06-02 08:58</div></a><div class="msg">Yeah at the moment I've just got some basic integration tests at both the FFI level and the the 'user API' level to validate that everything works correctly, but they definitely won't be as extensive as the kind of thing I've outlined there. Just simple happy path stuff</div></div></div><br/>
<div><a id="1622624606.093600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622624606.093600" ><div class="time">2021-06-02 09:03</div></a><div class="msg">One thing they do in pact js I think is to separate the matchers based on specs. We could imagine another way of defining the matching rules for v3 but yeah the problem would be the validation between configuring a v2 pact with v3 matchers...</div></div></div><br/>
<div><a id="1622628747.093800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622628747.093800" ><div class="time">2021-06-02 10:12</div></a><div class="msg">I've just pushed the change that enables this :thumbsup:  So now you specify the version at the point you create the Pact object, and you get a versioned builder back which only lets you do things that are valid for that version: <a href="https://github.com/adamrodger/pact-net/blob/feature/rust-interop/tests/PactNet.Native.Tests/PactExtensionsTests.cs#L68-L97">https://github.com/adamrodger/pact-net/blob/feature/rust-interop/tests/PactNet.Native.Tests/PactExtensionsTests.cs#L68-L97</a></div></div></div><br/>
<div><a id="1622630777.094100"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1622630777.094100" ><div class="time">2021-06-02 10:46</div></a><div class="msg">hi @pact544 your cukes is looking good. I concur with a central repo of tests as we ensure the product will have been consistent coverage from a "font of knowledge"</div></div></div><br/>
<div><a id="1622630838.094300"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1622630838.094300" ><div class="time">2021-06-02 10:47</div></a><div class="msg">@pact544 Have you ever tried the @ tags? Names are good too, tags enalbe us to control/filter the test suites</div></div></div><br/>
<div><a id="1622636619.094600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622636619.094600" ><div class="time">2021-06-02 12:23</div></a><div class="msg">Yeah for sure :thumbsup:</div></div></div><br/>
<div><a id="1622647664.094800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622647664.094800" ><div class="time">2021-06-02 15:27</div></a><div class="msg">Tests in for the verifier as well now, with the sample provider test acting as the integration test at the moment.</div></div></div><br/>
<div><a id="1622647724.096000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622647724.096000" ><div class="time">2021-06-02 15:28</div></a><div class="msg">I _think_ we're almost at v3 support for request/response now (not messages though obviously, waiting to see what @yann.courtel comes up with). I've added the extra matchers, just need to add the extra v3 request stuff like provider states with params and binary message bodies. Those are all really easy though.</div></div></div><br/>
<div><a id="1622704329.096400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622704329.096400" ><div class="time">2021-06-03 07:12</div></a><div class="msg">Hey Adam, I think, as I said, that if they tests are good to go and we are compatible with the spec 2.0, we should go ahead and make a pull review first because putting the messages support. What do you think @matt.fellows Just so that we don't put to many things at once. What do you think guys?</div></div></div><br/>
<div><a id="1622704460.096600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622704460.096600" ><div class="time">2021-06-03 07:14</div></a><div class="msg">Yeah it should have v2 support afaik. I think the only thing missing from v3 support is binary message bodies now. Just going through the spec and making sure</div></div></div><br/>
<div><a id="1622704836.096800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622704836.096800" ><div class="time">2021-06-03 07:20</div></a><div class="msg">So yeah, missing for full v3 support:

? Matchers for (all very easy):
    ? Equality
    ? Null
    ? Include
? Combining matchers with OR (need to check how the Rust core wants these formatted)
? Generators (propose we don't make that a base req)
I can do all of that today no probs.

Binary bodies are actually v4 so I don't need to do those after all.</div></div></div><br/>
<div><a id="1622704916.097000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622704916.097000" ><div class="time">2021-06-03 07:21</div></a><div class="msg">ok sounds good! I will just focus on adding provider states by the API tests for now. The messages will come right after. Shall I push onto your branch directly?</div></div></div><br/>
<div><a id="1622704986.097200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622704986.097200" ><div class="time">2021-06-03 07:23</div></a><div class="msg">I suppose it's one for @matt.fellows. You can def raise a PR against my fork, but then it's weird that the dev is happening in my fork instead of the main repo :slightly_smiling_face: But then also I don't have push access to the main repo so I guess it has to be there?</div></div></div><br/>
<div><a id="1622705041.097400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622705041.097400" ><div class="time">2021-06-03 07:24</div></a><div class="msg">Well why not, it's like an intermediary branch :wink: I tried without the Rust support and I have too many things to duplicate unfortunately</div></div></div><br/>
<div><a id="1622705295.097600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622705295.097600" ><div class="time">2021-06-03 07:28</div></a><div class="msg">All for getting it out and in the hands of people sooner rather than later</div></div></div><br/>
<div><a id="1622705312.097800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622705312.097800" ><div class="time">2021-06-03 07:28</div></a><div class="msg">those matchers are advanced uses, and are not commonly used across the ecosystem yet anyway</div></div></div><br/>
<div><a id="1622705323.098000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622705323.098000" ><div class="time">2021-06-03 07:28</div></a><div class="msg">Getting rid of Ruby would be the #1 in and of itself, let alone the other benefits</div></div></div><br/>
<div><a id="1622705354.098200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622705354.098200" ><div class="time">2021-06-03 07:29</div></a><div class="msg">This is where I need help (maybe @jacek.helper has thoughts on this), but ideally, we have a separate tracking branch for the v3 release and can get it published on Nuget as a beta.</div></div></div><br/>
<div><a id="1622705365.098400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622705365.098400" ><div class="time">2021-06-03 07:29</div></a><div class="msg">In that case, should we initiate a 4.0.0 version since there are many breaking changes? :slightly_smiling_face:</div></div></div><br/>
<div><a id="1622705368.098600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622705368.098600" ><div class="time">2021-06-03 07:29</div></a><div class="msg">we then need a plan to maintain the current path in parallel for a period of time</div></div></div><br/>
<div><a id="1622705371.098800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622705371.098800" ><div class="time">2021-06-03 07:29</div></a><div class="msg">indeed we should</div></div></div><br/>
<div><a id="1622705427.099100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622705427.099100" ><div class="time">2021-06-03 07:30</div></a><div class="msg">Yeah it'd def be v4.0.0, and could do with some proper review of the codebase as a whole given it's essentially a rewrite</div></div></div><br/>
<div><a id="1622705458.099300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622705458.099300" ><div class="time">2021-06-03 07:30</div></a><div class="msg">@pact544 I am starting with the sample (API tests) to make sure they work with the V3 Pact builder (they do ^^) and adding the functions one at a time, TDD style. I can stash my work and go from master as soon as the 4.0.0 is created, no problem.</div></div></div><br/>
<div><a id="1622705473.099600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622705473.099600" ><div class="time">2021-06-03 07:31</div></a><div class="msg">Before we can release a first beta version though we need to sort out packaging up the Rust libs as a NuGet because at the moment they look at a locally compiled version</div></div></div><br/>
<div><a id="1622705494.099800"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622705494.099800" ><div class="time">2021-06-03 07:31</div></a><div class="msg">that's true. Almost forgot</div></div></div><br/>
<div><a id="1622705535.100000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622705535.100000" ><div class="time">2021-06-03 07:32</div></a><div class="msg">I can def have a go at that as well. The repo still contains all the old scripts for grabbing the Ruby version and stuff, so we should replace all of that also</div></div></div><br/>
<div><a id="1622705574.100300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622705574.100300" ><div class="time">2021-06-03 07:32</div></a><div class="msg">@matt.fellows I'd tried the bintray link to the released Rust versions and it just gave me a 404 though. Do you know the proper URL?</div></div></div><br/>
<div><a id="1622705705.100500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622705705.100500" ><div class="time">2021-06-03 07:35</div></a><div class="msg">bintray?</div></div></div><br/>
<div><a id="1622705718.100700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622705718.100700" ><div class="time">2021-06-03 07:35</div></a><div class="msg">Ahh, they are the C++ artifacts I think</div></div></div><br/>
<div><a id="1622705727.100900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622705727.100900" ><div class="time">2021-06-03 07:35</div></a><div class="msg">just look at GH releases, that?s where they?re published</div></div></div><br/>
<div><a id="1622705739.101100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622705739.101100" ><div class="time">2021-06-03 07:35</div></a><div class="msg"><a href="https://github.com/pact-foundation/pact-reference/releases">https://github.com/pact-foundation/pact-reference/releases</a></div></div></div><br/>
<div><a id="1622705800.101600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622705800.101600" ><div class="time">2021-06-03 07:36</div></a><div class="msg">bintray is :coffin:</div></div></div><br/>
<div><a id="1622705927.101900"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622705927.101900" ><div class="time">2021-06-03 07:38</div></a><div class="msg">Ah OK, I'll have a think about how best to grab those then. IIRC github supports a "latest" metatag, but it's probably best that we hard-code the version in a script somewhere anyway so it's clear when we upgrade</div></div></div><br/>
<div><a id="1622705990.102200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622705990.102200" ><div class="time">2021-06-03 07:39</div></a><div class="msg">Oh - do we only support 64bit libraries? I'd expected to see 32bit for Windows/Linux</div></div></div><br/>
<div><a id="1622706027.102400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622706027.102400" ><div class="time">2021-06-03 07:40</div></a><div class="msg">The test runner in Visual Studio runs as 32bit by default as well (who knows why) so it gives you errors unless you change from the defaults</div></div></div><br/>
<div><a id="1622706169.102600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622706169.102600" ><div class="time">2021-06-03 07:42</div></a><div class="msg">I believe you can change the target processor for 64. no?</div></div></div><br/>
<div><a id="1622706622.102900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622706622.102900" ><div class="time">2021-06-03 07:50</div></a><div class="msg">Might need that 32 bit then - currently there is no 32 bit build, but I assume it?s doable</div></div></div><br/>
<div><a id="1622706639.103100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622706639.103100" ><div class="time">2021-06-03 07:50</div></a><div class="msg">as for the release pinning, I do that in Pact Go. I think it makes sense, because semver etc.</div></div></div><br/>
<div><a id="1622706704.103400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622706704.103400" ><div class="time">2021-06-03 07:51</div></a><div class="msg">Yeah plus keeping bindings up to date with a moving FFI target, nah thanks :smile:</div></div></div><br/>
<div><a id="1622706716.103600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622706716.103600" ><div class="time">2021-06-03 07:51</div></a><div class="msg">:point_up:</div></div></div><br/>
<div><a id="1622706740.103800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622706740.103800" ><div class="time">2021-06-03 07:52</div></a><div class="msg">Right, I'll prioritise getting the native deps bundled up somehow then and we'll see how it goes</div></div></div><br/>
<div><a id="1622712768.107300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622712768.107300" ><div class="time">2021-06-03 09:32</div></a><div class="msg">Looking for opinions on packing these native deps because there are two options:

1. Like now with PactNet.Windows, PactNet.Linux.x86 etc etc so the user has to install the appropriate package for their OS
    a. Good - creates small packages
    b. Bad - it's really annoying when working cross-platform to have to have OS-specific conditionals in your csproj (e.g. you mostly work on Windows but CI runs in Docker/Linux), plus Visual Studio only updates the Windows version when doing nuget upgrades
2. Just build one PactNet.Native package which include all the OS-specific FFI libraries, and then it unpacks the correct one at compile time depending on the OS
    c. Good - only one thing to install and then it all just works
    d. Bad - big package (probably around 30MB)
Opinions? I think I prefer option 2</div></div></div><br/>
<div><a id="1622713200.107400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622713200.107400" ><div class="time">2021-06-03 09:40</div></a><div class="msg">I would prefer #2. Indeed, we have our local test on Windows and on the build, it's on a Linux system so more maintenance to do.</div></div></div><br/>
<div><a id="1622714386.107600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622714386.107600" ><div class="time">2021-06-03 09:59</div></a><div class="msg">The support for multiple parameterized provider state is actually super easy since the rust ffi supports it. I added an API test (in the sample projects) to test the V3 specific features. I think we can add it to your work @pact544. We would leave out only the messaging part for another branch.</div></div></div><br/>
<div><a id="1622715308.107800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622715308.107800" ><div class="time">2021-06-03 10:15</div></a><div class="msg">Oh, I already did the parameterised provider states, sorry!</div></div></div><br/>
<div><a id="1622715332.108000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622715332.108000" ><div class="time">2021-06-03 10:15</div></a><div class="msg">haha, it's fine, I got the code base and added the V3 Api tests ^^</div></div></div><br/>
<div><a id="1622715337.108200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622715337.108200" ><div class="time">2021-06-03 10:15</div></a><div class="msg">Cool, 2 it is</div></div></div><br/>
<div><a id="1622715973.108400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622715973.108400" ><div class="time">2021-06-03 10:26</div></a><div class="msg">have you got the ?value from provider states? feature implement? Add that to the #TODO</div></div></div><br/>
<div><a id="1622715998.108800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622715998.108800" ><div class="time">2021-06-03 10:26</div></a><div class="msg">Yann - are you saying you?ve added tests to Adam?s code base already?</div></div></div><br/>
<div><a id="1622716026.109000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622716026.109000" ><div class="time">2021-06-03 10:27</div></a><div class="msg">I?d go with 2</div></div></div><br/>
<div><a id="1622716032.109200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622716032.109200" ><div class="time">2021-06-03 10:27</div></a><div class="msg">that?s the new plan with Pact JS</div></div></div><br/>
<div><a id="1622716051.109400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622716051.109400" ><div class="time">2021-06-03 10:27</div></a><div class="msg">I haven't pushed it yet (not sure I can) because the provider state middleware will have to change to validate it can get the values from them.</div></div></div><br/>
<div><a id="1622716061.109600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622716061.109600" ><div class="time">2021-06-03 10:27</div></a><div class="msg">The consumer part works fine</div></div></div><br/>
<div><a id="1622716066.109800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622716066.109800" ><div class="time">2021-06-03 10:27</div></a><div class="msg">nice</div></div></div><br/>
<div><a id="1622716077.110000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622716077.110000" ><div class="time">2021-06-03 10:27</div></a><div class="msg">we should get you folks push access to the main repo, so you can collaborate</div></div></div><br/>
<div><a id="1622716100.110200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622716100.110200" ><div class="time">2021-06-03 10:28</div></a><div class="msg">it's not super mandatory since it's not a lib problem but it's on the provider side but it would be nice to have a full API tests for V3 features :slightly_smiling_face:</div></div></div><br/>
<div><a id="1622716123.110400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622716123.110400" ><div class="time">2021-06-03 10:28</div></a><div class="msg">haha yeah. Although seeing the code base up close, it will be much easier to implement the messaging part now</div></div></div><br/>
<div><a id="1622716194.110700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622716194.110700" ><div class="time">2021-06-03 10:29</div></a><div class="msg">It also makes the whole thing _so_ much easier to write</div></div></div><br/>
<div><a id="1622716251.111100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622716251.111100" ><div class="time">2021-06-03 10:30</div></a><div class="msg">Yeah I even put a `TODO` in the code exactly where it needs to go :smile:</div></div></div><br/>
<div><a id="1622717773.111500"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1622717773.111500" ><div class="time">2021-06-03 10:56</div></a><div class="msg">Hi guys,
Great news that you push forward work on V3.
@matt.fellows I am happy to share my thougs/help just feeling a bit lost in this thread. There are number of technical details and questions so I am not sure on where my input can be valuable.</div></div></div><br/>
<div><a id="1622717927.111800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622717927.111800" ><div class="time">2021-06-03 10:58</div></a><div class="msg">yeah, it moved very quickly from ?hello? to ?here is an example working with FFI?</div></div></div><br/>
<div><a id="1622717960.112000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622717960.112000" ><div class="time">2021-06-03 10:59</div></a><div class="msg">The current state is there is a working v3 compatible branch using the FFI bindings, the macro level questions are currently - what does a rollout of this look like (e.g. to nuget, branching, testing, beta testing etc.)</div></div></div><br/>
<div><a id="1622717975.112200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622717975.112200" ><div class="time">2021-06-03 10:59</div></a><div class="msg">I?ve just invited you folks to join the org</div></div></div><br/>
<div><a id="1622720000.113000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622720000.113000" ><div class="time">2021-06-03 11:33</div></a><div class="msg">So I've got it all packaging up properly. The packed nuget is ~25MB and fully unpacked it would be ~75MB, but it should only unpack the ones you actually need so ~10MB</div></div></div><br/>
<div><a id="1622720286.113800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622720286.113800" ><div class="time">2021-06-03 11:38</div></a><div class="msg">Awesome!</div></div></div><br/>
<div><a id="1622720292.114000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622720292.114000" ><div class="time">2021-06-03 11:38</div></a><div class="msg">25mb seems totally reasonable to me.</div></div></div><br/>
<div><a id="1622720314.114200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622720314.114200" ><div class="time">2021-06-03 11:38</div></a><div class="msg">When you get several hundred MB for a react project, what?s another 35 mb?</div></div></div><br/>
<div><a id="1622720339.114700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622720339.114700" ><div class="time">2021-06-03 11:38</div></a><div class="msg">What do we think about using a project board to track the work e.g. <a href="https://github.com/pact-foundation/pact-net/projects/1?add_cards_query=is%3Aopen">https://github.com/pact-foundation/pact-net/projects/1?add_cards_query=is%3Aopen</a></div></div></div><br/>
<div><a id="1622720351.115100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622720351.115100" ><div class="time">2021-06-03 11:39</div></a><div class="msg">you don?t have to convert them into issues</div></div></div><br/>
<div><a id="1622720385.115800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622720385.115800" ><div class="time">2021-06-03 11:39</div></a><div class="msg">I?d suggest for big items where we may want a collaborative/review process, we could convert into issues. For smaller tracking, the task itself might be fine</div></div></div><br/>
<div><a id="1622720393.116100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622720393.116100" ><div class="time">2021-06-03 11:39</div></a><div class="msg">Currently it?s hard to get a ?snapshot? as to where things are at</div></div></div><br/>
<div><a id="1622720422.116900"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622720422.116900" ><div class="time">2021-06-03 11:40</div></a><div class="msg">Yeah we probably need to add x86 at least for Linux if not Windows as well, and maybe the new osx processor also. That's probably double the size</div></div></div><br/>
<div><a id="1622720426.117200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622720426.117200" ><div class="time">2021-06-03 11:40</div></a><div class="msg">If you like, I can put basic placeholder cards for all of the things at a macro level might need to get done. It doesn?t mean we can?t release a package before then of course</div></div></div><br/>
<div><a id="1622720457.117300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622720457.117300" ><div class="time">2021-06-03 11:40</div></a><div class="msg">Maybe even MUSL for Linux so it works in Alpine containers</div></div></div><br/>
<div><a id="1622720463.117500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622720463.117500" ><div class="time">2021-06-03 11:41</div></a><div class="msg">And ARM</div></div></div><br/>
<div><a id="1622720485.117700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622720485.117700" ><div class="time">2021-06-03 11:41</div></a><div class="msg">:joy:</div></div></div><br/>
<div><a id="1622720490.117900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622720490.117900" ><div class="time">2021-06-03 11:41</div></a><div class="msg">M1?</div></div></div><br/>
<div><a id="1622720493.118100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622720493.118100" ><div class="time">2021-06-03 11:41</div></a><div class="msg">Yeah</div></div></div><br/>
<div><a id="1622720531.118300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622720531.118300" ><div class="time">2021-06-03 11:42</div></a><div class="msg">I think Ron has the musl stuff covered, at least, he has a process to generate musl artifacts - for that exact reason</div></div></div><br/>
<div><a id="1622720631.118500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622720631.118500" ><div class="time">2021-06-03 11:43</div></a><div class="msg">For now I'll just leave it at x64 but it's just a few lines of copy/paste to add further arch once they're supported</div></div></div><br/>
<div><a id="1622721051.118900"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1622721051.118900" ><div class="time">2021-06-03 11:50</div></a><div class="msg">Few thought from me:
1. I think it will be easier to drive a changes and collaborate, especially from the meta level point of view if we have task, issues related to some kind of plan. Like GitHub issues, which can be used also for release notes. It will be also more transparent for others users, what they can expect and in which order
2. In my maybe not pragmatic World I thought that we will do that in two steps: Moving to Rust, adding v3 support. Which will be first that is relative. Moving to Rust itself should be an internal binary change, with still same public interface, we should be able to avoid breaking changes.   
3. Although I didn't see a code changes, it looks like a big thing  worth to major bum up
4. In terms of supporting two version (not sure if If I chain good understanding ). When we will release new 4.0.0 version, then we should only fixed bug for older one
5. Beta version - very good idea for such change. We just need to think about asserts here e.g. how long, is there anyone which we want to ask directly about test and so on. It will be good to know under which condition we want to promote beta version.
6. I never use term of FFI, but if you think about calling RUST fro c# then we may have invest some time for more narrow compering to end to end, integration tests suit. They will just focus on such integration
7. Branch like 4.0.0 sounds good to me
8. Nuget release, depend on how we want to test it, we may even start with alpha version (`4.0.0-apha001, 4.0.0-apha002`), next beta, and final one. Personally I am using GitVersion for this. 
I am almost sure that you have think about all of this stuff, so sorry if I didn't add anything new. At least just share my broad understanding.</div></div></div><br/>
<div><a id="1622721151.119300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622721151.119300" ><div class="time">2021-06-03 11:52</div></a><div class="msg">That?s great Jacek!</div></div></div><br/>
<div><a id="1622721262.119600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622721262.119600" ><div class="time">2021-06-03 11:54</div></a><div class="msg">I think the beta version for a 4.0.0 sounds reasonable. As far as breaking changes, I think there will be quite a few :smile:</div></div></div><br/>
<div><a id="1622721288.119800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622721288.119800" ><div class="time">2021-06-03 11:54</div></a><div class="msg">&gt; Moving to Rust itself should be an internal binary change, with still same public interface, we should be able to avoid breaking changes.
This particular bit isn't possible unfortunately. The semantics of how the mock server works have changed quite substantially so the old API no longer works</div></div></div><br/>
<div><a id="1622721350.120100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622721350.120100" ><div class="time">2021-06-03 11:55</div></a><div class="msg">Since the PACT v3 specs are also encapsulating the old specs, it's not that big of a deal to rewrite these parts.</div></div></div><br/>
<div><a id="1622721377.120400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622721377.120400" ><div class="time">2021-06-03 11:56</div></a><div class="msg">1. Yes I would love this also. Primarily, I can to help drum up beta users and drive adoption. I suggest we use <a href="https://github.com/pact-foundation/pact-net/projects/1?add_cards_query=is%3Aopen">https://github.com/pact-foundation/pact-net/projects/1?add_cards_query=is%3Aopen</a>
2. We?ll probably go down a path similar to that in JS Jacek, but only because I need to give Tim some time to fully appreciate the power of the new interface and changes that migt be required. It?s doable on the provider side, but I just don?t think it is worth it for the consumer. I think a breaking API change is personally OK - at least, if we do a big breaking change, now is the time
3. yep!
4. agree
5. Cool - happy to facilitate and get beta users on (via our many comms channels)
6. Yep. we discussed perhaps some BDD/Cucumber scenaros for this
7. :thumbsup: 
8. Sounds good. I?d suggest `4.0.0-alpha+buildversion` because it will be easy to see as a human with an incrementing build number (i.e. when it comes to telling people they can immediately see)</div></div></div><br/>
<div><a id="1622721418.120600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622721418.120600" ><div class="time">2021-06-03 11:56</div></a><div class="msg">We need to differentiate v2 pact specification support against the current Pact .NET interface. v2 _must_ be supported, but the previous .NET API need not</div></div></div><br/>
<div><a id="1622721453.120800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622721453.120800" ><div class="time">2021-06-03 11:57</div></a><div class="msg">The version would need to be `4.0.0-alpha.1` instead of `+` because `+` isn't taken into account by SemVer (i.e. 4.0.0-alpha+1 and 4.0.0-alpha+2 are considered equivalent)</div></div></div><br/>
<div><a id="1622721462.121000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622721462.121000" ><div class="time">2021-06-03 11:57</div></a><div class="msg">yes and getting alpha version could mean more branch and PR which would be easier to add small features</div></div></div><br/>
<div><a id="1622721501.121300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622721501.121300" ><div class="time">2021-06-03 11:58</div></a><div class="msg">ah yes sorry. that?s exactlyp what we do  with Pact JS</div></div></div><br/>
<div><a id="1622721512.121500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622721512.121500" ><div class="time">2021-06-03 11:58</div></a><div class="msg">I originall had the gitsha above, then decided against but didn?t correct</div></div></div><br/>
<div><a id="1622721518.121700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622721518.121700" ><div class="time">2021-06-03 11:58</div></a><div class="msg">glad we?re on the same page :laughing:</div></div></div><br/>
<div><a id="1622721557.122000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622721557.122000" ><div class="time">2021-06-03 11:59</div></a><div class="msg">I?d also highly suggest we follow conventional commits so we can automatically generate release notes</div></div></div><br/>
<div><a id="1622721566.122200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622721566.122200" ><div class="time">2021-06-03 11:59</div></a><div class="msg">we do it on practically all other Pact repos, and it?s lovely</div></div></div><br/>
<div><a id="1622721771.122400"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1622721771.122400" ><div class="time">2021-06-03 12:02</div></a><div class="msg">@pact544 do <a href="http://nuget.org">http://nuget.org</a> still have a problem with proper sorting versions like `4.0.0-alpha.9` and `4.0.0-alpha.12`  Internally we are using JFrog artifact On*-*Prem, which has this issue. In this case we may want to consider adding a padding zeros like `4.0.0-alpha.001`</div></div></div><br/>
<div><a id="1622721840.122800"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1622721840.122800" ><div class="time">2021-06-03 12:04</div></a><div class="msg">Sorry for JFrog link, That was not intended</div></div></div><br/>
<div><a id="1622721873.123000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622721873.123000" ><div class="time">2021-06-03 12:04</div></a><div class="msg">Nah nuget supports proper semver2</div></div></div><br/>
<div><a id="1622722699.123200"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1622722699.123200" ><div class="time">2021-06-03 12:18</div></a><div class="msg">@pact544 you are awesome :slightly_smiling_face:</div></div></div><br/>
<div><a id="1622723123.123500"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1622723123.123500" ><div class="time">2021-06-03 12:25</div></a><div class="msg">@matt.fellows
&gt; We?ll probably go down a path similar to that in JS Jacek, but only because I need to give Tim some time to fully appreciate the power of the new interface and changes that migt be required. It?s doable on the provider side, but I just don?t think it is worth it for the consumer. I think a breaking API change is personally OK - at least, if we do a big breaking change, now is the time
My motivation was giving users, which do not need V3  better Pact implementation, without a need for adjusting to breaking changes, which maybe costly  for them

@pact544
&gt; This particular bit isn't possible unfortunately. The semantics of how the mock server works have changed quite substantially so the old API no longer works
By old API you mean old pact-net public API? Could you provide some examples, where you think it will be hard to keep current public API? Do not take me wrong, I do not want to be stubborn on this, I just think that even if we cannot avoid breaking change we should think twice before we adding yet another one. This will allow us to simplify migration steps, gain more new version of pact-net clients, especially if they do not have motivation to use V3.</div></div></div><br/>
<div><a id="1622723713.123800"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622723713.123800" ><div class="time">2021-06-03 12:35</div></a><div class="msg">@matt.fellows the injected values for provider states is a 3.5 specs feature right?</div></div></div><br/>
<div><a id="1622723749.124000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622723749.124000" ><div class="time">2021-06-03 12:35</div></a><div class="msg">It's kinda a not in a spec feature, i think</div></div></div><br/>
<div><a id="1622723754.124200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622723754.124200" ><div class="time">2021-06-03 12:35</div></a><div class="msg">But simple to do</div></div></div><br/>
<div><a id="1622723757.124400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622723757.124400" ><div class="time">2021-06-03 12:35</div></a><div class="msg">Okay I see</div></div></div><br/>
<div><a id="1622723767.124600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622723767.124600" ><div class="time">2021-06-03 12:36</div></a><div class="msg">You just need to return a hash from a provider state endpoint</div></div></div><br/>
<div><a id="1622729998.124900"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622729998.124900" ><div class="time">2021-06-03 14:19</div></a><div class="msg">@jacek.helper Yeah no probs - so in the old API you start the server in a pre-test setup fixture, then you setup each interaction (which configures the server in real time), verify the interaction (which might fail) and then you clear the interactions at the end of the consumer test so that the next one starts with a "clean" server. i.e. you start the server once and call setup/verify/clear on it many times.

The new Rust backend is the opposite way round. First you setup the interaction(s) that you want to perform, then you start the server, verify and shut it down again in each test. So that means in a test suite with 20 interactions you will start and stop a mock server 20 times, whereas previously you'd start it only 1 time and just interact with the same server 20 times.

If you try to interact with the Rust server after you've started it, the changes that you make have no effect. It takes a snapshot of the interaction state at the point you create the server and that's it, it's fixed for the lifetime of that server. That means the old API no longer makes any sense - you can't change the server after you've started it and there's no notion of "clear".</div></div></div><br/>
<div><a id="1622730217.125100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622730217.125100" ><div class="time">2021-06-03 14:23</div></a><div class="msg">In rough psuedo code it's:

```Old Ruby way:

[TestFixtureSetUp]
public void Setup()
{
    server.Start(); // once at the start before any interactions happen
}

[TestFixtureTearDown]
public void TearDown()
{
    server.Stop(); // once at the end when every interaction finished
}

[Test]
public void Interaction1()
{
    server.UponReceiving(...).WillRespond(...);

    client.CallServer();

    server.Verify();
    server.Clear(); // clear the state ready for the next interaction that reuses the same server
}

[Test]
public void Interaction2()
{
    server.UponReceiving(...).WillRespond(...);

    client.CallServer();

    server.Verify();
    server.Clear();
}

New Rust way:

[Test]
public void Interaction1()
{
    rust.UponReceiving(...); // setup must be done _before_ you start the server

    using (var server = rust.StartServer()) // every interaction starts and stops its own server
    {
        client.CallServer();
    } // at the end of this using block the verify happens and the server shuts down. There is no Clear
}

[Test]
public void Interaction2()
{
    rust.UponReceiving(...);

    using (var server = rust.StartServer())
    {
        client.CallServer();
    }
}```</div></div></div><br/>
<div><a id="1622730480.125400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622730480.125400" ><div class="time">2021-06-03 14:28</div></a><div class="msg">So, yeah, in order to adopt Rust as a backend, even if you tried to make the absolute minimum changes possible, our existing users would already have to rewrite all of their tests for a large breaking change</div></div></div><br/>
<div><a id="1622730549.125600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622730549.125600" ><div class="time">2021-06-03 14:29</div></a><div class="msg">Secondly, the Rust backend accepts arguments very differently from the Ruby backend (it's much more fine-grained) so you have to make other breaking changes to the way that interactions are set up (specifying headers/query strings/etc). All in all, it's a large breaking change to move to Rust which requires users to rewrite their tests</div></div></div><br/>
<div><a id="1622730635.125800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622730635.125800" ><div class="time">2021-06-03 14:30</div></a><div class="msg">Thirdly, the way that PactNet is currently distributed is via OS-specific nuget packages which wrap the Ruby dependencies. We can't repurpose those to use Rust because otherwise older versions of PactNet could very well break. The actual NuGets themselves need to change (as in, new names) in order to prevent older pactNet versions from breaking</div></div></div><br/>
<div><a id="1622730728.126000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622730728.126000" ><div class="time">2021-06-03 14:32</div></a><div class="msg">I've pushed these changes up now. There's a script to run which grabs the Rust deps and puts them in the appropriate folders (replacing a similar script which grabbed the Ruby deps) and then it should all just work</div></div></div><br/>
<div><a id="1622730775.126200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622730775.126200" ><div class="time">2021-06-03 14:32</div></a><div class="msg">I've created a little sample project to test installing the nuget and it all restores fine and finds the FFI libraries, but there's a really weird problem with the API that I can't quite put my finger on so currently it definitely doesn't work</div></div></div><br/>
<div><a id="1622730816.126400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622730816.126400" ><div class="time">2021-06-03 14:33</div></a><div class="msg">When you try to write a consumer test it tries to call an `internal` method instead of calling the `public` version of that method, so it gives you an access exception</div></div></div><br/>
<div><a id="1622730846.126600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622730846.126600" ><div class="time">2021-06-03 14:34</div></a><div class="msg">The request sets up fine but once you call `Willrespond` it throws an exception about trying to call the internal versions</div></div></div><br/>
<div><a id="1622730857.126800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622730857.126800" ><div class="time">2021-06-03 14:34</div></a><div class="msg">I can probably just rename the internal method and it'll be fine though</div></div></div><br/>
<div><a id="1622731180.127000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622731180.127000" ><div class="time">2021-06-03 14:39</div></a><div class="msg">Thanks a lot @pact544 that's weird</div></div></div><br/>
<div><a id="1622731327.127200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622731327.127200" ><div class="time">2021-06-03 14:42</div></a><div class="msg">Nope, this is super weird. It's using the concrete implementation instead of using the interface version of the method call. I think it might only be a problem in Release mode as well :open_mouth: I've renamed the internal versions to have `Internal` at the end and now it just says it can't find it at all:

```$ dotnet run
Unhandled exception. Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 'PactNet.Native.NativeRequestBuilder' does not contain a definition for 'WillRespond'
   at CallSite.Target(Closure , CallSite , Object )
   at System.Dynamic.UpdateDelegates.UpdateAndExecute1[T0,TRet](CallSite site, T0 arg0)
   at pactnet_test.Program.Main(String[] args) in C:\temp\pactnet-test\Program.cs:line 74
   at pactnet_test.Program.&lt;Main&gt;(String[] args)```
I honestly think that's a bug in the .Net Core runtime</div></div></div><br/>
<div><a id="1622731383.127400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622731383.127400" ><div class="time">2021-06-03 14:43</div></a><div class="msg">It compiles absolutely fine but then fails at runtime :open_mouth: If it was a problem it shouldn't even compile</div></div></div><br/>
<div><a id="1622731397.127600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622731397.127600" ><div class="time">2021-06-03 14:43</div></a><div class="msg">The WillRespond though is tied to your interface, are you sure it calls the one using the correct abstraction?</div></div></div><br/>
<div><a id="1622731423.128000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622731423.128000" ><div class="time">2021-06-03 14:43</div></a><div class="msg">Like I say, it wouldn't compile if it wasn't the correct one. It only fails at runtime</div></div></div><br/>
<div><a id="1622731453.128200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622731453.128200" ><div class="time">2021-06-03 14:44</div></a><div class="msg">Not necessarily, if the call is made at runtime</div></div></div><br/>
<div><a id="1622731453.128400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622731453.128400" ><div class="time">2021-06-03 14:44</div></a><div class="msg">Look at this really weird hint in Visual Studio though</div></div></div><br/>
<div><a id="1622731461.128800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622731461.128800" ><div class="time">2021-06-03 14:44</div></a><div class="msg">It thinks its become a dynamic!</div></div></div><br/>
<div><a id="1622731486.129000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622731486.129000" ><div class="time">2021-06-03 14:44</div></a><div class="msg">where is your example at?</div></div></div><br/>
<div><a id="1622731504.129200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622731504.129200" ><div class="time">2021-06-03 14:45</div></a><div class="msg">Just in a little local console app to test the nuget restore</div></div></div><br/>
<div><a id="1622731554.129400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622731554.129400" ><div class="time">2021-06-03 14:45</div></a><div class="msg">Literally just `dotnet new console &amp;&amp; dotnet add package PactNet.Native` after I've built the nuget locally, then paste the example in from the integration tests</div></div></div><br/>
<div><a id="1622731569.129600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622731569.129600" ><div class="time">2021-06-03 14:46</div></a><div class="msg">Compiles fine, blows up at runtime</div></div></div><br/>
<div><a id="1622731583.129800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622731583.129800" ><div class="time">2021-06-03 14:46</div></a><div class="msg">That shouldn't even be possible</div></div></div><br/>
<div><a id="1622731608.130000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622731608.130000" ><div class="time">2021-06-03 14:46</div></a><div class="msg">It's strange on my end, the auto-completion doesn't even pick up the WillRespond... even with Resharper</div></div></div><br/>
<div><a id="1622731626.130200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622731626.130200" ><div class="time">2021-06-03 14:47</div></a><div class="msg">I'll have a play around with it and see what happens</div></div></div><br/>
<div><a id="1622731641.130400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622731641.130400" ><div class="time">2021-06-03 14:47</div></a><div class="msg">Probably because I've got 2 explicit interface implementations with clashing names</div></div></div><br/>
<div><a id="1622731651.130600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622731651.130600" ><div class="time">2021-06-03 14:47</div></a><div class="msg">yeah prob</div></div></div><br/>
<div><a id="1622731703.130900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622731703.130900" ><div class="time">2021-06-03 14:48</div></a><div class="msg">We should prob add to each Request builder the interface they need</div></div></div><br/>
<div><a id="1622731711.131100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622731711.131100" ><div class="time">2021-06-03 14:48</div></a><div class="msg">but that would be a chaining of the interface...</div></div></div><br/>
<div><a id="1622731729.131300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622731729.131300" ><div class="time">2021-06-03 14:48</div></a><div class="msg">Like IRequestBuilderV3 : IRequestBuilderV2</div></div></div><br/>
<div><a id="1622731750.131500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622731750.131500" ><div class="time">2021-06-03 14:49</div></a><div class="msg">Not sure it's the design you intended</div></div></div><br/>
<div><a id="1622731881.131700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622731881.131700" ><div class="time">2021-06-03 14:51</div></a><div class="msg">You can't do that otherwise as soon as a v3 builder calls a v2 method it'll get back a v2 builder instead of a v3 one</div></div></div><br/>
<div><a id="1622731988.131900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622731988.131900" ><div class="time">2021-06-03 14:53</div></a><div class="msg">the only probleme I have is with WithJsonBody...</div></div></div><br/>
<div><a id="1622732105.132100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622732105.132100" ><div class="time">2021-06-03 14:55</div></a><div class="msg">The auto-completion works when I pass a dynamic directly from the test function and not as a dynamic class variable... I don't know what's going on...</div></div></div><br/>
<div><a id="1622732238.132300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622732238.132300" ><div class="time">2021-06-03 14:57</div></a><div class="msg"><a href="https://www.filipekberg.se/2013/01/17/im-using-dynamic-and-unexpectedly-lost-intellisense/">https://www.filipekberg.se/2013/01/17/im-using-dynamic-and-unexpectedly-lost-intellisense/</a>
interesting thread</div></div></div><br/>
<div><a id="1622732303.132600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622732303.132600" ><div class="time">2021-06-03 14:58</div></a><div class="msg">What I got from this is that the line where your dynamic is defined matters, so in your case, maybe add it inside your test instead of an instance variable.</div></div></div><br/>
<div><a id="1622732777.132900"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622732777.132900" ><div class="time">2021-06-03 15:06</div></a><div class="msg">Ah gotcha :thumbsup:  So yeah sounds like a .Net runtime bug</div></div></div><br/>
<div><a id="1622732788.133100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622732788.133100" ><div class="time">2021-06-03 15:06</div></a><div class="msg">Like it doesn't become "undynamic" again</div></div></div><br/>
<div><a id="1622732804.133300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622732804.133300" ><div class="time">2021-06-03 15:06</div></a><div class="msg">yep, well that might be a limit</div></div></div><br/>
<div><a id="1622732841.133500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622732841.133500" ><div class="time">2021-06-03 15:07</div></a><div class="msg">the dynamic's intention is to be used dynamically and not "stored" per say. That's what I got from this, but I didn't know it would have consequences like you had at the runtime!</div></div></div><br/>
<div><a id="1622732910.133700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622732910.133700" ><div class="time">2021-06-03 15:08</div></a><div class="msg">Ha, yep that worked fine!!

Literally just moved the variable to be inline instead of in a static field and it now works fine</div></div></div><br/>
<div><a id="1622732933.134200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622732933.134200" ><div class="time">2021-06-03 15:08</div></a><div class="msg">Great</div></div></div><br/>
<div><a id="1622732937.134400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622732937.134400" ><div class="time">2021-06-03 15:08</div></a><div class="msg">Phew!!!</div></div></div><br/>
<div><a id="1622732948.134600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622732948.134600" ><div class="time">2021-06-03 15:09</div></a><div class="msg">Thought I'd seriously fucked up the API somehow then</div></div></div><br/>
<div><a id="1622732962.134800"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622732962.134800" ><div class="time">2021-06-03 15:09</div></a><div class="msg">no, thanks god</div></div></div><br/>
<div><a id="1622733000.135000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622733000.135000" ><div class="time">2021-06-03 15:10</div></a><div class="msg">Well in that case, enjoy the new nuget support :smile:</div></div></div><br/>
<div><a id="1622733015.135200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622733015.135200" ><div class="time">2021-06-03 15:10</div></a><div class="msg">haha thanks</div></div></div><br/>
<div><a id="1622733331.135400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622733331.135400" ><div class="time">2021-06-03 15:15</div></a><div class="msg">I tested the script on my end and it works fine!</div></div></div><br/>
<div><a id="1622733381.135600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622733381.135600" ><div class="time">2021-06-03 15:16</div></a><div class="msg">Niiiice</div></div></div><br/>
<div><a id="1622733397.135800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622733397.135800" ><div class="time">2021-06-03 15:16</div></a><div class="msg">We need to get the CI going properly now all the tests work</div></div></div><br/>
<div><a id="1622733409.136000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622733409.136000" ><div class="time">2021-06-03 15:16</div></a><div class="msg">Compilation is fine, running all tests, there are a few mishap... maybe the dynamic</div></div></div><br/>
<div><a id="1622733415.136200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622733415.136200" ><div class="time">2021-06-03 15:16</div></a><div class="msg">Especially with the cross-platform GitHub Workflows thing because I can't test on OSX atm</div></div></div><br/>
<div><a id="1622733477.136400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622733477.136400" ><div class="time">2021-06-03 15:17</div></a><div class="msg">Ahhhh, you know why that is? `mock_server_logs` is on `master` for the FFI library but not in the latest released version so that binding is failing now we've switched over</div></div></div><br/>
<div><a id="1622733493.136600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622733493.136600" ><div class="time">2021-06-03 15:18</div></a><div class="msg">impossible to find the mock_server_logs</div></div></div><br/>
<div><a id="1622733512.136800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622733512.136800" ><div class="time">2021-06-03 15:18</div></a><div class="msg">Yeah when I was compiling `master` locally that worked fine, but the latest release doesn't have it</div></div></div><br/>
<div><a id="1622733528.137000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622733528.137000" ><div class="time">2021-06-03 15:18</div></a><div class="msg">it fails the Api test for the same reason</div></div></div><br/>
<div><a id="1622733531.137200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622733531.137200" ><div class="time">2021-06-03 15:18</div></a><div class="msg">Needs a new FFI release</div></div></div><br/>
<div><a id="1622733534.137400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622733534.137400" ><div class="time">2021-06-03 15:18</div></a><div class="msg">well, it looks like just one thing</div></div></div><br/>
<div><a id="1622733589.137700"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622733589.137700" ><div class="time">2021-06-03 15:19</div></a><div class="msg">Maybe Matt or Ron can do it</div></div></div><br/>
<div><a id="1622733869.138000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622733869.138000" ><div class="time">2021-06-03 15:24</div></a><div class="msg">Nice summary. I was thinking we could wrap the using into a more userfriendly method like Verify(() =&gt; client.myAction... )</div></div></div><br/>
<div><a id="1622733992.138200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622733992.138200" ><div class="time">2021-06-03 15:26</div></a><div class="msg">Well, seeing you need the MockServerUri, it will have to be into a specific fixture class to work.</div></div></div><br/>
<div><a id="1622734028.138400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622734028.138400" ><div class="time">2021-06-03 15:27</div></a><div class="msg">Still, it's much easier to write the interactions like that</div></div></div><br/>
<div><a id="1622734956.138600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622734956.138600" ><div class="time">2021-06-03 15:42</div></a><div class="msg">Yeah you can't know the mock server URL ahead of time because you generally use a dynamic port so you need to wait until it's started before you can construct your client</div></div></div><br/>
<div><a id="1622735012.138800"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622735012.138800" ><div class="time">2021-06-03 15:43</div></a><div class="msg">yes, I was just thinking on the end user, using it inside a fixture class which takes care of the instanciation of the server and which port it uses will make the test even easier to write.</div></div></div><br/>
<div><a id="1622735033.139000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622735033.139000" ><div class="time">2021-06-03 15:43</div></a><div class="msg">I don't know if the lib pact-net is the place to do it though :slightly_smiling_face: prob more on the consumer side</div></div></div><br/>
<div><a id="1622735142.139200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622735142.139200" ><div class="time">2021-06-03 15:45</div></a><div class="msg">Class fixtures run once before any test runs though (which is impossible because then you can't add interactions to it): <a href="https://xunit.net/docs/shared-context">https://xunit.net/docs/shared-context</a></div></div></div><br/>
<div><a id="1622735154.139500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622735154.139500" ><div class="time">2021-06-03 15:45</div></a><div class="msg">You need to use the ctor/dispose approach</div></div></div><br/>
<div><a id="1622735173.139700"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622735173.139700" ><div class="time">2021-06-03 15:46</div></a><div class="msg">yep, as a custom one you can</div></div></div><br/>
<div><a id="1622735204.139900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622735204.139900" ><div class="time">2021-06-03 15:46</div></a><div class="msg">but again, that's more of a consumer-side optimization</div></div></div><br/>
<div><a id="1622735213.140100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622735213.140100" ><div class="time">2021-06-03 15:46</div></a><div class="msg">You need to add the interaction before you start the server though</div></div></div><br/>
<div><a id="1622735240.140300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622735240.140300" ><div class="time">2021-06-03 15:47</div></a><div class="msg">You literally have to start the server inside each test so that you can set up your interactions before starting it</div></div></div><br/>
<div><a id="1622735270.140500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622735270.140500" ><div class="time">2021-06-03 15:47</div></a><div class="msg">I still don't think that's the best approach, but that's the way the Rust core is so this is the API you kinda naturally end up with in PactNet</div></div></div><br/>
<div><a id="1622735284.140700"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622735284.140700" ><div class="time">2021-06-03 15:48</div></a><div class="msg">yeah, we will see once we have the version up</div></div></div><br/>
<div><a id="1622735306.140900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622735306.140900" ><div class="time">2021-06-03 15:48</div></a><div class="msg">I'm off, have a nice day and thank you for the effort today!</div></div></div><br/>
<div><a id="1622735356.141100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622735356.141100" ><div class="time">2021-06-03 15:49</div></a><div class="msg">No probs dude, have a good evening</div></div></div><br/>
<div><a id="1622735848.142100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622735848.142100" ><div class="time">2021-06-03 15:57</div></a><div class="msg">I've accepted the invite into the pact-foundation but I'm not sure that actually gives me write access to anything :slightly_smiling_face: How do we want to proceed with getting my changes merged over into a proper branch in the pact-net repo?</div></div></div><br/>
<div><a id="1622736459.142300"><img src="https://secure.gravatar.com/avatar/37eea920bc08d7ebd8c0fe11fd166d06.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png" /></a><div class="message"><div class="username">jr.jenks</div><a style="text-decoration: none" href="#1622736459.142300" ><div class="time">2021-06-03 16:07</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1622737341.142400"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1622737341.142400" ><div class="time">2021-06-03 16:22</div></a><div class="msg">@pact544 regarding to your pseudo code. That is not how I see this

I think I understand your intention, but I still think that it should be possible. In pubic interface there is nothing about starting or stoping so I am  not sure if I will expose something like `StartServer` or something similar and make this public concept, it can be just technical details.
Below I try to show how I am using currently pact-net:

```[OneTimeSetUp]
_pactConfig =newPactConfig
{
SpecificationVersion = PactConfiguration.PactSpecificationVersion,
PactDir = Path.Combine(testBinDirectory, PactConfiguration.PactsDir),
LogDir = Path.Combine(testBinDirectory, PactConfiguration.PactLogsDir),
Outputters =newList&lt;IOutput&gt; {newNUnitPactOutput(Console.Out) }
};

[SetUp]
_pactMockServiceSetUp.MockService.ClearInteractions();

   [OneTimeTearDown]
_pactMockServiceSetUp.PactBuilder.Build();
_publisher().Publish();

[Test]
MockService
.Given($"Foo")
.UponReceiving($"Bar")
.With(_tfp.CreateValidRequest())
.WillRespondWith(_tfp.CreateSuccessfulResponse(links));

_myCommunicator.CallSomeAction(
.Should()
.BeEquivalentTo(newInvoice("<a href="http://dummy">http://dummy</a>"));

_pactMockServiceSetUp.MockService.VerifyInteractions();```
In my example if VerifyInteractions will have this whole stuff with starting and stopping server will works for me.

&gt; Thirdly, the way that PactNet is currently distributed is via OS-specific nuget packages which wrap the Ruby dependencies. We can't repurpose those to use Rust because otherwise older versions of PactNet could very well break. The actual NuGets themselves need to change (as in, new names) in order to prevent older pactNet versions from breaking
Just to make this clear you talk about `PactNet.Windows`  package? If so you have right, which is not perfect in my opinion. I am not sure how it is done in details now. However if I will do that in a past or plan some future changes like this one. I will try to separate public pact-net interface concept form engine realization (ruby, rust) details.  Just imagine how cool it will be when we will not have to change public interface when we will move to yet another engine realization under the hood. Or imagine if same pact-net client code can once works with rust and once with ruby.  To do that we can change a bit how stuff are set up and allow clients to choice core realization by DI.</div></div></div><br/>
<div><a id="1622739221.142600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622739221.142600" ><div class="time">2021-06-03 16:53</div></a><div class="msg">Two problem with your example there (if it was using the rust backend):

? at the point you make your client call the server is not started, so it will fail
? you don't know the port of the mock server until after you've started it, so if the verify does the start then how can your client know the port to call?
Your client can only be constructed after the mock server has started so that you know its URL. That's not the case with the Ruby version. In Ruby the server starts first in your one time setup so you know the URL straight away, and it's always running so your client can always call it.

In terms of not changing the public API when we swap provider backend, I think the changes I've made make that really easy now :+1: I've created a PoC remote backend as well, but it's not implemented yet. We could easily create a Ruby backend as well.</div></div></div><br/>
<div><a id="1622746204.143000"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1622746204.143000" ><div class="time">2021-06-03 18:50</div></a><div class="msg">&gt; at the point you make your client call the server is not started, so it will fail
You have right. However I am still not convince to expose details behind rust server implementation. I think it should be a way to hide this.

&gt; you don't know the port of the mock server until after you've started it, so if the verify does the start then how can your client know the port to call?
You want to say that i cannot set up mock uri in advance? Why  in Rust implementation I cannot specify a port? It doesn't sounds right to me and it is probably related to Rust. By the way starting some external service and stopping it in each test case separately doesn't look like super thing from resource/performance point of view. Is there any way it can be started once, or at least per test suit?</div></div></div><br/>
<div><a id="1622746537.143200"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1622746537.143200" ><div class="time">2021-06-03 18:55</div></a><div class="msg">Sorry if this will sounds badly that is no my intention, I just would like to know why we wan to move to Rust in the first place. Does PactBroker or PactBroker client plan to do the same or they will stay with ruby engine version?</div></div></div><br/>
<div><a id="1622746957.143500"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1622746957.143500" ><div class="time">2021-06-03 19:02</div></a><div class="msg">The last thing from me today. What about the last feature, which we have added few weeks ago, <a href="https://github.com/pact-foundation/pact-net/pull/277">https://github.com/pact-foundation/pact-net/pull/277</a> ? Did you think how these two things can co-exist, since it is hard to imagine that somebody will start and stop remote mock server in each test case.</div></div></div><br/>
<div><a id="1622756504.144000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622756504.144000" ><div class="time">2021-06-03 21:41</div></a><div class="msg">Yeah, so to answer those I think we can still support the remote server no problems. It's probably best checking the new API on my branch to see how it would be possible, but the internals of how a particular server works are entirely contained within the server's own nuget, so you don't tell the server to start or stop.

In terms of starting the mock server only once and sharing it, it's not possible. I implemented it that way at first and spent two days scratching my head before I worked out it's impossible. I looked through the Rust source code and found it takes a snapshot of the state at the point it starts so you can't start it before you've set up your interactions.

@uglyog and @matt.fellows advised that the approach taken in all the other language integrations is to start and stop the server for each test, so I've mirrored that on the new PactNet API. That's the only way the Rust version can work at the moment.</div></div></div><br/>
<div><a id="1622762868.144200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622762868.144200" ><div class="time">2021-06-03 23:27</div></a><div class="msg">&gt;  Secondly, the Rust backend accepts arguments very differently from the Ruby backend (it?s much more fine-grained) so you have to make other breaking changes to the way that interactions are set up (specifying headers/query strings/etc). All in all, it?s a large breaking change to move to Rust which requires users to rewrite their tests
It?s probably the way .NET works, but in Pact Go, I was able to swap out Ruby with Rust without any breaking changes. I chose to make a few breaking changes simply because I think the interface is made clearer.

The ?verify? step always accepted a function that was given a context (i.e. the mock server details). So at the least, that would have needed to change for .NET</div></div></div><br/>
<div><a id="1622762887.144400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622762887.144400" ><div class="time">2021-06-03 23:28</div></a><div class="msg">&gt;  Yeah, so to answer those I think we can still support the remote server no problems. It?s probably best checking the new API on my branch to see how it would be possible, but the internals of how a particular server works are entirely contained within the server?s own nuget, so you don?t tell the server to start or stop.
cool!</div></div></div><br/>
<div><a id="1622769617.144600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622769617.144600" ><div class="time">2021-06-04 01:20</div></a><div class="msg">&gt;  In terms of starting the mock server only once and sharing it, it?s not possible. I implemented it that way at first and spent two days scratching my head before I worked out it?s impossible. I looked through the Rust source code and found it takes a snapshot of the state at the point it starts so you can?t start it before you?ve set up your interactions.
If that becomes a performance issue that we can?t get to the  bottom of, i?m sure we?ll find a way to support  the stateful server (or something similar)</div></div></div><br/>
<div><a id="1622769644.145000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622769644.145000" ><div class="time">2021-06-04 01:20</div></a><div class="msg">I?ll add you to the repo, I think the invite has to be accepted first</div></div></div><br/>
<div><a id="1622769824.145200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622769824.145200" ><div class="time">2021-06-04 01:23</div></a><div class="msg">done</div></div></div><br/>
<div><a id="1622788250.145400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622788250.145400" ><div class="time">2021-06-04 06:30</div></a><div class="msg">I've thought about that performance issue that I'd noticed and I'm now suspicious it's not the Rust core that's the problem. I'm not really seeing a performance problem in my integration tests which just go direct to the interop code, but I am seeing it when I run the sample consumer tests. However, the thing that's definitely made me think it's more the .Net side is that the consumer tests example also compiles really slowly (seemingly for no reason, it barely does anything)</div></div></div><br/>
<div><a id="1622788739.145900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622788739.145900" ><div class="time">2021-06-04 06:38</div></a><div class="msg">ok that?s good to know</div></div></div><br/>
<div><a id="1622788936.146100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622788936.146100" ><div class="time">2021-06-04 06:42</div></a><div class="msg">I just wrapped the node test in a loop that runs the full cycle 500 times, and it runs in sub 3s

&gt; ?  pact-js git:(spike/ffi-provider) ? time node src/native/test.js
&gt; node src/native/test.js  2.11s user 0.29s system 98% cpu 2.423 total
&gt; ?  pact-js git:(spike/ffi-provider) ?</div></div></div><br/>
<div><a id="1622789450.146500"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1622789450.146500" ><div class="time">2021-06-04 06:50</div></a><div class="msg">@pact544 thanks for details. Could you share your branch name, maybe when I feel better I will take a look and share some constructive thoughts.</div></div></div><br/>
<div><a id="1622791145.147800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622791145.147800" ><div class="time">2021-06-04 07:19</div></a><div class="msg">I've created a draft PR against the proper pact-net repo with my work so far, and written up some of the rationale of the new design within it:
<a href="https://github.com/pact-foundation/pact-net/pull/297">https://github.com/pact-foundation/pact-net/pull/297</a>

Please review, and then we can merge it (to the new `feature/4.0.0` branch) to use a base going forwards</div></div></div><br/>
<div><a id="1622791189.148000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622791189.148000" ><div class="time">2021-06-04 07:19</div></a><div class="msg">@jacek.helper - Just raised the whole thing as a draft PR here: <a href="https://github.com/pact-foundation/pact-net/pull/297">https://github.com/pact-foundation/pact-net/pull/297</a></div></div></div><br/>
<div><a id="1622791429.148300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622791429.148300" ><div class="time">2021-06-04 07:23</div></a><div class="msg">Definitely worth changing the setting to hide whitespace changes :open_mouth:</div></div></div><br/>
<div><a id="1622791713.149800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622791713.149800" ><div class="time">2021-06-04 07:28</div></a><div class="msg">I?m wondering that because the change is so big, the best first step might be to get it merged into a branch so everyone can contribute from there. otherwise I fear the conversation will quickly convert to bikeshedding</div></div></div><br/>
<div><a id="1622791757.150500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622791757.150500" ><div class="time">2021-06-04 07:29</div></a><div class="msg">But, what a way to end a week (well, for those of us in the future :stuck_out_tongue: )</div></div></div><br/>
<div><a id="1622792275.150600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622792275.150600" ><div class="time">2021-06-04 07:37</div></a><div class="msg">Ha, thank you :smile:</div></div></div><br/>
<div><a id="1622792302.150800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622792302.150800" ><div class="time">2021-06-04 07:38</div></a><div class="msg">Yeah I thought the same. It could get absolutely massive and end up stalling otherwise. Didn't want to just yeet it in the main repo though :smile:</div></div></div><br/>
<div><a id="1622792367.151100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622792367.151100" ><div class="time">2021-06-04 07:39</div></a><div class="msg">Probably just best to review for at least any "omg, def don't do that" changes :smile:</div></div></div><br/>
<div><a id="1622795362.151300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622795362.151300" ><div class="time">2021-06-04 08:29</div></a><div class="msg">Yes, that's what we agreed on. The message part and the remote mock server is going to be another big chunk of code :slightly_smiling_face:</div></div></div><br/>
<div><a id="1622795395.151500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622795395.151500" ><div class="time">2021-06-04 08:29</div></a><div class="msg">OK, shall we just merge it then?</div></div></div><br/>
<div><a id="1622795417.151700"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622795417.151700" ><div class="time">2021-06-04 08:30</div></a><div class="msg">Let's do the code review then</div></div></div><br/>
<div><a id="1622795430.151900"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622795430.151900" ><div class="time">2021-06-04 08:30</div></a><div class="msg">It's on a feature branch anyway, not direct onto `master`</div></div></div><br/>
<div><a id="1622795433.152100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622795433.152100" ><div class="time">2021-06-04 08:30</div></a><div class="msg">I hope @pact544you had time to have some breaks at the pace you were going XD</div></div></div><br/>
<div><a id="1622795457.152400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622795457.152400" ><div class="time">2021-06-04 08:30</div></a><div class="msg">So yeah cool, if you can give it the once over for any obvious big problems and we can merge it as a base to work on going forwards</div></div></div><br/>
<div><a id="1622795698.152600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622795698.152600" ><div class="time">2021-06-04 08:34</div></a><div class="msg">yep, the few things I would do it before the merge
1. Split the interfaces into separate files. Maybe do some folder reorganization, like with functional names, Request / Builder / etc.
2. Small code cleanup feature like organizing the usings
3. Use the simpler using declaration (in the tests) introduced in the latest c# version
4. I don't know how you feel about naming convention for the class variable with or without '_' which will allow you not to explicitly have 'this' everywhere.
Mostly what I'd call cosmetic changes :wink:
For the rest, it's still an alpha version so we can reorganize things later on.</div></div></div><br/>
<div><a id="1622796125.152900"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622796125.152900" ><div class="time">2021-06-04 08:42</div></a><div class="msg">&gt; Split the interfaces into separate files. Maybe do some folder reorganization, like with functional names, Request / Builder / etc.
I didn't do this purely because it would make all the imports annoying for the end user. They'd have to import like 5 namespaces just to run a single consumer test</div></div></div><br/>
<div><a id="1622796189.153200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622796189.153200" ><div class="time">2021-06-04 08:43</div></a><div class="msg">&gt; Small code cleanup feature like organizing the usings
Do you have an examples of that one? I have an on-save trigger to sort/remove usings so they should all be correct just by default :smile:</div></div></div><br/>
<div><a id="1622796265.153400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622796265.153400" ><div class="time">2021-06-04 08:44</div></a><div class="msg">I see. I mean, it's just on Visual Studio, you right-click on your solution and do a code cleanup, just to avoid anything super obvious ^^ let the IDE do the work.</div></div></div><br/>
<div><a id="1622796320.153600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622796320.153600" ><div class="time">2021-06-04 08:45</div></a><div class="msg">Or maybe it's just my resharper complaining hehe. It can be annoying lol</div></div></div><br/>
<div><a id="1622796475.153800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622796475.153800" ><div class="time">2021-06-04 08:47</div></a><div class="msg">Just done the cleanup and pushed. It only really trimmed a bit of whitespace here and there though :smile:</div></div></div><br/>
<div><a id="1622796523.154100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622796523.154100" ><div class="time">2021-06-04 08:48</div></a><div class="msg">Sounds like a major breaking change ^^</div></div></div><br/>
<div><a id="1622796589.154300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622796589.154300" ><div class="time">2021-06-04 08:49</div></a><div class="msg">Not another one :joy:</div></div></div><br/>
<div><a id="1622796645.154500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622796645.154500" ><div class="time">2021-06-04 08:50</div></a><div class="msg">I needed to get it done this week. The permission to work on it basically full time was only for 2 weeks from my boss and that ends today :open_mouth: Then I'm on vacation Mon-Fri next week, but I'll check in here occassionally</div></div></div><br/>
<div><a id="1622796684.154700"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622796684.154700" ><div class="time">2021-06-04 08:51</div></a><div class="msg">ah ok! Sounds good.</div></div></div><br/>
<div><a id="1622796702.154900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622796702.154900" ><div class="time">2021-06-04 08:51</div></a><div class="msg">In this case, let's have it merge asap and we could go from the feature branch</div></div></div><br/>
<div><a id="1622797063.155100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622797063.155100" ><div class="time">2021-06-04 08:57</div></a><div class="msg">Cool, I'll merge now if the comments are more organisation/cosmetic that we can always sort easily later</div></div></div><br/>
<div><a id="1622797087.155300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622797087.155300" ><div class="time">2021-06-04 08:58</div></a><div class="msg">absolutely</div></div></div><br/>
<div><a id="1622797097.155500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622797097.155500" ><div class="time">2021-06-04 08:58</div></a><div class="msg">Would you be able to put a quick comments on the PR just so it doesn't look like I'm merging without any review? :smile:</div></div></div><br/>
<div><a id="1622797109.155700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622797109.155700" ><div class="time">2021-06-04 08:58</div></a><div class="msg">Even just an "I approve" :smile:</div></div></div><br/>
<div><a id="1622797127.155900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622797127.155900" ><div class="time">2021-06-04 08:58</div></a><div class="msg">can you link the PR plz? No Problem :)</div></div></div><br/>
<div><a id="1622797325.156200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622797325.156200" ><div class="time">2021-06-04 09:02</div></a><div class="msg">all good</div></div></div><br/>
<div><a id="1622797338.156400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622797338.156400" ><div class="time">2021-06-04 09:02</div></a><div class="msg">I put the remaining comments so we don't forget them :wink:</div></div></div><br/>
<div><a id="1622797390.156600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622797390.156600" ><div class="time">2021-06-04 09:03</div></a><div class="msg">I'll present your work to my team to see if they have comments also. We will go from the 4.0.0 feature branch then. Very nice job!</div></div></div><br/>
<div><a id="1622797459.156800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622797459.156800" ><div class="time">2021-06-04 09:04</div></a><div class="msg">Done :thumbsup:</div></div></div><br/>
<div><a id="1622797473.157000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622797473.157000" ><div class="time">2021-06-04 09:04</div></a><div class="msg">Now I'll fix the CI</div></div></div><br/>
<div><a id="1622797592.157300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622797592.157300" ><div class="time">2021-06-04 09:06</div></a><div class="msg">Strange CI problem. looks like a ps script is not there</div></div></div><br/>
<div><a id="1622797714.157500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622797714.157500" ><div class="time">2021-06-04 09:08</div></a><div class="msg">Yeah it'll be looking for the script to grab the Ruby libs and stuff</div></div></div><br/>
<div><a id="1622797740.157700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622797740.157700" ><div class="time">2021-06-04 09:09</div></a><div class="msg">I'll have a look at moving it to GitHub Actions so we get better decoration, and then we can also run the CI on OSX</div></div></div><br/>
<div><a id="1622797761.157900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622797761.157900" ><div class="time">2021-06-04 09:09</div></a><div class="msg">ah ok, indeed</div></div></div><br/>
<div><a id="1622797949.158100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622797949.158100" ><div class="time">2021-06-04 09:12</div></a><div class="msg">We will need to also separate the Interop class into its own file into prob a MockServer folder for future maintenance. I prefer functional folder organization rather than purely technical.</div></div></div><br/>
<div><a id="1622798016.158300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622798016.158300" ><div class="time">2021-06-04 09:13</div></a><div class="msg">That one was deliberately a private inner class so that the outer class could deal with the weird concerns of interop (like wrangling `IntPtr` objects to and from strings)</div></div></div><br/>
<div><a id="1622798095.158500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622798095.158500" ><div class="time">2021-06-04 09:14</div></a><div class="msg">I see, accessibility over maintenance. I can understand why you saw it that way</div></div></div><br/>
<div><a id="1622803591.159800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622803591.159800" ><div class="time">2021-06-04 10:46</div></a><div class="msg">Bah, I've got the cross-platform CI going on Windows/Mac/Linux but unfortunately the provider sample is .Net Framework only so it won't build on Linux/Mac. That needs converting to .Net Core really because it demonstrates using it with legacy <a href="http://ASP.Net">http://ASP.Net</a> instead of modern <a href="http://ASP.Net">http://ASP.Net</a> Core. I think a Core example would be far more useful</div></div></div><br/>
<div><a id="1622813031.161400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622813031.161400" ><div class="time">2021-06-04 13:23</div></a><div class="msg">Raised a draft PR for converting the sample from ASP .Net Legacy and .Net Framework (Windows only) to ASP .Net Core and .Net Core 5 (cross-platform).

At the moment it's failing but because there's still no way to get logs out of the verifier FFI I'm not really sure why...? I imagine it's something do with auth or something. I can curl the API via `curl` and it looks OK so dunno what's wrong.

<a href="https://github.com/pact-foundation/pact-net/pull/298">https://github.com/pact-foundation/pact-net/pull/298</a></div></div></div><br/>
<div><a id="1622816394.165300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1622816394.165300" ><div class="time">2021-06-04 14:19</div></a><div class="msg">Hey everyone, so I started in the message integration but I am a bit stuck on how the different method of the FFI should be called.
We have a new_message_pact and a new_message method in the FFI on the pact mock server lib.
I'm assuming the first to be called to be the new_message_pact but then when I want to specify the version with the with_specification method, it expects a PactHandle not a MessagePactHandle.
@uglyog @matt.fellows

Some questions:
1. do we need to call the with_specification method in case of a message creation? (prob not)
2. Is this workflow correct
    a. Call the new_message_pact method to get the handle of the pact message
    b. Call the new_message method with the previously created pact message handle
    c. Call any of the method that takes a message handle in parameters (such as message_expects_to_receive or message_given)
    d. Finally call the write_message_pact_file with the pact message handle (not the message handle) to create the final pact file
Thank you!</div></div></div><br/>
<div><a id="1622819271.165700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622819271.165700" ><div class="time">2021-06-04 15:07</div></a><div class="msg">Yep that workflow sounds right to me. It's the same as the request/response message flow except that has PactHandle and InteractionHandle instead of MessagePactHandle and MessageHandle</div></div></div><br/>
<div><a id="1622820432.166400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622820432.166400" ><div class="time">2021-06-04 15:27</div></a><div class="msg">PR to get CI working with cross-platform build and test for Windows, Linux and Mac:
<a href="https://github.com/pact-foundation/pact-net/pull/299">https://github.com/pact-foundation/pact-net/pull/299</a></div></div></div><br/>
<div><a id="1622839396.169100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622839396.169100" ><div class="time">2021-06-04 20:43</div></a><div class="msg">The performance problems I've seen appear to only be on Windows, and potentially even only on my work laptop. It has some crazy security software on it so I guarantee it's that. The consumer tests take ~3s each on my work laptop, but on my personal laptop running Ubuntu 20.04 they run in &lt;200ms total :open_mouth: Lightning fast. I think we can conclude that there's no performance problems stopping and start the mock server for each test. On average we're talking ~20-30ms per test on Linux</div></div></div><br/>
<div><a id="1622873875.169600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622873875.169600" ><div class="time">2021-06-05 06:17</div></a><div class="msg"><a href="https://github.com/pact-foundation/pact-go/blob/2.x.x/v3/internal/native/mockserver/message_server_test.go#L15-L45">https://github.com/pact-foundation/pact-go/blob/2.x.x/v3/internal/native/mockserver/message_server_test.go#L15-L45</a></div></div></div><br/>
<div><a id="1622873957.169900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622873957.169900" ><div class="time">2021-06-05 06:19</div></a><div class="msg">but yes, what you said Yann</div></div></div><br/>
<div><a id="1622874072.170100"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1622874072.170100" ><div class="time">2021-06-05 06:21</div></a><div class="msg">`with_specification` is only needed if you want to change the default, which is V3</div></div></div><br/>
<div><a id="1622879938.171500"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1622879938.171500" ><div class="time">2021-06-05 07:58</div></a><div class="msg">hi everyone.. sorry I have been out of this for a bit and have some catching up to do, have we got a common code repo/branch.</div></div></div><br/>
<div><a id="1622880241.171600"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1622880241.171600" ><div class="time">2021-06-05 08:04</div></a><div class="msg">is anyone opposed to me approving/releasing Adams Replace AppVeyor CI?</div></div></div><br/>
<div><a id="1622880395.172200"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1622880395.172200" ><div class="time">2021-06-05 08:06</div></a><div class="msg">:point_up: belay that = we appear to be on Feature/4.0.0</div></div></div><br/>
<div><a id="1622885862.172300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622885862.172300" ><div class="time">2021-06-05 09:37</div></a><div class="msg">I'm happy as long as you're happy :+1:

We probably need to decide how we're doing contributions and stuff. Like I assume it's not ok to merge stuff before it's been reviewed and we're gonna follow a PR model. There aren't many of us though so getting reviews may be a bit tricky.</div></div></div><br/>
<div><a id="1622885954.172600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622885954.172600" ><div class="time">2021-06-05 09:39</div></a><div class="msg">Yeah we can rename that if we want, that's just the name a came up with for a start. Didn't want to merge to master given it was still a work in progress at the time (well, still is I guess)</div></div></div><br/>
<div><a id="1622886586.172800"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1622886586.172800" ><div class="time">2021-06-05 09:49</div></a><div class="msg">would a round robin approach help?</div></div></div><br/>
<div><a id="1622887685.173200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622887685.173200" ><div class="time">2021-06-05 10:08</div></a><div class="msg">Let's aim for a single thumbs up into that working branch. Releases/master we can talk about in due course</div></div></div><br/>
<div><a id="1622887792.173400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622887792.173400" ><div class="time">2021-06-05 10:09</div></a><div class="msg">At this stage, high velocity decision making should be the priority - I know that contributions/focus/time is very much dependent on things outside of our control, so let's capitalise on the energy while we can</div></div></div><br/>
<div><a id="1622887832.173600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622887832.173600" ><div class="time">2021-06-05 10:10</div></a><div class="msg">The earlier we can get into the hands of early adopters for feedback the better</div></div></div><br/>
<div><a id="1622887848.173800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622887848.173800" ><div class="time">2021-06-05 10:10</div></a><div class="msg">Yep sounds good to me. Try and get some PRs in and turn them round as fast as we can into the 4.0 branch</div></div></div><br/>
<div><a id="1622887896.174100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622887896.174100" ><div class="time">2021-06-05 10:11</div></a><div class="msg">Shared understanding is also important though so we can get some continuity</div></div></div><br/>
<div><a id="1622887917.174300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622887917.174300" ><div class="time">2021-06-05 10:11</div></a><div class="msg">Next thing I think is getting the CI to build alpha releases or something so we can get people testing. The whole thing should now work on all OSs, and it's not a big job to get the artifacts building properly</div></div></div><br/>
<div><a id="1622889300.175300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622889300.175300" ><div class="time">2021-06-05 10:35</div></a><div class="msg">I?ve just added a branch protection rule to enforce the above. Let?s see how it goes</div></div></div><br/>
<div><a id="1622889411.176300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622889411.176300" ><div class="time">2021-06-05 10:36</div></a><div class="msg">On any PR if you want to review, head to ?files changed?, hit ?review changes? and add your review. It won?t be mergeable until at least 1 reviewer approves</div></div></div><br/>
<div><a id="1622889424.176900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622889424.176900" ><div class="time">2021-06-05 10:37</div></a><div class="msg">It also will require any conversations (i.e. feedback with requests) to be resolved</div></div></div><br/>
<div><a id="1622890194.177000"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1622890194.177000" ><div class="time">2021-06-05 10:49</div></a><div class="msg">agree,, we can deal with all this over the coming days.. btw - noice progress</div></div></div><br/>
<div><a id="1622890206.177200"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1622890206.177200" ><div class="time">2021-06-05 10:50</div></a><div class="msg">@pact544 I tried to take a look on your changes, share some thoughts, but I cannot build solution. I am ending with following error

```Severity	Code	Description	Project	File	Line	Suppression StateError	MSB3030	Could not copy the file "pact-net\build\windows\x86_64\pact_mock_server_ffi.dll" because it was not found.	PactNet.Native	C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\MSBuild\Current\Bin\Microsoft.Common.CurrentVersion.targets	4964```
I can only suspect that it is has something to do with `download-native-libs.sh` . Do you expecting people do fire this before building solution? Is it a temporary solution? Sorry if I missed some of your previous info about this.</div></div></div><br/>
<div><a id="1622891019.177700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622891019.177700" ><div class="time">2021-06-05 11:03</div></a><div class="msg">Rust integration / v2.x.x project board <a href="https://github.com/pact-foundation/pact-net/projects/1">https://github.com/pact-foundation/pact-net/projects/1</a></div></div></div><br/>
<div><a id="1622897031.178000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622897031.178000" ><div class="time">2021-06-05 12:43</div></a><div class="msg">Yeah so you'll need to run that to pull down the required dependencies (the Ruby version required a script also). The CI does it automatically and we can always add a targets file to do it</div></div></div><br/>
<div><a id="1622897258.178200"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1622897258.178200" ><div class="time">2021-06-05 12:47</div></a><div class="msg">Well, maybe I am wrong, but I did couple of code reviews and I never have to run by hand any script. Maybe you can consider packing these dlls into nuget packages or at least run your script as a part of build process?</div></div></div><br/>
<div><a id="1622898554.178400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622898554.178400" ><div class="time">2021-06-05 13:09</div></a><div class="msg">Yeah like I say, the CI does it already and we could add a targets file to automate it locally</div></div></div><br/>
<div><a id="1622900187.178600"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1622900187.178600" ><div class="time">2021-06-05 13:36</div></a><div class="msg">Do you mean v4?</div></div></div><br/>
<div><a id="1622901000.178800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622901000.178800" ><div class="time">2021-06-05 13:50</div></a><div class="msg">Yes.</div></div></div><br/>
<div><a id="1622901031.179000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622901031.179000" ><div class="time">2021-06-05 13:50</div></a><div class="msg">Awesome, I pinned it too</div></div></div><br/>
<div><a id="1622901061.179200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1622901061.179200" ><div class="time">2021-06-05 13:51</div></a><div class="msg">(v2.x.x is the golang next major)</div></div></div><br/>
<div><a id="1622902804.179400"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1622902804.179400" ><div class="time">2021-06-05 14:20</div></a><div class="msg">Ok. Will it be listed as nuget dependency ? 

Do not take me wrong It  definitely can work, but it would be problematic in some cases as well. For instance I am working for enterprise where each dependency has to be approved in advance. As part of this proces usually nugts with not transparent dependencies, not explicitly listed as project are rejected. Even if it will be accepted it must goes to our nuget repo in this case jfrog artifactory. Now all our Devs envs and CI are only based on it, cannot download additional external deps. So for case like this it I think it will be much batter if this dependencies will be manage by nuget with proper approach to version especially when we already have DLLs. Otherwise Devs in company like my will not be able to use it, unless I am missing something.</div></div></div><br/>
<div><a id="1622909807.179700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622909807.179700" ><div class="time">2021-06-05 16:16</div></a><div class="msg">Yes the native deps are bundled in to the PactNet.Native nuget</div></div></div><br/>
<div><a id="1622912458.180000"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1622912458.180000" ><div class="time">2021-06-05 17:00</div></a><div class="msg">Hmm, I am feel a bit lost here. Is there any description of your new approach to project organization, packages and etc (I have through this one <a href="https://github.com/pact-foundation/pact-net/pull/297">https://github.com/pact-foundation/pact-net/pull/297</a>)? It will help in my case.

If there will PactNet.Native package then I think it will work in above case. Just two questions:
1. Should script `Publish-StandaloneCore-Releases.ps1`  works?  It looks like it is missing PactNet.Windows.nuspec
2. How you see `PactNet.Native` package? What if for some reason we will decide to add or move to different core? Did you think maybe a more dedicated name like `PactNet.Native.Rust` ?</div></div></div><br/>
<div><a id="1622912950.180300"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1622912950.180300" ><div class="time">2021-06-05 17:09</div></a><div class="msg">My last question for today. I see that for some reason you have decide to bundle all dependencies together. I think i go through discussion on this, seen arguments about size and simplicity in some cases, but didn't spot arguments or scenario when someone will only use single os from start to end. That is not about size itself but about binaries which shouldn't be there. Maybe we could keep your bundled packge `PactNet.Native` but also add dedicated per OS, liek it was previously?</div></div></div><br/>
<div><a id="1622914283.180500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622914283.180500" ><div class="time">2021-06-05 17:31</div></a><div class="msg">Yeah I discussed that with the maintainers of other languages before I did it and we discussed the options. We decided the simple approach with everything embedded was the best approach. There's a thread in the channel about it where we decided that.

If you don't want the deps for other OSs unpacked then you can build with a runtime identifier and it'll only unpack the required one, like `dotnet build -r win-x64`, or add a runtime identifier to your csproj file so you don't have to type that each time.</div></div></div><br/>
<div><a id="1622919304.180900"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622919304.180900" ><div class="time">2021-06-05 18:55</div></a><div class="msg">Unfortunately it's not just my work laptop. My own laptop (the one that runs the consumer tests in ~150ms in Linux) takes 12s to run the same tests on Windows on the same hardware.

There's definitely some kind of performance problem which only affects Windows to do with the consumer tests.

The provider tests take &lt;1ms though :open_mouth: :zap:</div></div></div><br/>
<div><a id="1622920618.181300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1622920618.181300" ><div class="time">2021-06-05 19:16</div></a><div class="msg">I've updated the PR to also produce alpha nugets when code is merged to the 4.0.0 branch</div></div></div><br/>
<div><a id="1623049946.182500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1623049946.182500" ><div class="time">2021-06-07 07:12</div></a><div class="msg">PR for verifying SHA sums of native artifacts when restoring:
<a href="https://github.com/pact-foundation/pact-net/pull/300">https://github.com/pact-foundation/pact-net/pull/300</a></div></div></div><br/>
<div><a id="1623050134.182800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1623050134.182800" ><div class="time">2021-06-07 07:15</div></a><div class="msg">Argh the file paths in the downloaded checksums aren't correct so I've done a bit of `sed` to put the right names in there, but it doesn't work on OSX. That's why the cross platform CI is good though at least :+1:</div></div></div><br/>
<div><a id="1623053339.183000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623053339.183000" ><div class="time">2021-06-07 08:08</div></a><div class="msg">@uglyog
I see. I made an additional test without the with specification and indeed, the message has the same form. The issue will come if we need to specify a future version for the messages. The with specification will need to accept the MessagePactHandle. Thank you for the clarification!
@matt.fellows I now need to "verify" the sending of the message to the code base is working.
In your example, you actually didn't do it, right? This is your comment I assume. How could we enforce the verification of the message, though?</div></div></div><br/>
<div><a id="1623053813.183300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623053813.183300" ><div class="time">2021-06-07 08:16</div></a><div class="msg">so the flow is actually this:

1. Call the new_message_pact method to get the handle of the pact message
2. Call the new_message method with the previously created pact message handle
3. Call any of the method that takes a message handle in parameters (such as message_expects_to_receive or message_given)
4. Call `reify` to get back the message body and provider states, with the matching rules etc. removed
5. Invoke the actual function that should handle the message, passing the message and config
6. Only if (5) does not fail (whatever is idiomatic for .NET) then you move to (&amp;)
7. Finally call the write_message_pact_file with the pact message handle (not the message handle) to create the final pact file</div></div></div><br/>
<div><a id="1623053835.183500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623053835.183500" ><div class="time">2021-06-07 08:17</div></a><div class="msg">so basically, you need to invoke the function that should receive the payload, and check if it passed/failed</div></div></div><br/>
<div><a id="1623053847.183800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623053847.183800" ><div class="time">2021-06-07 08:17</div></a><div class="msg">There is no need for the rust side to do this bit, because there is nothing it can really do</div></div></div><br/>
<div><a id="1623053850.184000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623053850.184000" ><div class="time">2021-06-07 08:17</div></a><div class="msg">make sense?</div></div></div><br/>
<div><a id="1623053855.184200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623053855.184200" ><div class="time">2021-06-07 08:17</div></a><div class="msg">Yep, that's the workflow I add in mind</div></div></div><br/>
<div><a id="1623053876.184400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623053876.184400" ><div class="time">2021-06-07 08:17</div></a><div class="msg">:ok_hand:</div></div></div><br/>
<div><a id="1623053877.184600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623053877.184600" ><div class="time">2021-06-07 08:17</div></a><div class="msg">see also <a href="https://github.com/pact-foundation/pact-go/blob/2.x.x/internal/native/mockserver/message_server_test.go#L41">https://github.com/pact-foundation/pact-go/blob/2.x.x/internal/native/mockserver/message_server_test.go#L41</a></div></div></div><br/>
<div><a id="1623053888.184900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623053888.184900" ><div class="time">2021-06-07 08:18</div></a><div class="msg">My question was can we enforce the verification? As in, adding a Verify method fo the builder for instance?</div></div></div><br/>
<div><a id="1623053905.185100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623053905.185100" ><div class="time">2021-06-07 08:18</div></a><div class="msg">that?s what I do</div></div></div><br/>
<div><a id="1623053906.185300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623053906.185300" ><div class="time">2021-06-07 08:18</div></a><div class="msg">see <a href="https://github.com/pact-foundation/pact-go/blob/2.x.x/examples/consumer_test.go#L151-L182">https://github.com/pact-foundation/pact-go/blob/2.x.x/examples/consumer_test.go#L151-L182</a></div></div></div><br/>
<div><a id="1623053944.185600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623053944.185600" ><div class="time">2021-06-07 08:19</div></a><div class="msg">line 178 invokes the function here: <a href="https://github.com/pact-foundation/pact-go/blob/2.x.x/examples/consumer_test.go#L223-L225">https://github.com/pact-foundation/pact-go/blob/2.x.x/examples/consumer_test.go#L223-L225</a></div></div></div><br/>
<div><a id="1623053979.185900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623053979.185900" ><div class="time">2021-06-07 08:19</div></a><div class="msg">ok, I see in the last example :slightly_smiling_face:</div></div></div><br/>
<div><a id="1623054008.186200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623054008.186200" ><div class="time">2021-06-07 08:20</div></a><div class="msg">let me know if you have any questions</div></div></div><br/>
<div><a id="1623054018.186400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623054018.186400" ><div class="time">2021-06-07 08:20</div></a><div class="msg">I?m really keen to see the interface you come up with</div></div></div><br/>
<div><a id="1623054037.186600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623054037.186600" ><div class="time">2021-06-07 08:20</div></a><div class="msg">I'm going to create a branch today, specific to the messaging</div></div></div><br/>
<div><a id="1623082904.187200"><img src="https://secure.gravatar.com/avatar/37eea920bc08d7ebd8c0fe11fd166d06.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0004-72.png" /></a><div class="message"><div class="username">jr.jenks</div><a style="text-decoration: none" href="#1623082904.187200" ><div class="time">2021-06-07 16:21</div></a><div class="msg">Are there any alpha NuGets yet? I don't see anything at <a href="https://www.nuget.org/packages/PactNet.Windows">https://www.nuget.org/packages/PactNet.Windows</a></div></div></div><br/>
<div><a id="1623086031.187500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1623086031.187500" ><div class="time">2021-06-07 17:13</div></a><div class="msg">At the moment I've added alpha nugets to the CI pipeline only</div></div></div><br/>
<div><a id="1623142222.187700"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623142222.187700" ><div class="time">2021-06-08 08:50</div></a><div class="msg">Hey guys i will  e avail tomorrow night fr 2 hrs. 7pm to 9pm.  Time to get our heads around how we setup gherkin the way we think we can</div></div></div><br/>
<div><a id="1623158957.187800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623158957.187800" ><div class="time">2021-06-08 13:29</div></a><div class="msg">ha, gotta love the minor differences between bsd/gnu</div></div></div><br/>
<div><a id="1623158984.188000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623158984.188000" ><div class="time">2021-06-08 13:29</div></a><div class="msg">One of the first things when I get a mac, is to add the gnu tools</div></div></div><br/>
<div><a id="1623158992.188200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623158992.188200" ><div class="time">2021-06-08 13:29</div></a><div class="msg">not sure what happens when I get to M1 though</div></div></div><br/>
<div><a id="1623159034.189000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623159034.189000" ><div class="time">2021-06-08 13:30</div></a><div class="msg">That?d be great. What?s a good starting point? maybe scratch together a  few shapes to the gherkin?</div></div></div><br/>
<div><a id="1623206160.001200"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623206160.001200" ><div class="time">2021-06-09 02:36</div></a><div class="msg">Start with thw way a common repo is set up and a standarfised way to pull into the projects</div></div></div><br/>
<div><a id="1623206212.002700"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623206212.002700" ><div class="time">2021-06-09 02:36</div></a><div class="msg">After that we look at our testing needs and develop skeletons for each given when then</div></div></div><br/>
<div><a id="1623222834.002900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623222834.002900" ><div class="time">2021-06-09 07:13</div></a><div class="msg">In specflow (BDD test in .NET) I haven't tried to grab Gherkins from a remote location or a relative path. What I am afraid of is that Specflow does some work to auto-generate an intermediary code file that does the execution of the test therefore I am not sure having a remote Gherkins is even possible. I'll investigate on my end and let you know quickly.</div></div></div><br/>
<div><a id="1623222974.003100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623222974.003100" ><div class="time">2021-06-09 07:16</div></a><div class="msg">One thing that would be nice is to integrate Living doc with Specflow to see the state of the integration test at the CI.</div></div></div><br/>
<div><a id="1623223535.003300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623223535.003300" ><div class="time">2021-06-09 07:25</div></a><div class="msg">I didn?t make it clear earlier by the way that I can?t make tonight</div></div></div><br/>
<div><a id="1623223556.003500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623223556.003500" ><div class="time">2021-06-09 07:25</div></a><div class="msg">but I think a good starting point is getting a working artifact that can be collaborated on.</div></div></div><br/>
<div><a id="1623223631.003700"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623223631.003700" ><div class="time">2021-06-09 07:27</div></a><div class="msg">Sounds like a good place to start @matt.fellows. I investigated with our teams and the easier will be to embark the new scenarios as we develop the feature in each language from the centralized repo. It's not that difficult ;)</div></div></div><br/>
<div><a id="1623223786.004000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623223786.004000" ><div class="time">2021-06-09 07:29</div></a><div class="msg">Yep, we don?t need to do it all at once. Any starting point we can build from this experience will be really valuable for others</div></div></div><br/>
<div><a id="1623226803.020500"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1623226803.020500" ><div class="time">2021-06-09 08:20</div></a><div class="msg">Before we go too far it will be good to think on:
1. Testing strategy. What kind of test we would like to introduce, how they related each other. Few years ago I have been inspired by this article <a href="https://martinfowler.com/articles/microservice-testing/">https://martinfowler.com/articles/microservice-testing/</a> . Although there is microservices concept involve, there are generic approaches, which IMHO suits to many different scenarios.
2. What kind of test type we want to represent by gherkin tests. End to end, component or integration. I am using gherkin tests mostly for component, leaving integration an unit tests for testing framework like Nunit. In this project I am mostly missing integration tests with core engine, which now will be mean Rust. </div></div></div><br/>
<div><a id="1623229890.022700"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623229890.022700" ><div class="time">2021-06-09 09:11</div></a><div class="msg">hey @jacek.helper, while we could potentially use gherkin across the board, there are situations where gherkin is seen as "getting in the way". Dev's at Platform engineering have a divided opinion about gherkin on unit testing</div></div></div><br/>
<div><a id="1623230058.025500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623230058.025500" ><div class="time">2021-06-09 09:14</div></a><div class="msg">My view is that these BDD scenarios are something we could reuse as features tests across libraries to say "they've implemented Pact" and also to show the gaps. It would literally be able to be translated into a roadmap</div></div></div><br/>
<div><a id="1623230107.027500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623230107.027500" ><div class="time">2021-06-09 09:15</div></a><div class="msg">Within Pact .NET we should use whatever makes sense for the project. We don't use cucumber elsewhere, for reference</div></div></div><br/>
<div><a id="1623230132.028700"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623230132.028700" ><div class="time">2021-06-09 09:15</div></a><div class="msg">yep - i believe we are looking to deomonstrate the Pact specifications</div></div></div><br/>
<div><a id="1623230176.029800"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623230176.029800" ><div class="time">2021-06-09 09:16</div></a><div class="msg">hich sort of sounds like E2E</div></div></div><br/>
<div><a id="1623230520.037800"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623230520.037800" ><div class="time">2021-06-09 09:22</div></a><div class="msg">@matt.fellows the gherkin statements would provide the specification for the non-cukes implementations</div></div></div><br/>
<div><a id="1623230592.038500"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1623230592.038500" ><div class="time">2021-06-09 09:23</div></a><div class="msg">@greg595au  I am not sure if I get fully your point. My intention is not promote gherkin as unit tests.

If we want to use across libraries, fine but then it will not be better if this will not depend on engine implentation? Stub engine itself. So component tests instead of end to end.
As I have mention few days ago the most missing part from my point are integration tests for engine. 
I would suggest to add gherkin tests, which stubs engine client classes and integration tests, which will start from the same classes. That is how we could have nice tests approach.</div></div></div><br/>
<div><a id="1623230790.039900"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623230790.039900" ><div class="time">2021-06-09 09:26</div></a><div class="msg">@jacek.helper i think we have similar thoughts here, in my point above, the team of nearly 400 devs can't agree on cucumber</div></div></div><br/>
<div><a id="1623230827.040600"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623230827.040600" ><div class="time">2021-06-09 09:27</div></a><div class="msg">so what I am aming for is - where to store the tech agnositc gherkin features</div></div></div><br/>
<div><a id="1623230853.041200"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623230853.041200" ><div class="time">2021-06-09 09:27</div></a><div class="msg">how to bring them into a project (that wants to use them)</div></div></div><br/>
<div><a id="1623230907.041400"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1623230907.041400" ><div class="time">2021-06-09 09:28</div></a><div class="msg">Make sense</div></div></div><br/>
<div><a id="1623230964.042200"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623230964.042200" ><div class="time">2021-06-09 09:29</div></a><div class="msg">i don't feel comfortable with forcing the project to adopt, because it will be a workload they might not be able to do</div></div></div><br/>
<div><a id="1623231111.043000"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623231111.043000" ><div class="time">2021-06-09 09:31</div></a><div class="msg">on a completely unrelated note - had my covid shot yesterday started feeling a but stiff today</div></div></div><br/>
<div><a id="1623231139.043500"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623231139.043500" ><div class="time">2021-06-09 09:32</div></a><div class="msg">Unit Tests - leave them in native form, there are tools that tell us coverage</div></div></div><br/>
<div><a id="1623231179.044100"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623231179.044100" ><div class="time">2021-06-09 09:32</div></a><div class="msg">Component and Integration tests seem suited to a gherkin approach</div></div></div><br/>
<div><a id="1623231203.044600"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623231203.044600" ><div class="time">2021-06-09 09:33</div></a><div class="msg">we need to map them to the Pact Spec (and they become the acceptance criteria)</div></div></div><br/>
<div><a id="1623231244.045400"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623231244.045400" ><div class="time">2021-06-09 09:34</div></a><div class="msg">which dovetails with @matt.fellows that they would enable road map to be generated</div></div></div><br/>
<div><a id="1623231347.046600"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623231347.046600" ><div class="time">2021-06-09 09:35</div></a><div class="msg">Any thoughts from @pact544 @jacek.helper @matt.fellows</div></div></div><br/>
<div><a id="1623231443.047500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623231443.047500" ><div class="time">2021-06-09 09:37</div></a><div class="msg">Will try and respond later. From memory, Adam says he's off on holidays for a week or so.</div></div></div><br/>
<div><a id="1623231573.048400"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623231573.048400" ><div class="time">2021-06-09 09:39</div></a><div class="msg">thanks matt... i'll create a couple of ideas on the location/how tonight</div></div></div><br/>
<div><a id="1623232723.049000"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623232723.049000" ><div class="time">2021-06-09 09:58</div></a><div class="msg">@jacek.helper I like Martin Fowlers work - i often refer to it myself</div></div></div><br/>
<div><a id="1623235185.051600"><img src="https://secure.gravatar.com/avatar/13094197a04a72cac98ef3fadcde376b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0003-72.png" /></a><div class="message"><div class="username">jacek.helper</div><a style="text-decoration: none" href="#1623235185.051600" ><div class="time">2021-06-09 10:39</div></a><div class="msg">I am just after covid and during week long holiday :) . I share my thought later on :slightly_smiling_face:</div></div></div><br/>
<div><a id="1623235256.052800"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623235256.052800" ><div class="time">2021-06-09 10:40</div></a><div class="msg">no worries jacek - i'll put up a diagram to cover the basic high level ideas (where/how) we'll circle back on the test stratgey and what fits best :slightly_smiling_face:</div></div></div><br/>
<div><a id="1623235479.053400"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623235479.053400" ><div class="time">2021-06-09 10:44</div></a><div class="msg">High Level Where/How for Specs to Features and then to language specific</div></div></div><br/>
<div><a id="1623235543.054100"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623235543.054100" ><div class="time">2021-06-09 10:45</div></a><div class="msg">i am getting tired, off while I can still stand....</div></div></div><br/>
<div><a id="1623235549.054300"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623235549.054300" ><div class="time">2021-06-09 10:45</div></a><div class="msg">night everyone</div></div></div><br/>
<div><a id="1623247137.060400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1623247137.060400" ><div class="time">2021-06-09 13:58</div></a><div class="msg">Yep I like the idea of a common gherkin description of the spec demonstrating what that spec can do and also how it's limited.

I think you end up in an awkward situation though because the spec doesn't cover a number of things and they'll be implementation specific. For example, V2 doesn't support multiple provider states, but if the implementation allows me to try it (i.e. I can call Given twice) then am I supposed to get an error or does the second overwrite the first? The spec doesn't say, so this is an implementation detail and could vary between languages.

At first I'd describe only the positive tests, because the negative tests aren't really covered by the spec.

For what it's worth, the Rust implementation overwrites instead is giving an error I think.</div></div></div><br/>
<div><a id="1623283680.061100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623283680.061100" ><div class="time">2021-06-10 00:08</div></a><div class="msg">ah! I?ve heard it can do that, hopefully won?t be too bad!</div></div></div><br/>
<div><a id="1623283760.062100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623283760.062100" ><div class="time">2021-06-10 00:09</div></a><div class="msg">&gt;  Yep I like the idea of a common gherkin description of the spec demonstrating what that spec can do and also how it?s limited.
Excellent</div></div></div><br/>
<div><a id="1623283789.062500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623283789.062500" ><div class="time">2021-06-10 00:09</div></a><div class="msg">There has always been a bit of a gap between ?the spec? and ?what each language actually does?</div></div></div><br/>
<div><a id="1623283811.063000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623283811.063000" ><div class="time">2021-06-10 00:10</div></a><div class="msg">The spec doesn?t cover certain features. E.g. provider injected values isn?t documented in the spec, but is a feature that is supported</div></div></div><br/>
<div><a id="1623283826.063500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623283826.063500" ><div class="time">2021-06-10 00:10</div></a><div class="msg">(that might actually just be a spec coverage problem, btw)</div></div></div><br/>
<div><a id="1623283875.064600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623283875.064600" ><div class="time">2021-06-10 00:11</div></a><div class="msg">but the functional behaviour of each library may change, and that is probably OK - in many cases, that is because each language itself is different and what is idiomatic for one is a terrible experience for another (this tends to be true of type safe and compiled languages vs dynamic languages)</div></div></div><br/>
<div><a id="1623283907.065300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623283907.065300" ><div class="time">2021-06-10 00:11</div></a><div class="msg">so we should look to find the scenarios and features that are important and common to all, and have those in the Feature spec</div></div></div><br/>
<div><a id="1623284010.065400"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623284010.065400" ><div class="time">2021-06-10 00:13</div></a><div class="msg">Woke up this morning and  stiffness is gone.. so i am not expecting to experience anything new now</div></div></div><br/>
<div><a id="1623284097.065700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623284097.065700" ><div class="time">2021-06-10 00:14</div></a><div class="msg">great to hear!!</div></div></div><br/>
<div><a id="1623329154.072100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623329154.072100" ><div class="time">2021-06-10 12:45</div></a><div class="msg">Hi everyone, I would hold off on the Gherkins for now until we have a stable 4.0.0 version. Let's not forget it will be a shared repo for all the languages so all contributors across all the different languages will have to agree on this.

Also, as I help teams on a daily basis with the different level of tests, the BDD tests in Specflow are quite big to implement and costly to maintain.

While it's a great idea, it is IMHO, an overkill for the moment given many constraints :
1. It is a library, therefore we would just be doing a code testing and lose one of the main advantage of specflow (integration microservice engine)
2. How we would copy the Gherkins over to the project to have it always synchronized is something to be seen (a copy/paste is the likely options)
For the moment, nothing stops us from adding more integration tests using the classical approach. The more integration tests we will have, the easier it will be to move over to Specflow.

All the best :slightly_smiling_face:
(Sorry, I was a bit busy this week and saw the messages only today)</div></div></div><br/>
<div><a id="1623331546.075800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1623331546.075800" ><div class="time">2021-06-10 13:25</div></a><div class="msg">I think the gherkin stuff would have to be in a separate repo (although we could start it in one of the language repos to prove it first then split it out after). We'd probably need either a branch per spec version like the spec repo is, or liberal use of tagging or something. In terms of importing them, you'd either want to download them during CI or something, or have a git submodule</div></div></div><br/>
<div><a id="1623483029.005100"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623483029.005100" ><div class="time">2021-06-12 07:30</div></a><div class="msg">hi @pact544 that is the gist of my diagram - isolation of the generic spec gherkin from implementation. That would provide high level guidance on specs and allow language differences (to the most part) to be sorted at implemenation time. This does lead to the situation where there will be semantic and specific language requirements. But as a start using positive tests:
? Common Spec Given When Then
? RFC compliance tests
Then we start to implement more, as @jacek.helper pointed out, we need to map our test strategy to enable sensible and adoptable testing approach across <a href="http://Pact.io">http://Pact.io</a></div></div></div><br/>
<div><a id="1623483062.005800"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623483062.005800" ><div class="time">2021-06-12 07:31</div></a><div class="msg">(PS - i had to replace my good machines HDD - seems its had enough)</div></div></div><br/>
<div><a id="1623486166.005900"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1623486166.005900" ><div class="time">2021-06-12 08:22</div></a><div class="msg">I wonder how we actually do it from a practical perspective though. For example, we'd write tests for spec v4 but they'd currently fail for PactNet as it only supports v3. Or we'd write v3 message tests which would currently fail. That means they can't run as part of CI otherwise they'd always fail.

Tests that aren't run as part of CI aren't particularly useful, and neither are tests that always fail. I'm really not sure how each language declares the tests that _should_ pass so that they can run in CI and find regressions.

It's like each language needs to provide its own set of ignores, but that can't be in the central gherkin repo obviously, so I'm not sure how they do that.</div></div></div><br/>
<div><a id="1623488169.006200"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623488169.006200" ><div class="time">2021-06-12 08:56</div></a><div class="msg">we have a few choices on managing that angle. Branching, folders or tags</div></div></div><br/>
<div><a id="1623488215.006400"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623488215.006400" ><div class="time">2021-06-12 08:56</div></a><div class="msg">tags can become unmanagable, branches isolate V3 from V4 specs nicely</div></div></div><br/>
<div><a id="1623488243.006600"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623488243.006600" ><div class="time">2021-06-12 08:57</div></a><div class="msg">folders are great but then we have a bunch of tests that are not implemented</div></div></div><br/>
<div><a id="1623488244.006800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1623488244.006800" ><div class="time">2021-06-12 08:57</div></a><div class="msg">Branch/tag sounds too cumbersome to me. That would mean you can't update to that branch/tag until you are fully compliant with every test in there.

I'm not sure folders works either - how would you tell it to only run certain folders?</div></div></div><br/>
<div><a id="1623488296.007000"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623488296.007000" ><div class="time">2021-06-12 08:58</div></a><div class="msg">we can force cucumber to filter to folders</div></div></div><br/>
<div><a id="1623488332.007200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1623488332.007200" ><div class="time">2021-06-12 08:58</div></a><div class="msg">I've never done that for SpecFlow before. Are you sure that's possible?</div></div></div><br/>
<div><a id="1623488336.007400"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623488336.007400" ><div class="time">2021-06-12 08:58</div></a><div class="msg">i am not a fan of folders, but we need to consider all possibilites and narrow down most suitable</div></div></div><br/>
<div><a id="1623488556.007600"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623488556.007600" ><div class="time">2021-06-12 09:02</div></a><div class="msg">@pact544 like this way</div></div></div><br/>
<div><a id="1623488656.008000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1623488656.008000" ><div class="time">2021-06-12 09:04</div></a><div class="msg">That's only one base folder though. I'm not sure you could organise the folders sufficiently hierarchically that you can opt in and out of tests. Plus that's the CLI runner, which doesn't apply in Visual Studio or `dotnet test`</div></div></div><br/>
<div><a id="1623488662.008200"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623488662.008200" ><div class="time">2021-06-12 09:04</div></a><div class="msg">and by</div></div></div><br/>
<div><a id="1623489188.008600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1623489188.008600" ><div class="time">2021-06-12 09:13</div></a><div class="msg">So you'd have to do this basically: <a href="https://docs.specflow.org/projects/specflow/en/latest/Execution/Executing-Specific-Scenarios.html">https://docs.specflow.org/projects/specflow/en/latest/Execution/Executing-Specific-Scenarios.html</a>

But there'd have to be so many tags that it would be really awkward to write those filters. They'd end up huge and it would be very tricky to manage them in the central repo for all languages</div></div></div><br/>
<div><a id="1623489220.008800"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623489220.008800" ><div class="time">2021-06-12 09:13</div></a><div class="msg">have you got a picture in your mind of exactly what we need tag wise?</div></div></div><br/>
<div><a id="1623489467.009000"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1623489467.009000" ><div class="time">2021-06-12 09:17</div></a><div class="msg">I've not, but that's kinda the problem I think. In my mind we're going to need a lot of tags because different languages have different levels of support so it's not as simple as just tagging the spec version or whatever. You need to tag the 'sub features' of each spec.

Just like how PactNet currently supports v3 but not in full - it doesn't support message pacts and it doesn't support combining multiple matchers in request/response pacts. Those two features would need their own tags so PactNet can ignore them but other languages don't.</div></div></div><br/>
<div><a id="1623489544.009200"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623489544.009200" ><div class="time">2021-06-12 09:19</div></a><div class="msg">can we have a larger group discussion (maybe teams or other meeting) so we can get a picture of this laid down to inform us how complex this might get</div></div></div><br/>
<div><a id="1623489555.009400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1623489555.009400" ><div class="time">2021-06-12 09:19</div></a><div class="msg">Then your filter is like `v3 &amp; !(message | multipleMatchers | ...)`</div></div></div><br/>
<div><a id="1623490106.009600"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623490106.009600" ><div class="time">2021-06-12 09:28</div></a><div class="msg">@yann.courtel @jacek.helper @pact544 @uglyog @matt.fellows When is a good time to schedule in a discussion so we can map out folder/branching/tagging/filtering so we can make good engineering decisions about the way forward with the next steps</div></div></div><br/>
<div><a id="1623490271.009800"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623490271.009800" ><div class="time">2021-06-12 09:31</div></a><div class="msg">@pact544 i concur that we are going to have complexities and possible issues to nut out. Would you be up for a larger team chat to flesh out a map that shows/demonstrates where the issues (and future gotchas) lye.</div></div></div><br/>
<div><a id="1623579884.000100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623579884.000100" ><div class="time">2021-06-13 10:24</div></a><div class="msg">Tuesday/Thursday nights next week work for me, which would be Monday morning EU</div></div></div><br/>
<div><a id="1623579909.000600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623579909.000600" ><div class="time">2021-06-13 10:25</div></a><div class="msg">having a rough couple of weeks Greg!</div></div></div><br/>
<div><a id="1623584593.000800"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623584593.000800" ><div class="time">2021-06-13 11:43</div></a><div class="msg">only the machine</div></div></div><br/>
<div><a id="1623663873.000200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623663873.000200" ><div class="time">2021-06-14 09:44</div></a><div class="msg">Tuesday works for me for since it's European time, we will have to come up with a specific time? :slightly_smiling_face:</div></div></div><br/>
<div><a id="1623664025.000400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623664025.000400" ><div class="time">2021-06-14 09:47</div></a><div class="msg">I think @greg595au the first option that comes up in my mind is to not block on the BDD tests. The best approach I see at the moment is to let the languages import the BDD scenarios manually from the repository and add them to their BDD test project. that way we can see which feature is develop for which language. The filtering approach sounds too complex. We can talk about it though next time we meet.</div></div></div><br/>
<div><a id="1623665832.000700"><img src="https://avatars.slack-edge.com/2021-06-14/2168250301747_bb85b6981eda324bc5b9_72.png" /></a><div class="message"><div class="username">joaoproenca</div><a style="text-decoration: none" href="#1623665832.000700" ><div class="time">2021-06-14 10:17</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1623666346.000900"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623666346.000900" ><div class="time">2021-06-14 10:25</div></a><div class="msg">@yann.courtel do you mean like this diagram? <a href="https://files.slack.com/files-pri/T5F60FXSQ-F024DK0JUMB/screen_shot_2021-06-09_at_8.42.25_pm.png">https://files.slack.com/files-pri/T5F60FXSQ-F024DK0JUMB/screen_shot_2021-06-09_at_8.42.25_pm.png</a></div></div></div><br/>
<div><a id="1623666373.001300"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623666373.001300" ><div class="time">2021-06-14 10:26</div></a><div class="msg">Where Pact Specs are our wiki (by version)</div></div></div><br/>
<div><a id="1623666433.001500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623666433.001500" ><div class="time">2021-06-14 10:27</div></a><div class="msg">No I have absolutely no problem with your diagram, I'm talking about the actual implementation. How we can achieve that in Specflow and if it's not too complicated at first. The filter / branch approach.</div></div></div><br/>
<div><a id="1623666524.001700"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623666524.001700" ><div class="time">2021-06-14 10:28</div></a><div class="msg">I agree having scenarios in Gherkins could be a great idea to vehiculate the PACT specs but the process of importing them in each language needs to be reviewed thoroughly. We don't want to add unnecessary complexity :)</div></div></div><br/>
<div><a id="1623666582.001900"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623666582.001900" ><div class="time">2021-06-14 10:29</div></a><div class="msg">One thing that often happens is we see complexity because that is where our minds are.. I think tags might need to be thought of in a more streamlined way. But I will leave that till we convene for a conversation where we can trial the ideas on paper</div></div></div><br/>
<div><a id="1623666835.002100"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1623666835.002100" ><div class="time">2021-06-14 10:33</div></a><div class="msg">My parting thoughts, if we fixate on what can't be done and over look simplifications, we'll be ineffective influencing uptake in other languages as they progress.</div></div></div><br/>
<div><a id="1623675869.002300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623675869.002300" ><div class="time">2021-06-14 13:04</div></a><div class="msg">I understand your point. Although my thoughts were coming out of researching a way to do it, not just posturing. I see the potential of such a repository.</div></div></div><br/>
<div><a id="1623743483.002200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623743483.002200" ><div class="time">2021-06-15 07:51</div></a><div class="msg">Hi everyone, I created a branch for the messaging support that is pulled from the feature/4.0.0 branch.

<a href="https://github.com/pact-foundation/pact-net/tree/feature/messaging-support">https://github.com/pact-foundation/pact-net/tree/feature/messaging-support</a>
This will be the main branch to add functionalities for the messaging according to the PACT specs 3.0.

I did most of the consumer part and will work on the provider side today.

Any feedback will be welcome.</div></div></div><br/>
<div><a id="1623744381.002400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1623744381.002400" ><div class="time">2021-06-15 08:06</div></a><div class="msg">Niiiice. I'll try and take a look at some point</div></div></div><br/>
<div><a id="1623749348.002600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623749348.002600" ><div class="time">2021-06-15 09:29</div></a><div class="msg">I'm still not convinced about the Consumer verification of the message. It's done by the MessageReify method on the RUST (Verify&lt;T&gt; of the NativeMessageBuilder) that returns an object with a property Contents that has the message without the matchers. There is a double deserialization... therefore I'm not sold on it just yet ^^</div></div></div><br/>
<div><a id="1623749693.002900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623749693.002900" ><div class="time">2021-06-15 09:34</div></a><div class="msg">Another thing I'm not convinced of is the NativeMockServer that has all the methods for all the interaction model. Including the message support. Maybe we could better separate the Interop methods (class Interop as internal instead of private) and add a NativeHttpMockServer and a NativeMessageMockServer which uses only part of the Interop methods...</div></div></div><br/>
<div><a id="1623750247.003100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623750247.003100" ><div class="time">2021-06-15 09:44</div></a><div class="msg">Yep, the NativePactMessageBuilder should absolutely NOT have a dependance to IMockServer as it could use the method CreateMockServerForPact and that is not conceivable. I will have a new IMessageMockServer to encapsulate just what we need.</div></div></div><br/>
<div><a id="1623750428.003300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1623750428.003300" ><div class="time">2021-06-15 09:47</div></a><div class="msg">Yeah the class can just implement both interfaces, but pass round as interface to prevent being able to call the wrong one</div></div></div><br/>
<div><a id="1623750497.003500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623750497.003500" ><div class="time">2021-06-15 09:48</div></a><div class="msg">Yeah right! an IHttpMockServer and IMessageMockServer and each builder will have the right abstraction. Good idea and less changes!</div></div></div><br/>
<div><a id="1623750682.003900"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1623750682.003900" ><div class="time">2021-06-15 09:51</div></a><div class="msg">Yeah that's how the v2/v3 builder works. Two separate interfaces so you can't get it wrong, but `NativeMessageBuilder` just implements both to reduce code duplication</div></div></div><br/>
<div><a id="1623751046.004100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623751046.004100" ><div class="time">2021-06-15 09:57</div></a><div class="msg">Right. I pushed the change. I still have some matchers Unit tests that are failing :confused:</div></div></div><br/>
<div><a id="1623751110.004300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1623751110.004300" ><div class="time">2021-06-15 09:58</div></a><div class="msg">Because of the i18n issues? Yeah they all need to be `JsonConvert.Serialize(testValue)` instead of just a string interpolation, then they'll format correctly</div></div></div><br/>
<div><a id="1623751147.004500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623751147.004500" ><div class="time">2021-06-15 09:59</div></a><div class="msg">yeah some mistake we had before, I'll look at it at the very end :wink: I'd like to spend some time on the provider side.</div></div></div><br/>
<div><a id="1623751196.004800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1623751196.004800" ><div class="time">2021-06-15 09:59</div></a><div class="msg">Yeah no probs. We should fix that in the release branch instead of this one anyway :thumbsup:</div></div></div><br/>
<div><a id="1623756938.005200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623756938.005200" ><div class="time">2021-06-15 11:35</div></a><div class="msg">&gt; I'm still not convinced about the Consumer verification of the message. It's done by the MessageReify method on the RUST (Verify&lt;T&gt; of the NativeMessageBuilder) that returns an object with a property Contents that has the message without the matchers. There is a double deserialization... therefore I'm not sold on it just yet ^^</div></div></div><br/>
<div><a id="1623756949.005400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623756949.005400" ><div class="time">2021-06-15 11:35</div></a><div class="msg">Could you please elaborate on this?</div></div></div><br/>
<div><a id="1623756977.005600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623756977.005600" ><div class="time">2021-06-15 11:36</div></a><div class="msg">Reify doesn't validate anything, just so we're clear (I think you know this)</div></div></div><br/>
<div><a id="1623757023.005800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623757023.005800" ><div class="time">2021-06-15 11:37</div></a><div class="msg">If you can easily strip the matchers in .NET you don't need to call reify</div></div></div><br/>
<div><a id="1623757077.006100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623757077.006100" ><div class="time">2021-06-15 11:37</div></a><div class="msg">But in some ways it's safer, because the object that is returned is what Pact thinks it saw, so there are less chances of error</div></div></div><br/>
<div><a id="1623757393.006400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1623757393.006400" ><div class="time">2021-06-15 11:43</div></a><div class="msg">Yeah using reify is better because stripping matchers is non-trivial (it's all recursive and stuff :joy:). I think Yann's problem is that the reified message appears to be double serialised/escaped so it's difficult to work with</div></div></div><br/>
<div><a id="1623757459.006600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623757459.006600" ><div class="time">2021-06-15 11:44</div></a><div class="msg">Hmm need to remember the decision there. I needed to be escaped I think because the payload isn't necessarily JSON</div></div></div><br/>
<div><a id="1623757544.006800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623757544.006800" ><div class="time">2021-06-15 11:45</div></a><div class="msg">Eg. If it's binary it'll be base64 encoded

But we can change that if easier</div></div></div><br/>
<div><a id="1623757570.007000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623757570.007000" ><div class="time">2021-06-15 11:46</div></a><div class="msg">Let me know</div></div></div><br/>
<div><a id="1623759327.007200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623759327.007200" ><div class="time">2021-06-15 12:15</div></a><div class="msg">Hey @matt.fellows I was referring to the implementation on the branch itself, not the approach :slightly_smiling_face:</div></div></div><br/>
<div><a id="1623759386.007400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1623759386.007400" ><div class="time">2021-06-15 12:16</div></a><div class="msg">I do a reify, get the object, use the content without the matchers and use it to check the consumer handler. The only thing I'm not sure of is the way I deserialize it :wink: mainly implementation details.</div></div></div><br/>
<div><a id="1623760581.007800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1623760581.007800" ><div class="time">2021-06-15 12:36</div></a><div class="msg">Ah cool, carry on then :rolling_on_the_floor_laughing:</div></div></div><br/>
<div><a id="1624263384.006000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1624263384.006000" ><div class="time">2021-06-21 08:16</div></a><div class="msg">Hi guys, a little update on the provider implementation of messaging support. I'm making good progress for the verification process. (was able to verify a PACT message contract with the CLI verifier)

I'm adding a middleware in the library that could be easily added to an API that wishes to use the message interaction model as part of their verification pipeline. It follows the approach of having a proxy to check the request going in here (<a href="https://github.com/pact-foundation/pact-message-demo">https://github.com/pact-foundation/pact-message-demo</a>)
The user would just have to add some kind of message scenario invoker to produce the message based on a named interaction.

Some roadblocks I ran into and not sure on how to deal with just yet:
? How to deal with the non existant log on the verification side (this one is painful, I see the rust is only calling the verifier CLI but having zero log for the verification process hurts. Something we have to work on in the 4.0.0 feature branch)
? Adding a net core message middleware will work with certain version of the framework and therefore will be limited (likely net standard 2.0 or greater)
Let me know if you have any feedback.
Thank you</div></div></div><br/>
<div><a id="1624284111.006200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1624284111.006200" ><div class="time">2021-06-21 14:01</div></a><div class="msg">There are logs, are you not enabling them? Or is this that xunit thing that swallows them?</div></div></div><br/>
<div><a id="1624284131.006400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1624284131.006400" ><div class="time">2021-06-21 14:02</div></a><div class="msg">We have a new log setting to log to different sinks but that may not yet be released</div></div></div><br/>
<div><a id="1624284152.006600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1624284152.006600" ><div class="time">2021-06-21 14:02</div></a><div class="msg">That could mean to could buffer the logs and print, or write to file etx</div></div></div><br/>
<div><a id="1624284314.006900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1624284314.006900" ><div class="time">2021-06-21 14:05</div></a><div class="msg">you are right, there is an init method for the FFI but we don't use it. We just set the log level in the .net lib. I'll look into how to pass the right configuration.</div></div></div><br/>
<div><a id="1624284382.007200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1624284382.007200" ><div class="time">2021-06-21 14:06</div></a><div class="msg">EDIT: actually we do..... mea culpa :smile: I'll focus on finishing the middleware and then I'll look into the log problem haha</div></div></div><br/>
<div><a id="1624335842.007500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1624335842.007500" ><div class="time">2021-06-22 04:24</div></a><div class="msg">haha</div></div></div><br/>
<div><a id="1624335855.007700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1624335855.007700" ><div class="time">2021-06-22 04:24</div></a><div class="msg">I?m going to look at releasing the latest rust libs in the next few days, and get Pact go using them</div></div></div><br/>
<div><a id="1624387935.008700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1624387935.008700" ><div class="time">2021-06-22 18:52</div></a><div class="msg">Hi all - sorry I've been away for a while. I was on vacation and then you know what it's like when you get back :smile: I've just fixed and merged my chore MR about verifying SHA sums of downloaded native libs.</div></div></div><br/>
<div><a id="1624388019.009700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1624388019.009700" ><div class="time">2021-06-22 18:53</div></a><div class="msg">From a bit of local testing, I think we need to change the consumer verification API slightly, which actually brings it more in line with how JS/Go work I think.

The current API is like:

```using (IPactContext context = this.pact.Build())
{
    var client = new EventsApiClient(context.MockServerUri);
    await client.Invoking(c =&gt; c.GetAllEvents()).Should().ThrowAsync&lt;Exception&gt;();
}```
but the problem that I've found is that if the test fails, the `Dispose` method throws on the pact context, and then the inner exception gets swallowed.

I think the new API needs to be more like JS/Go with a lambda:

```this.pact.Verify(ctx =&gt;
{
    var client = new MyClient(ctx.MockServerUri);
    await client.FooAsync();
}```
That way if the client call fails then we can surface that exception instead of swallowing it during the dispose

What do people think? It's not a difficult change, just something I can do quickly once we're agreed</div></div></div><br/>
<div><a id="1624413162.010800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1624413162.010800" ><div class="time">2021-06-23 01:52</div></a><div class="msg">I wish I didn?t have to do that in JS/Go, because it makes the code a bit more verbose/less readable. But it does have a number of upsides</div></div></div><br/>
<div><a id="1624413348.012600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1624413348.012600" ><div class="time">2021-06-23 01:55</div></a><div class="msg">The other thing I did recently, was to write Pact tests for our terraform provider. Doing so, I made a bunch of little updates to the error output. Each language is going to be different, but I managed to be able to get the line number of the test that was failing and provide a nice little diff

```--- ? Running Pact tests
go test -tags=consumer -count=1 -v <a href="http://github.com/pactflow/terraform/client/">http://github.com/pactflow/terraform/client/</a>...
=== RUN   TestClientPact
--- PASS: TestClientPact (0.00s)
=== RUN   TestTerraformClientPact
=== RUN   TestTerraformClientPact/Pacticipant
=== RUN   TestTerraformClientPact/Pacticipant/CreatePacticipant
=== RUN   TestTerraformClientPact/Pacticipant/ReadPacticipant
=== RUN   TestTerraformClientPact/Pacticipant/UpdatePacticipant
=== RUN   TestTerraformClientPact/Pacticipant/DeletePacticipant
=== RUN   TestTerraformClientPact/Team
=== RUN   TestTerraformClientPact/Team/ReadTeam
=== RUN   TestTerraformClientPact/Team/CreateTeam
=== RUN   TestTerraformClientPact/Team/UpdateTeam
=== RUN   TestTerraformClientPact/Team/DeleteTeam
=== RUN   TestTerraformClientPact/Team/UpdateTeamAssignments
=== RUN   TestTerraformClientPact/Secret
=== RUN   TestTerraformClientPact/Secret/CreateSecret
=== RUN   TestTerraformClientPact/Secret/UpdateSecret
=== RUN   TestTerraformClientPact/Secret/DeleteSecret
=== RUN   TestTerraformClientPact/Role
=== RUN   TestTerraformClientPact/Role/CreateRole
=== RUN   TestTerraformClientPact/Role/ReadRole
=== RUN   TestTerraformClientPact/Role/UpdateRole
=== RUN   TestTerraformClientPact/Role/DeleteRole
=== RUN   TestTerraformClientPact/User
=== RUN   TestTerraformClientPact/User/CreateUser
=== RUN   TestTerraformClientPact/User/ReadUser
=== RUN   TestTerraformClientPact/User/UpdateUser
=== RUN   TestTerraformClientPact/User/DeleteUser
=== RUN   TestTerraformClientPact/User/SetUserRoles
=== RUN   TestTerraformClientPact/Token
=== RUN   TestTerraformClientPact/Token/ReadTokens
=== RUN   TestTerraformClientPact/Token/RegenerateToken
=== RUN   TestTerraformClientPact/Webhook
=== RUN   TestTerraformClientPact/Webhook/CreateWebhook
=== RUN   TestTerraformClientPact/Webhook/ReadWebhook
=== RUN   TestTerraformClientPact/Webhook/UpdateWebhook
=== RUN   TestTerraformClientPact/Webhook/DeleteWebhook
=== RUN   TestTerraformClientPact/Webhook/AuthenticationSettings
=== RUN   TestTerraformClientPact/Webhook/AuthenticationSettings/SetTenantAuthenticationSettings
=== RUN   TestTerraformClientPact/Webhook/AuthenticationSettings/ReadTenantAuthenticationSettings


client_pact_test.go:932:
	Pact Verification Failed for: TestTerraformClientPact/Webhook/AuthenticationSettings/ReadTenantAuthenticationSettings

		Diff:
		actual: 	GET /admin/tenant/authentication-settings (Unexpected request was received)
		expected: 	GET /dmin/tenant/authentication-settings (Expected request that was not received)


    client_pact_test.go:942:
        	Error Trace:	client_pact_test.go:942
        	Error:      	Received unexpected error:
        	            	system unavailable


        	            		please see the log for error details
        	Test:       	TestTerraformClientPact/Webhook/AuthenticationSettings/ReadTenantAuthenticationSettings
--- FAIL: TestTerraformClientPact (0.10s)
    --- PASS: TestTerraformClientPact/Pacticipant (0.02s)
        --- PASS: TestTerraformClientPact/Pacticipant/CreatePacticipant (0.01s)
        --- PASS: TestTerraformClientPact/Pacticipant/ReadPacticipant (0.00s)
        --- PASS: TestTerraformClientPact/Pacticipant/UpdatePacticipant (0.00s)
        --- PASS: TestTerraformClientPact/Pacticipant/DeletePacticipant (0.00s)
    --- PASS: TestTerraformClientPact/Team (0.02s)
        --- PASS: TestTerraformClientPact/Team/ReadTeam (0.00s)
        --- PASS: TestTerraformClientPact/Team/CreateTeam (0.00s)
        --- PASS: TestTerraformClientPact/Team/UpdateTeam (0.00s)
        --- PASS: TestTerraformClientPact/Team/DeleteTeam (0.00s)
        --- PASS: TestTerraformClientPact/Team/UpdateTeamAssignments (0.00s)
    --- PASS: TestTerraformClientPact/Secret (0.01s)
        --- PASS: TestTerraformClientPact/Secret/CreateSecret (0.00s)
        --- PASS: TestTerraformClientPact/Secret/UpdateSecret (0.00s)
        --- PASS: TestTerraformClientPact/Secret/DeleteSecret (0.00s)
    --- PASS: TestTerraformClientPact/Role (0.01s)
        --- PASS: TestTerraformClientPact/Role/CreateRole (0.00s)
        --- PASS: TestTerraformClientPact/Role/ReadRole (0.00s)
        --- PASS: TestTerraformClientPact/Role/UpdateRole (0.00s)
        --- PASS: TestTerraformClientPact/Role/DeleteRole (0.00s)
    --- PASS: TestTerraformClientPact/User (0.02s)
        --- PASS: TestTerraformClientPact/User/CreateUser (0.00s)
        --- PASS: TestTerraformClientPact/User/ReadUser (0.00s)
        --- PASS: TestTerraformClientPact/User/UpdateUser (0.00s)
        --- PASS: TestTerraformClientPact/User/DeleteUser (0.00s)
        --- PASS: TestTerraformClientPact/User/SetUserRoles (0.00s)
    --- PASS: TestTerraformClientPact/Token (0.01s)
        --- PASS: TestTerraformClientPact/Token/ReadTokens (0.00s)
        --- PASS: TestTerraformClientPact/Token/RegenerateToken (0.00s)
    --- FAIL: TestTerraformClientPact/Webhook (0.02s)
        --- PASS: TestTerraformClientPact/Webhook/CreateWebhook (0.00s)
        --- PASS: TestTerraformClientPact/Webhook/ReadWebhook (0.00s)
        --- PASS: TestTerraformClientPact/Webhook/UpdateWebhook (0.00s)
        --- PASS: TestTerraformClientPact/Webhook/DeleteWebhook (0.00s)
        --- FAIL: TestTerraformClientPact/Webhook/AuthenticationSettings (0.00s)
            --- PASS: TestTerraformClientPact/Webhook/AuthenticationSettings/SetTenantAuthenticationSettings (0.00s)
            --- FAIL: TestTerraformClientPact/Webhook/AuthenticationSettings/ReadTenantAuthenticationSettings (0.00s)
FAIL
FAIL	<a href="http://github.com/pactflow/terraform/client">http://github.com/pactflow/terraform/client</a>	0.273s
FAIL
make: *** [pact] Error 1
?  terraform git:(master) ?```</div></div></div><br/>
<div><a id="1624413407.013100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1624413407.013100" ><div class="time">2021-06-23 01:56</div></a><div class="msg">In my case, having it in a closure made that a bit easier</div></div></div><br/>
<div><a id="1624437349.013200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1624437349.013200" ><div class="time">2021-06-23 08:35</div></a><div class="msg">It's actually a good idea. I was eluded to that when I was referring to hiding the pact.Build() method a while back.

It's a much more elegant way to write it as well forcing the client to use the pact instead of a code snippet.

Footnote: The messaging will work the same way by the way.</div></div></div><br/>
<div><a id="1624518481.014400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1624518481.014400" ><div class="time">2021-06-24 07:08</div></a><div class="msg">Hi everyone, I pushed my latest changes in the <a href="https://github.com/pact-foundation/pact-net/tree/feature/messaging-support">https://github.com/pact-foundation/pact-net/tree/feature/messaging-support</a> branch.

Provider verification for messaging is available in the branch.

Messaging support works with dynamic messages when you set up your scenario using a scenario builder.
See sample app here: <a href="https://github.com/pact-foundation/pact-net/tree/feature/messaging-support/samples/EventImporter/Provider.Tests">https://github.com/pact-foundation/pact-net/tree/feature/messaging-support/samples/EventImporter/Provider.Tests</a>

The point is to setup a simulated message that will come from your API rather than pushed in the queue and compare it to the message in the contract interaction. The functional key would be the interaction description.

Let me know what do you think about this implementation.</div></div></div><br/>
<div><a id="1624518890.014700"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1624518890.014700" ><div class="time">2021-06-24 07:14</div></a><div class="msg">If you check the MessageMiddleware, you can see where the message is actually invoke and set in the http response: <a href="https://github.com/pact-foundation/pact-net/blob/feature/messaging-support/src/PactNet.Native/Messaging/MessageMiddleware.cs">https://github.com/pact-foundation/pact-net/blob/feature/messaging-support/src/PactNet.Native/Messaging/MessageMiddleware.cs</a></div></div></div><br/>
<div><a id="1624546780.014900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1624546780.014900" ><div class="time">2021-06-24 14:59</div></a><div class="msg">All the unit tests have been fixed and the CI is working. I just need to finalize the unit tests and it will be all good :sweat_smile:</div></div></div><br/>
<div><a id="1624734970.002100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1624734970.002100" ><div class="time">2021-06-26 19:16</div></a><div class="msg">So examples of the new API with a `Verify`/`VerifyAsync` method for consumer interaction verification, as mentioned:

```this.pact
    .UponReceiving("a request to retrieve all events")
        .Given("there are events with ids '45D80D13-D5A2-48D7-8353-CBB4C0EAABF5', '83F9262F-28F1-4703-AB1A-8CFD9E8249C9' and '3E83A96B-2A0C-49B1-9959-26DF23F83AEB'")
        .WithRequest(HttpMethod.Get, "/events")
        .WithHeader("Accept", "application/json")
        .WithHeader("Authorization", $"Bearer {Token}")
    .WillRespond()
        .WithStatus(HttpStatusCode.OK)
        .WithHeader("Content-Type", "application/json; charset=utf-8")
        .WithJsonBody(expected);

// async version
await this.pact.VerifyAsync(async ctx =&gt;
{
    var client = new EventsApiClient(ctx.MockServerUri, Token);

    IEnumerable&lt;Event&gt; events = await client.GetAllEvents();

    events.Should().BeEquivalentTo(expected);
});

// sync version
this.pact.Verify(ctx =&gt;
{
    var client = new EventsApiClient(ctx.MockServerUri, Token);

    IEnumerable&lt;Event&gt; events = client.GetAllEvents();

    events.Should().BeEquivalentTo(expected);
});```
That's needed because the previous API with an `IDisposable` meant that if the interaction itself threw an exception, that exception would be swallowed silently because the exception from the `Dispose` would be thrown instead.</div></div></div><br/>
<div><a id="1624735050.002300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1624735050.002300" ><div class="time">2021-06-26 19:17</div></a><div class="msg">The `ctx` arg to the lambda is of type `IConsumerCOntext` and currently only contains the mock server URI so that you can use it when constructing your client.

The reason I did that instead of just passing the URI itself is so that we wouldn't need a breaking change in future if we ever wanted to pass additional arguments.</div></div></div><br/>
<div><a id="1624739242.002500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1624739242.002500" ><div class="time">2021-06-26 20:27</div></a><div class="msg">Here's the MR to fix the problem: <a href="https://github.com/pact-foundation/pact-net/pull/302">https://github.com/pact-foundation/pact-net/pull/302</a></div></div></div><br/>
<div><a id="1624881808.000200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1624881808.000200" ><div class="time">2021-06-28 12:03</div></a><div class="msg">Hey @pact544 This is perfectly understandable from the consumer side.</div></div></div><br/>
<div><a id="1624882989.000400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1624882989.000400" ><div class="time">2021-06-28 12:23</div></a><div class="msg">I finished your review. Just a few comments :slightly_smiling_face:</div></div></div><br/>
<div><a id="1624883024.000600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1624883024.000600" ><div class="time">2021-06-28 12:23</div></a><div class="msg">Cool, I'll check it out, thanks!</div></div></div><br/>
<div><a id="1624884026.000900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1624884026.000900" ><div class="time">2021-06-28 12:40</div></a><div class="msg">I forgot about the Invoking (FluentAssertions). It's SOOO handy</div></div></div><br/>
<div><a id="1624884123.001100"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1624884123.001100" ><div class="time">2021-06-28 12:42</div></a><div class="msg">Nice work, @pact544! Looks like a good quality-of-life improvement for users</div></div></div><br/>
<div><a id="1624967009.002300"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1624967009.002300" ><div class="time">2021-06-29 11:43</div></a><div class="msg">Friends, I?ve made a start (locally) on a ?pact features? document, to record the things that are in each implementation. It?s quite small so far:

```$ cat pact-features.md


## Messages

Provider Verification
Provider verification with metadata
Consumer Tests
Consumer tests with matchers
Consumer tests with metadata```</div></div></div><br/>
<div><a id="1624967054.003000"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1624967054.003000" ><div class="time">2021-06-29 11:44</div></a><div class="msg">but, while going through the V3 upgrade it seems like a good time to take note of what is in a Pact implementation</div></div></div><br/>
<div><a id="1624967079.003600"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1624967079.003600" ><div class="time">2021-06-29 11:44</div></a><div class="msg">We don?t really have anything that tracks the different status of features in each framework</div></div></div><br/>
<div><a id="1624967627.003800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1624967627.003800" ><div class="time">2021-06-29 11:53</div></a><div class="msg">See also <a href="https://pact-foundation.slack.com/archives/C021XTMRKM1/p1622616027091900?thread_ts=1622459516.072500&amp;cid=C021XTMRKM1">https://pact-foundation.slack.com/archives/C021XTMRKM1/p1622616027091900?thread_ts=1622459516.072500&amp;cid=C021XTMRKM1</a></div></div></div><br/>
<div><a id="1624967692.004100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1624967692.004100" ><div class="time">2021-06-29 11:54</div></a><div class="msg">and <a href="https://pact-foundation.slack.com/archives/C021XTMRKM1/p1623483029005100">https://pact-foundation.slack.com/archives/C021XTMRKM1/p1623483029005100</a></div></div></div><br/>
<div><a id="1624994211.001300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1624994211.001300" ><div class="time">2021-06-29 19:16</div></a><div class="msg">I've merged the changes to the consumer tests API, thanks for reviews @yann.courtel and @tjones :thumbsup:</div></div></div><br/>
<div><a id="1625025160.000200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1625025160.000200" ><div class="time">2021-06-30 03:52</div></a><div class="msg">Greg - Tim is also based in Australia. Perhaps we can organise a call in the next few weeks to chat about this?</div></div></div><br/>
<div><a id="1625025194.000500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1625025194.000500" ><div class="time">2021-06-30 03:53</div></a><div class="msg">I just spoke to Tim, and we both think it would be a great addition to have documented. Even if we don?t yet implement (via tests), having the behaviour documented would be a really great start</div></div></div><br/>
<div><a id="1625038020.000800"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1625038020.000800" ><div class="time">2021-06-30 07:27</div></a><div class="msg">Thank you! I'll have the change onto my dev branch and hopefully I will have time today to do a PR also.</div></div></div><br/>
<div><a id="1625151976.003400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1625151976.003400" ><div class="time">2021-07-01 15:06</div></a><div class="msg">Hi everyone, I created a draft pull request for the messaging support :
<a href="https://github.com/pact-foundation/pact-net/pull/309">https://github.com/pact-foundation/pact-net/pull/309</a>

Can you have a look and see if anything jumps out?
Let me know also if something is not clear.

A couple of things might be left to do is to work on a middleware that is compatible with .net core app 1.0 and .net framework 4.6.
Right now the provider middleware for messaging is only compatible with netstandard2.0+

Another will be to run the tests with a netcoreapp1.0 framework. I haven't had time to work on that.

Thank you.</div></div></div><br/>
<div><a id="1625212817.003100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1625212817.003100" ><div class="time">2021-07-02 08:00</div></a><div class="msg">Hi everyone !
Question regarding a method of the FFI @matt.fellows and @uglyog
What is this method actually for ?
It seems to allow the writing of metadata from the message pact handle.

We do have then the normal message interaction metadata and the pact metadata where the pact specs and rust version are, is that correct ?</div></div></div><br/>
<div><a id="1625227165.003800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1625227165.003800" ><div class="time">2021-07-02 11:59</div></a><div class="msg">yeah. This is for adding extra data into the pact file</div></div></div><br/>
<div><a id="1625227312.004600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1625227312.004600" ><div class="time">2021-07-02 12:01</div></a><div class="msg">My initial thoughts were to add the details of the client library</div></div></div><br/>
<div><a id="1625227334.005000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1625227334.005000" ><div class="time">2021-07-02 12:02</div></a><div class="msg">e.g. perhaps `pactNet.version` would be good to have in there?</div></div></div><br/>
<div><a id="1625227351.005400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1625227351.005400" ><div class="time">2021-07-02 12:02</div></a><div class="msg">The metadata can be displayed into the pact broker, to help with bug diagnosis etc.</div></div></div><br/>
<div><a id="1625234542.005500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1625234542.005500" ><div class="time">2021-07-02 14:02</div></a><div class="msg">We actually initiate a PactV3 or in the Future PactV4 that will set the specifications automatically (with the WithSpecifications). So I think that would be redundant. I'll try adding another version just to see if it works though :)</div></div></div><br/>
<div><a id="1625268746.000100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1625268746.000100" ><div class="time">2021-07-02 23:32</div></a><div class="msg">It's not the spec version, it's the version of Pact .NET we'd put in there</div></div></div><br/>
<div><a id="1625268768.000300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1625268768.000300" ><div class="time">2021-07-02 23:32</div></a><div class="msg">The spec version is automatically added there by rust</div></div></div><br/>
<div><a id="1625268806.000500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1625268806.000500" ><div class="time">2021-07-02 23:33</div></a><div class="msg">We discussed also using it for feature flags(potentially language specific) and similar things</div></div></div><br/>
<div><a id="1625277974.000100"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1625277974.000100" ><div class="time">2021-07-03 02:06</div></a><div class="msg">Here is what Pact-JVM puts in there:
```"metadata": {
    "pact-jvm": {
      "version": "4.2.8"
    },
    "pactSpecification": {
      "version": "3.0.0"
    }
  }```
and Pact-JS V3
```"metadata": {
    "pactJs": {
      "version": "10.0.0-beta.33"
    },
    "pactRust": {
      "version": "0.8.11"
    },
    "pactSpecification": {
      "version": "3.0.0"
    }
  }```</div></div></div><br/>
<div><a id="1625278191.000300"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1625278191.000300" ><div class="time">2021-07-03 02:09</div></a><div class="msg">We can then show this info in UI (this is from Pactflow)</div></div></div><br/>
<div><a id="1625431839.004500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1625431839.004500" ><div class="time">2021-07-04 20:50</div></a><div class="msg">I've done a rather large (sorry :smile:) review of the message pact branch :thumbsup: Hopefully it's not too harsh! I think we need to change the API somewhat though in order to maintain consistency with the request/response pacts, and to use the type-state pattern so the user falls into the pit of success instead of allowing them to potentially make mistakes and us validate their actions afterwards.

I think we also need to revert any 'cosmetic' changes to make the diff easier to read (like removing `this.` or adding spaces in `using` declarations at the top). I very nearly missed some new code in the middle of a bunch of those cosmetic changes. We should generally agree a convention and stick with it so it's easier to navigate the codebase as a whole anyway I think. And obviously I think my preferences should be the default because I went first :stuck_out_tongue_closed_eyes::joy:</div></div></div><br/>
<div><a id="1625454975.004700"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1625454975.004700" ><div class="time">2021-07-05 03:16</div></a><div class="msg">adam, you're very cheeky. I suspect that Matt prefers we adopt the C# recommendations, which means the project never adopted some practices early on and now we have some cosmetic chagnes - but your right, they have cleverly masked other changes</div></div></div><br/>
<div><a id="1625469913.005100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1625469913.005100" ><div class="time">2021-07-05 07:25</div></a><div class="msg">Thank you very much for the large review! I agree with the leading the user to the path of success typing there request and managing invariants but how would you achieve that?

I agree with everything except the "And obviously I think my preferences should be the default because I went first" ^^
These cosmetic changes are resharper default considerations for most and I think we should stick to that and avoid any unnecessary code. (except the spacing in the using, I can revert that)
What I can agree with is to do it in another PR so we don't crowd this one. Therefore, we can talk about it later and decide and how we configure our IDE.

I'm going through all the changes so some answers will come through the PR :slightly_smiling_face: thanks again</div></div></div><br/>
<div><a id="1625469988.005400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1625469988.005400" ><div class="time">2021-07-05 07:26</div></a><div class="msg">Thanks @uglyog in .net, we actually append the rust version as well which is very useful.</div></div></div><br/>
<div><a id="1625470837.005800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1625470837.005800" ><div class="time">2021-07-05 07:40</div></a><div class="msg">&gt;  I agree with everything except the ?And obviously I think my preferences should be the default because I went first? ^^
:laughing:</div></div></div><br/>
<div><a id="1625470853.006000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1625470853.006000" ><div class="time">2021-07-05 07:40</div></a><div class="msg">I like that Greg suggested I had opinions here (I do, but not the ones you?re expecting probably)</div></div></div><br/>
<div><a id="1625470890.006300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1625470890.006300" ><div class="time">2021-07-05 07:41</div></a><div class="msg">My suggestion is to get the rules identified now, because once it?s merge into mainline, cosmetic refactors are a pain in the butt for git-blame etc. - e.g. now the last person who changed it didn?t really change it, they just made it pretty</div></div></div><br/>
<div><a id="1625471000.006600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1625471000.006600" ><div class="time">2021-07-05 07:43</div></a><div class="msg">&gt; Thank you very much for the large review! I agree with the leading the user to the path of success typing there request and managing invariants but how would you achieve that?
If you separate out the "things you can do to an interaction" into a separate interface, and the "start a new interaction" method return the first interface, then you are forced to start a new interaction before you can configure it. That means you don't need to validate "trying to configure an interaction before you've actually started it"</div></div></div><br/>
<div><a id="1625471126.006900"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1625471126.006900" ><div class="time">2021-07-05 07:45</div></a><div class="msg">So for the request/response style it's `IPactBuilder.UponReceiving` which returns `IRequestBuilder`, which has all the `WithPath`, `WithQuery` etc. That means you never need to validate that `WithQuery` isn't called before `UponReceiving`, because it's literally impossible to do that</div></div></div><br/>
<div><a id="1625471208.007100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1625471208.007100" ><div class="time">2021-07-05 07:46</div></a><div class="msg">So if you did like `IPactBuilder.ExpectsToReceive` which returns `IMessageBuilder` (or whatever it's called) then you can't get it wrong</div></div></div><br/>
<div><a id="1625472425.007500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1625472425.007500" ><div class="time">2021-07-05 08:07</div></a><div class="msg">Okay, so sticking with different level builders to avoid any invariant. I can prob do like that. The problem will come when we want to call the build method after the verify since it's another builder. I could always reference the parent builder in the sub-builder and see how it looks.</div></div></div><br/>
<div><a id="1625472674.007700"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1625472674.007700" ><div class="time">2021-07-05 08:11</div></a><div class="msg">@greg595au @matt.fellows Agree with the conventions. The questions is which conventions? :smile:
There are may out there =&gt; we could use the microsoft ones <a href="https://docs.microsoft.com/en-us/dotnet/standard/design-guidelines/naming-guidelines">https://docs.microsoft.com/en-us/dotnet/standard/design-guidelines/naming-guidelines</a>
Or we could adapt certain conventions to match our IDE...

What @pact544 was suggesting mainly (I think so ^^) was not to mix it with the messaging, that way, we can apply the new conventions in the feature/4.0.0 branch later on.

We should start a different thread to talk about it.</div></div></div><br/>
<div><a id="1625476704.008000"><img src="https://secure.gravatar.com/avatar/b06fdad31dc8b8491da545f87040fde6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0001-72.png" /></a><div class="message"><div class="username">greg595au</div><a style="text-decoration: none" href="#1625476704.008000" ><div class="time">2021-07-05 09:18</div></a><div class="msg">Yann - i think ur link points to this one: <a href="https://docs.microsoft.com/en-us/dotnet/csharp/fundamentals/coding-style/coding-conventions">https://docs.microsoft.com/en-us/dotnet/csharp/fundamentals/coding-style/coding-conventions</a></div></div></div><br/>
<div><a id="1625476801.008300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1625476801.008300" ><div class="time">2021-07-05 09:20</div></a><div class="msg">@greg595au that is the second sublink to the link I copied :slightly_smiling_face: since it's not just coding conventions but also namespace and so on.</div></div></div><br/>
<div><a id="1625565065.008500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1625565065.008500" ><div class="time">2021-07-06 09:51</div></a><div class="msg">Hey everyone :slightly_smiling_face: I looked at all the remarks you've sent @pact544. Some work to do which I will be doing mostly tomorrow. Some points I'm not 100% sure of yet but for most I can fix. Thank you again for the review.</div></div></div><br/>
<div><a id="1625565615.008700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1625565615.008700" ><div class="time">2021-07-06 10:00</div></a><div class="msg">:taco: :taco: for @yann.courtel</div></div></div><br/>
<div><a id="1625565619.008900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1625565619.008900" ><div class="time">2021-07-06 10:00</div></a><div class="msg">:taco: for @pact544</div></div></div><br/>
<div><a id="1625565624.009100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1625565624.009100" ><div class="time">2021-07-06 10:00</div></a><div class="msg">This is great</div></div></div><br/>
<div><a id="1625565633.009300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1625565633.009300" ><div class="time">2021-07-06 10:00</div></a><div class="msg">I have the code open now, and don?t know where to begin - so much stuff!</div></div></div><br/>
<div><a id="1625566219.009900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1625566219.009900" ><div class="time">2021-07-06 10:10</div></a><div class="msg">@pact544 saw this, and agree. It? seems strange to me that that?s not a thing.</div></div></div><br/>
<div><a id="1625566228.010400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1625566228.010400" ><div class="time">2021-07-06 10:10</div></a><div class="msg">Current state of that crate: <a href="https://github.com/env-logger-rs/env_logger/issues/113">https://github.com/env-logger-rs/env_logger/issues/113</a></div></div></div><br/>
<div><a id="1625566287.011300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1625566287.011300" ><div class="time">2021-07-06 10:11</div></a><div class="msg">See also <a href="https://github.com/pact-foundation/pact-reference/pull/119">https://github.com/pact-foundation/pact-reference/pull/119</a>. There is a new method to log into core, and another to initialise with the log level directly (rather than needing an env var to set it).</div></div></div><br/>
<div><a id="1625566296.011700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1625566296.011700" ><div class="time">2021-07-06 10:11</div></a><div class="msg">But it doesn?t allow you to change it after init</div></div></div><br/>
<div><a id="1625584778.012100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1625584778.012100" ><div class="time">2021-07-06 15:19</div></a><div class="msg">Yeah we'd need a static property on PactNet that you can set, and you'd have to set it before you did any work with the library at all (and probably throw an exception if someone does try to do that). We should raise it as a ticket to use the new core logging method :+1: Shouldn't be difficult once it's in an official pact-rs release</div></div></div><br/>
<div><a id="1625642503.012600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1625642503.012600" ><div class="time">2021-07-07 07:21</div></a><div class="msg">Always start by the tests :wink: the integration one, on the sample projects will give you a good idea.</div></div></div><br/>
<div><a id="1625843761.013800"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1625843761.013800" ><div class="time">2021-07-09 15:16</div></a><div class="msg">Hi everyone, sorry for the delay on the messaging, I had one of those weeks... I'll be back next Thursday to try to push the branch for end of next week! Enjoy your weekend.</div></div></div><br/>
<div><a id="1626175955.000200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1626175955.000200" ><div class="time">2021-07-13 11:32</div></a><div class="msg">cc: @elliottmurray</div></div></div><br/>
<div><a id="1626176046.000500"><img src="https://secure.gravatar.com/avatar/cd450b2d68eda3db907327277a40a7d9.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0016-72.png" /></a><div class="message"><div class="username">elliottmurray</div><a style="text-decoration: none" href="#1626176046.000500" ><div class="time">2021-07-13 11:34</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1626608022.000500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1626608022.000500" ><div class="time">2021-07-18 11:33</div></a><div class="msg">:wave: hey folks, just wanted to check-in to see how things have been traveling?</div></div></div><br/>
<div><a id="1626608051.001100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1626608051.001100" ><div class="time">2021-07-18 11:34</div></a><div class="msg">There?s been lots of activity in the code, which can be overwhelming for a <a href="http://non-.NET">http://non-.NET</a> person - but do reach out if there are spots that we can help guide etc.</div></div></div><br/>
<div><a id="1626608118.002400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1626608118.002400" ><div class="time">2021-07-18 11:35</div></a><div class="msg">Related to this, we?ll probably have the next Pactflow POST go out in the next week or two. It?s likely we?ll include Pact Go?s support for v3 has moved to beta to help drive some adoption.</div></div></div><br/>
<div><a id="1626608203.003800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1626608203.003800" ><div class="time">2021-07-18 11:36</div></a><div class="msg">I?m not sure if it makes sense to mention .NET just yet, I don?t believe it?s currently distributed to Nuget right? If you need any help with that, reach out as I do currently have access. But I know DiUS (my employer) is doing some work with a .NET client at the moment, and I?d love to get this in their hands to take it for a spin.</div></div></div><br/>
<div><a id="1626805166.002100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1626805166.002100" ><div class="time">2021-07-20 18:19</div></a><div class="msg">I was kinda waiting until the new combined FFI came out and then perhaps update the 4.0 branch to start using that instead. We're still a decent way from beta I think just because the logging support is behind where it used to be with the Ruby integration. In particular the verifier logging is lagging some way behind I think.

Other than that it's all the documentation and stuff that goes round it that all needs updating, and should be good to go.</div></div></div><br/>
<div><a id="1626823581.000400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1626823581.000400" ><div class="time">2021-07-20 23:26</div></a><div class="msg">The new FFI is out, ICYMI</div></div></div><br/>
<div><a id="1626823594.000600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1626823594.000600" ><div class="time">2021-07-20 23:26</div></a><div class="msg"><a href="https://github.com/pact-foundation/pact-reference/releases/tag/libpact_ffi-v0.0.0">https://github.com/pact-foundation/pact-reference/releases/tag/libpact_ffi-v0.0.0</a></div></div></div><br/>
<div><a id="1626823608.000900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1626823608.000900" ><div class="time">2021-07-20 23:26</div></a><div class="msg">I?ll probably take a look at it today for Pact Go, just to wrap my head around it</div></div></div><br/>
<div><a id="1627613169.000300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1627613169.000300" ><div class="time">2021-07-30 02:46</div></a><div class="msg">@erik.moller the v4 branch is currently here: <a href="https://github.com/pact-foundation/pact-net/tree/feature/4.0.0">https://github.com/pact-foundation/pact-net/tree/feature/4.0.0</a></div></div></div><br/>
<div><a id="1628585712.000200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1628585712.000200" ><div class="time">2021-08-10 08:55</div></a><div class="msg">Hey @pact544. Back from vacation :slightly_smiling_face: I saw your changes for the logging. I will check that out on the messaging branch right away.</div></div></div><br/>
<div><a id="1628587551.000500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1628587551.000500" ><div class="time">2021-08-10 09:25</div></a><div class="msg">I looked at your PR and it looks okay. Can we merge it and see if it works in the 4.0.0 branch? I'd like to verify it to the messaging branch. Thanks</div></div></div><br/>
<div><a id="1628610807.000700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1628610807.000700" ><div class="time">2021-08-10 15:53</div></a><div class="msg">Yeah we can merge if it works :+1: I've also been away for quite a long time so not sure if there's an updated core library with unified logging yet.</div></div></div><br/>
<div><a id="1628621201.001500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1628621201.001500" ><div class="time">2021-08-10 18:46</div></a><div class="msg">I'm making a start on moving the FFI over to the new combined FFI now. Wish me luck!</div></div></div><br/>
<div><a id="1628621637.001600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1628621637.001600" ><div class="time">2021-08-10 18:53</div></a><div class="msg">OK it's quite a bit different. This isn't going to be a quick one!</div></div></div><br/>
<div><a id="1628622190.001800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1628622190.001800" ><div class="time">2021-08-10 19:03</div></a><div class="msg">Argh, the file name structure has changed again (so Linux and OSX are called `libpact` whereas Windows is just called `pact` ). I think that breaks the download script :disappointed:</div></div></div><br/>
<div><a id="1628635019.002100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1628635019.002100" ><div class="time">2021-08-10 22:36</div></a><div class="msg">&gt;  OK it?s quite a bit different. This isn?t going to be a quick one!
I think the main difference is that they have prefixes (that discussion was ? _somewhere_)</div></div></div><br/>
<div><a id="1628635031.002300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1628635031.002300" ><div class="time">2021-08-10 22:37</div></a><div class="msg">But the name difference seems wrong</div></div></div><br/>
<div><a id="1628637064.002500"><img src="https://avatars.slack-edge.com/2019-08-26/740232217414_014b213119f6e40fa572_72.jpg" /></a><div class="message"><div class="username">uglyog</div><a style="text-decoration: none" href="#1628637064.002500" ><div class="time">2021-08-10 23:11</div></a><div class="msg">We can easily change that</div></div></div><br/>
<div><a id="1628703911.002700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1628703911.002700" ><div class="time">2021-08-11 17:45</div></a><div class="msg">Yeah sorry, I immediately jumped into the new iterators bit for verification failures and thought the old way had gone, but since found it.</div></div></div><br/>
<div><a id="1628703992.002900"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1628703992.002900" ><div class="time">2021-08-11 17:46</div></a><div class="msg">The name difference for the OSX library actually doesn't seem to matter - the tests pass on CI anyway</div></div></div><br/>
<div><a id="1628752306.003200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1628752306.003200" ><div class="time">2021-08-12 07:11</div></a><div class="msg">I approved it, go for merge.</div></div></div><br/>
<div><a id="1628752509.004800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1628752509.004800" ><div class="time">2021-08-12 07:15</div></a><div class="msg">@pact544 @yann.courtel FYI @edanielsen has just updated <a href="https://github.com/DiUS/pact-workshop-dotnet-core-v2">https://github.com/DiUS/pact-workshop-dotnet-core-v2</a> based on your branch! Very cool (we have pushed a build to a public artifactory so it can work).

I?ve yet to look at it, but just know that people are champing at the bit.

Also as you might have seen, the feedback for the new API has been :mwah:</div></div></div><br/>
<div><a id="1628752647.005100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1628752647.005100" ><div class="time">2021-08-12 07:17</div></a><div class="msg">Thanks a lot. That's a very nice repo here!</div></div></div><br/>
<div><a id="1628752714.005300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1628752714.005300" ><div class="time">2021-08-12 07:18</div></a><div class="msg">(for reference, it?s based off the previous workshop)</div></div></div><br/>
<div><a id="1628784190.007100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1628784190.007100" ><div class="time">2021-08-12 16:03</div></a><div class="msg">Oh nice :+1: yeah once we've got nice logging for both consumer and provider sides I think it's worth releasing a beta. Messaging support can be added soon after that I think, but nice to get the core stuff out.</div></div></div><br/>
<div><a id="1628844382.007300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1628844382.007300" ><div class="time">2021-08-13 08:46</div></a><div class="msg">I had a similar repository for our lib encapsulating pact-net. The good thing is to put different levels including as @pact544 pointed it out, an exercice with different interaction model such as messaging.</div></div></div><br/>
<div><a id="1628844433.007500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1628844433.007500" ><div class="time">2021-08-13 08:47</div></a><div class="msg">It can also serve as an integrated environment / solution to troubleshoot any issue we might have (related to how many tests on many classes we have)</div></div></div><br/>
<div><a id="1628848883.007700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1628848883.007700" ><div class="time">2021-08-13 10:01</div></a><div class="msg">exactly!</div></div></div><br/>
<div><a id="1628848887.007900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1628848887.007900" ><div class="time">2021-08-13 10:01</div></a><div class="msg">good idea</div></div></div><br/>
<div><a id="1629724034.009900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1629724034.009900" ><div class="time">2021-08-23 13:07</div></a><div class="msg">Hi everyone,

A PR to merge the consumer part of the messaging : <a href="https://github.com/pact-foundation/pact-net/pull/315">https://github.com/pact-foundation/pact-net/pull/315</a>

A lot of structural changes made it difficult to rebase so I split the consumer and provider part to be easier to review.

There should be minimal changes since it has been reviewed in the other PR here: <a href="https://github.com/pact-foundation/pact-net/pull/309">https://github.com/pact-foundation/pact-net/pull/309</a>

Thank you for your feedback.</div></div></div><br/>
<div><a id="1629724116.010300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1629724116.010300" ><div class="time">2021-08-23 13:08</div></a><div class="msg">We have a 100% Unit Tests cover on the new code. After the messaging, I will make a pass on the Unit and Integration Tests to achieve 100% overall coverage. Thanks</div></div></div><br/>
<div><a id="1629767091.011200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1629767091.011200" ><div class="time">2021-08-24 01:04</div></a><div class="msg">awesome work team</div></div></div><br/>
<div><a id="1629966687.003200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1629966687.003200" ><div class="time">2021-08-26 08:31</div></a><div class="msg">Hi everyone, hope all is well.

I think it may be time to have 'the talk'.
Yes, I'm talking about *coding and naming conventions* going forward :slightly_smiling_face:

For this, I'm thinking of making *a poll* with the different approach we could take.

I have many sources (online and first hand) that don't necessarily agree on which conventions are the best...
Microsoft : <a href="https://docs.microsoft.com/en-us/dotnet/csharp/fundamentals/coding-style/coding-conventions">https://docs.microsoft.com/en-us/dotnet/csharp/fundamentals/coding-style/coding-conventions</a>
DoFactory : <a href="https://www.dofactory.com/csharp-coding-standards">https://www.dofactory.com/csharp-coding-standards</a>
(to cite just a few)

I'll post it as soon as I have it. Thanks</div></div></div><br/>
<div><a id="1629970580.003400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1629970580.003400" ><div class="time">2021-08-26 09:36</div></a><div class="msg">I addressed all of your comments @pact544
For the sample app, we will find later an example with many messages. Maybe on a later PR. With one message for each message PACT, the metadata do appear! Might be a bug.
For the verifying the metadata on the consumer side comment, I don't know how you would do that...</div></div></div><br/>
<div><a id="1629971019.003900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1629971019.003900" ><div class="time">2021-08-26 09:43</div></a><div class="msg">Can't verify metadata on the consumer side, at least the others don't do it that I'm aware of</div></div></div><br/>
<div><a id="1629971290.004100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1629971290.004100" ><div class="time">2021-08-26 09:48</div></a><div class="msg">and actually it doesn't make sense when you think about it from a pact perspective. They are all going to be different from the type of messaging queue you are using. But one thing is for sure is that if your object has a different structure, your consumer should rightfully break.
In other words, you can switch the type of queue but if you have the same structure of the object, the pact should work.</div></div></div><br/>
<div><a id="1629975787.004500"><img src="https://secure.gravatar.com/avatar/a68542ba58871006f35019efd2577fca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png" /></a><div class="message"><div class="username">edanielsen</div><a style="text-decoration: none" href="#1629975787.004500" ><div class="time">2021-08-26 11:03</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1629976555.007800"><img src="https://secure.gravatar.com/avatar/a68542ba58871006f35019efd2577fca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png" /></a><div class="message"><div class="username">edanielsen</div><a style="text-decoration: none" href="#1629976555.007800" ><div class="time">2021-08-26 11:15</div></a><div class="msg">Hi guys, I might not be a major contributor going forward (though you never know), but I happen to be helping a client introducing pact at the moment (I work for DiUS, like some of the other folks here), and they happen to use .Net core mostly so when I find a missing feature I might just look at implementing it :smile:

I'll see if I can pitch in with some documentation help as well since I had to do some of that while putting together a dotnet workshop modelled on the JS one.

Awesome work on the 4.0.0 branch by the way, if it wasn't for that I don't think I would have gotten anywhere with <a href="http://Pact.Net">http://Pact.Net</a></div></div></div><br/>
<div><a id="1629976623.007900"><img src="https://secure.gravatar.com/avatar/a68542ba58871006f35019efd2577fca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png" /></a><div class="message"><div class="username">edanielsen</div><a style="text-decoration: none" href="#1629976623.007900" ><div class="time">2021-08-26 11:17</div></a><div class="msg">I should probably also say that I'm not a .Net developer (far from it), in fact I've never used it before, but I found it quite intuitive coming from a Java background.

Still, if you see me doing something weird it's probably because I don't know better</div></div></div><br/>
<div><a id="1629977747.008100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1629977747.008100" ><div class="time">2021-08-26 11:35</div></a><div class="msg">I reckon they would have guessed, given the swift feedback that  come through on that PR :slightly_smiling_face:</div></div></div><br/>
<div><a id="1630054553.008400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1630054553.008400" ><div class="time">2021-08-27 08:55</div></a><div class="msg">Awesome! Welcome (officially)! Don't worry Java developers tend to be pretty good at organizing their code base when they switch to C# from my modest experience. Good to have you.</div></div></div><br/>
<div><a id="1630480387.011600"><img src="https://secure.gravatar.com/avatar/a68542ba58871006f35019efd2577fca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png" /></a><div class="message"><div class="username">edanielsen</div><a style="text-decoration: none" href="#1630480387.011600" ><div class="time">2021-09-01 07:13</div></a><div class="msg">While filling in the missing bits in the workshop (<a href="https://github.com/DiUS/pact-workshop-dotnet-core-v3">https://github.com/DiUS/pact-workshop-dotnet-core-v3</a>) after the header matching has been merged I came across this open issue when wanting to convert the `request filtering` functionality from the JS workshop (<a href="https://github.com/pact-foundation/pact-workshop-js/tree/step10#:~:text=step%2010%3A%20request%20filters">https://github.com/pact-foundation/pact-workshop-js/tree/step10#:~:text=step%2010%3A%20request%20filters</a>):

<a href="https://github.com/pact-foundation/pact-net/issues/216">https://github.com/pact-foundation/pact-net/issues/216</a>

Is there still no plan to support request filtering within the framework? If not I can show an example in the workshop using middleware as an alternative</div></div></div><br/>
<div><a id="1630486011.012300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1630486011.012300" ><div class="time">2021-09-01 08:46</div></a><div class="msg">Should be much easier to support now the provider state handler code is there</div></div></div><br/>
<div><a id="1630496508.012900"><img src="https://secure.gravatar.com/avatar/a68542ba58871006f35019efd2577fca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png" /></a><div class="message"><div class="username">edanielsen</div><a style="text-decoration: none" href="#1630496508.012900" ><div class="time">2021-09-01 11:41</div></a><div class="msg">Now doing this for the workshop as an example, please let me know if anyone has a better idea:

```using System;
using System.Threading.Tasks;
using Microsoft.AspNetCore.Http;
using Microsoft.Extensions.Primitives;

namespace tests.Middleware
{
    public class AuthTokenRequestFilter
    {
        private const string AuthorizationHeaderKey = "Authorization";
        private readonly RequestDelegate _next;

        public AuthTokenRequestFilter(RequestDelegate next)
        {
            _next = next;
        }

        public async Task Invoke(HttpContext context)
        {
            if (context.Request.Headers.ContainsKey(AuthorizationHeaderKey))
            {
                context.Request.Headers.Remove(AuthorizationHeaderKey);
                context.Request.Headers.Add(AuthorizationHeaderKey, HeaderValue());
            }
            await this._next(context);
        }

        private StringValues HeaderValue()
        {
            return $"Bearer {DateTime.Now:yyyy-MM-ddTHH:mm:ss.fffZ}";
        }
    }
}```</div></div></div><br/>
<div><a id="1630496550.013300"><img src="https://secure.gravatar.com/avatar/a68542ba58871006f35019efd2577fca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png" /></a><div class="message"><div class="username">edanielsen</div><a style="text-decoration: none" href="#1630496550.013300" ><div class="time">2021-09-01 11:42</div></a><div class="msg">Never mind the token value, it's not built for security :smile:</div></div></div><br/>
<div><a id="1630497342.013400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1630497342.013400" ><div class="time">2021-09-01 11:55</div></a><div class="msg">It's pretty good! I believe we have this one in the sample provider application. I'll see if we can put it in its own project with the provider states middleware.</div></div></div><br/>
<div><a id="1630497477.013600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1630497477.013600" ><div class="time">2021-09-01 11:57</div></a><div class="msg">Are you familiar with the idea of request filters in other languages?</div></div></div><br/>
<div><a id="1630497534.013800"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1630497534.013800" ><div class="time">2021-09-01 11:58</div></a><div class="msg">like this one @matt.fellows?
<a href="https://docs.microsoft.com/en-us/aspnet/core/mvc/controllers/filters?view=aspnetcore-5.0">https://docs.microsoft.com/en-us/aspnet/core/mvc/controllers/filters?view=aspnetcore-5.0</a></div></div></div><br/>
<div><a id="1630497641.014100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1630497641.014100" ><div class="time">2021-09-01 12:00</div></a><div class="msg">Typically an ActionFilter will run some code before the actual code mapped to the request is done... Used for logging, security or any cross-concern algorithm. Is that what you meant?</div></div></div><br/>
<div><a id="1630497660.014300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1630497660.014300" ><div class="time">2021-09-01 12:01</div></a><div class="msg">pretty similar, but more ?pact? specific</div></div></div><br/>
<div><a id="1630497661.014500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1630497661.014500" ><div class="time">2021-09-01 12:01</div></a><div class="msg"><a href="https://github.com/pact-foundation/pact-js#modify-requests-prior-to-verification-request-filters">https://github.com/pact-foundation/pact-js#modify-requests-prior-to-verification-request-filters</a></div></div></div><br/>
<div><a id="1630497665.014800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1630497665.014800" ><div class="time">2021-09-01 12:01</div></a><div class="msg">Java has it also</div></div></div><br/>
<div><a id="1630497691.015100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1630497691.015100" ><div class="time">2021-09-01 12:01</div></a><div class="msg">basically, it lets you manipulate the req/res during verification (rather than having to create a separate middleware and configure it onto your application)</div></div></div><br/>
<div><a id="1630497705.015500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1630497705.015500" ><div class="time">2021-09-01 12:01</div></a><div class="msg">under the hood, i?ve implemented it as middleware anyway because in JS/Go that?s super easy.</div></div></div><br/>
<div><a id="1630497739.015800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1630497739.015800" ><div class="time">2021-09-01 12:02</div></a><div class="msg">I assume it?s possible in .NET, but there would need to be other infra there to support it. I?m assuming your provider states handler does some similar magic (e.g. running a proxy behind the scenes)?</div></div></div><br/>
<div><a id="1630497809.017300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1630497809.017300" ><div class="time">2021-09-01 12:03</div></a><div class="msg">yeah, middleware and custom filter attribute address similar issues but on different level of the workflow. The provider state middleware in the sample app does all the magic, that's true ^^</div></div></div><br/>
<div><a id="1630497824.017800"><img src="https://secure.gravatar.com/avatar/a68542ba58871006f35019efd2577fca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png" /></a><div class="message"><div class="username">edanielsen</div><a style="text-decoration: none" href="#1630497824.017800" ><div class="time">2021-09-01 12:03</div></a><div class="msg">Didn't want to derail the chat there but @yann.courtel said `I'll see if we can put it in its own project with the provider states middleware.`
Does this mean that the provider state middleware will be embedded into the <a href="http://Pact.Net">http://Pact.Net</a> library? If so that's a win.

One of the comments I got from the client I used the 4.0.0 branch with was that it felt like a lot of boilerplate having to include that kind of code as part of the test implementation</div></div></div><br/>
<div><a id="1630497893.018900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1630497893.018900" ><div class="time">2021-09-01 12:04</div></a><div class="msg">&gt;  Does this mean that the provider state middleware will be embedded into the<a href="http://Pact.Net">http://Pact.Net</a>library? If so that?s a win.
That actually is not a terrible idea. Does that imply though that all web frameworks use the same underlying APIs or does that only service certain users that use certain frameworks?</div></div></div><br/>
<div><a id="1630497912.019000"><img src="https://secure.gravatar.com/avatar/a68542ba58871006f35019efd2577fca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png" /></a><div class="message"><div class="username">edanielsen</div><a style="text-decoration: none" href="#1630497912.019000" ><div class="time">2021-09-01 12:05</div></a><div class="msg">e.g. having a base class that can be extended to implement the actual state setup and avoid the request path checking bit would be good</div></div></div><br/>
<div><a id="1630497927.019200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1630497927.019200" ><div class="time">2021-09-01 12:05</div></a><div class="msg">We actually spoke during a PR about the messaging with @pact544 to have the messaging middleware (the component used to simulate messages) in its own project. But nothing stops us from adding other middleware, pact related, such as the provider state middleware used by the provider sample app.</div></div></div><br/>
<div><a id="1630498000.019500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1630498000.019500" ><div class="time">2021-09-01 12:06</div></a><div class="msg">That will be a challenge... because middleware definitions are not the same based on the framework version... I need to see how it goes with the messaging middleware and will let you know.</div></div></div><br/>
<div><a id="1630498007.019700"><img src="https://secure.gravatar.com/avatar/a68542ba58871006f35019efd2577fca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png" /></a><div class="message"><div class="username">edanielsen</div><a style="text-decoration: none" href="#1630498007.019700" ><div class="time">2021-09-01 12:06</div></a><div class="msg">Any code that has to be written every time, if it can be provided as part of the library, will increase uptake of <a href="http://Pact.Net">http://Pact.Net</a> I think. Makes it look cleaner and simpler</div></div></div><br/>
<div><a id="1630498086.020200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1630498086.020200" ><div class="time">2021-09-01 12:08</div></a><div class="msg">I think I understand now, I must have misinterpreted the example code I saw</div></div></div><br/>
<div><a id="1630498118.020600"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1630498118.020600" ><div class="time">2021-09-01 12:08</div></a><div class="msg">Yeah it'd have to be a totally separate package because it depends on the web framework used, and we can't dictate that to users</div></div></div><br/>
<div><a id="1630498141.021100"><img src="https://secure.gravatar.com/avatar/a68542ba58871006f35019efd2577fca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png" /></a><div class="message"><div class="username">edanielsen</div><a style="text-decoration: none" href="#1630498141.021100" ><div class="time">2021-09-01 12:09</div></a><div class="msg">Also @matt.fellows I forgot to show how it's wired in:

```        public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
        {
            app.UseMiddleware&lt;ProviderStateMiddleware&gt;();
            app.UseMiddleware&lt;AuthTokenRequestFilter&gt;();
            _proxy.Configure(app, env);
        }```
</div></div></div><br/>
<div><a id="1630498157.021500"><img src="https://secure.gravatar.com/avatar/a68542ba58871006f35019efd2577fca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png" /></a><div class="message"><div class="username">edanielsen</div><a style="text-decoration: none" href="#1630498157.021500" ><div class="time">2021-09-01 12:09</div></a><div class="msg">So it's injected into the request handling pipeline</div></div></div><br/>
<div><a id="1630498184.022000"><img src="https://secure.gravatar.com/avatar/a68542ba58871006f35019efd2577fca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png" /></a><div class="message"><div class="username">edanielsen</div><a style="text-decoration: none" href="#1630498184.022000" ><div class="time">2021-09-01 12:09</div></a><div class="msg">This is for the test app, the actual app under test is the `_proxy`</div></div></div><br/>
<div><a id="1630498187.022100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1630498187.022100" ><div class="time">2021-09-01 12:09</div></a><div class="msg">You'd have to have like a PactNet.AspNetCore with the middleware and some extension methods for registering it</div></div></div><br/>
<div><a id="1630498209.022400"><img src="https://secure.gravatar.com/avatar/a68542ba58871006f35019efd2577fca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png" /></a><div class="message"><div class="username">edanielsen</div><a style="text-decoration: none" href="#1630498209.022400" ><div class="time">2021-09-01 12:10</div></a><div class="msg">which is badly named, it should be the other way around :smile:</div></div></div><br/>
<div><a id="1630498277.022800"><img src="https://secure.gravatar.com/avatar/a68542ba58871006f35019efd2577fca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png" /></a><div class="message"><div class="username">edanielsen</div><a style="text-decoration: none" href="#1630498277.022800" ><div class="time">2021-09-01 12:11</div></a><div class="msg">Ok, this is where I'm far from a .Net expert</div></div></div><br/>
<div><a id="1630498347.023000"><img src="https://secure.gravatar.com/avatar/a68542ba58871006f35019efd2577fca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png" /></a><div class="message"><div class="username">edanielsen</div><a style="text-decoration: none" href="#1630498347.023000" ><div class="time">2021-09-01 12:12</div></a><div class="msg">Makes sense @pact544, these are optional extras depending on your environment</div></div></div><br/>
<div><a id="1630498493.023400"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1630498493.023400" ><div class="time">2021-09-01 12:14</div></a><div class="msg">It's a harder problem than it seems on the face of it as well - like what if you want your provider state handler to create some classes (e.g. use your data source class to insert some db data). Now you need to worry about things like dependency injection frameworks as well</div></div></div><br/>
<div><a id="1630498503.023600"><img src="https://secure.gravatar.com/avatar/a68542ba58871006f35019efd2577fca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png" /></a><div class="message"><div class="username">edanielsen</div><a style="text-decoration: none" href="#1630498503.023600" ><div class="time">2021-09-01 12:15</div></a><div class="msg">Doesn't sound like an MVP feature then</div></div></div><br/>
<div><a id="1630499353.023800"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1630499353.023800" ><div class="time">2021-09-01 12:29</div></a><div class="msg">With an extensions method to simplify the registering :)</div></div></div><br/>
<div><a id="1632152579.003800"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632152579.003800" ><div class="time">2021-09-20 15:42</div></a><div class="msg">Hi everyone! Sorry for having so little bandwidth the last few weeks. It has been very hectic to be able to work more than one hour at once.

I'm having a very last problem before sending a PR for the messaging provider.

Everything is fine when I verify the messaging consumer contract in debug with the CLI command (using the ffi from the pact-reference repo).
But everything breaks when I do it with the code.
The command arguments are the same, the contract is the same, the middleware is the same and the scenario invocation is the same.

Is there something that can be drastically different between the CLI and the code integration? ... I'm pretty stuck.
Thanks a lot.</div></div></div><br/>
<div><a id="1632188090.000200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632188090.000200" ><div class="time">2021-09-21 01:34</div></a><div class="msg">Strange</div></div></div><br/>
<div><a id="1632188096.000400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632188096.000400" ><div class="time">2021-09-21 01:34</div></a><div class="msg">are you newline delimiting each argument (and value)?</div></div></div><br/>
<div><a id="1632188102.000600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632188102.000600" ><div class="time">2021-09-21 01:35</div></a><div class="msg">Any logs you can share would also be great</div></div></div><br/>
<div><a id="1632194004.000800"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1632194004.000800" ><div class="time">2021-09-21 03:13</div></a><div class="msg">Which methods are you using from the code?</div></div></div><br/>
<div><a id="1632211555.001000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632211555.001000" ><div class="time">2021-09-21 08:05</div></a><div class="msg">The arguments are the same, I don't think it's the formatting. I checked what was sent to the CLI. Plus it's a verification problem.
I have two options:
1) the middleware somehow is not registered the same way in my test sample project
2) the change from newtonsoft to system.text.json triggers an underlying error</div></div></div><br/>
<div><a id="1632223966.001200"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1632223966.001200" ><div class="time">2021-09-21 11:32</div></a><div class="msg">You could try the verifier from pact-js to see if it's the FFI or python?</div></div></div><br/>
<div><a id="1632224261.001400"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1632224261.001400" ><div class="time">2021-09-21 11:37</div></a><div class="msg">We use `pactffi_verify` in v0.0.1 of libpact_ffi</div></div></div><br/>
<div><a id="1632227701.001600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632227701.001600" ><div class="time">2021-09-21 12:35</div></a><div class="msg">I guess I could try that. Thx</div></div></div><br/>
<div><a id="1632234696.001800"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1632234696.001800" ><div class="time">2021-09-21 14:31</div></a><div class="msg">It's in beta, so you'd need `v10.0.0-beta.45` or later. Let me know if you want a hand setting it up</div></div></div><br/>
<div><a id="1632240078.002000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632240078.002000" ><div class="time">2021-09-21 16:01</div></a><div class="msg">I narrowed it down to one thing. The ffi dll is just not behaving the same way as the CLI... I don't see any other explanation...</div></div></div><br/>
<div><a id="1632297285.000100"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1632297285.000100" ><div class="time">2021-09-22 07:54</div></a><div class="msg">Are they built from different versions of the source?</div></div></div><br/>
<div><a id="1632297901.000300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632297901.000300" ><div class="time">2021-09-22 08:05</div></a><div class="msg">I don't think so. I will push what I have and hope we could sort out the verifier console issue because without the exact error, it's very hard to debug.</div></div></div><br/>
<div><a id="1632297953.000500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632297953.000500" ><div class="time">2021-09-22 08:05</div></a><div class="msg">Is there a log or error you?re getting? Or just a crash?</div></div></div><br/>
<div><a id="1632297963.000700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632297963.000700" ><div class="time">2021-09-22 08:06</div></a><div class="msg">If you can share what your code sends, I could try and eyeball</div></div></div><br/>
<div><a id="1632298000.001000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298000.001000" ><div class="time">2021-09-22 08:06</div></a><div class="msg">we currently have just an error code saying it's a verification problem. The same issue we've talked about with Adam regarding the verifier console not being caught by the program</div></div></div><br/>
<div><a id="1632298047.001200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632298047.001200" ><div class="time">2021-09-22 08:07</div></a><div class="msg">can you run from the console then so we get it?</div></div></div><br/>
<div><a id="1632298059.001400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632298059.001400" ><div class="time">2021-09-22 08:07</div></a><div class="msg">that issue is only present when run from an IDE</div></div></div><br/>
<div><a id="1632298076.001600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298076.001600" ><div class="time">2021-09-22 08:07</div></a><div class="msg">correct, I haven't tried with the latest version. Let me see</div></div></div><br/>
<div><a id="1632298103.001800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632298103.001800" ><div class="time">2021-09-22 08:08</div></a><div class="msg">I don?t think the latest verifier will fix that</div></div></div><br/>
<div><a id="1632298114.002000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632298114.002000" ><div class="time">2021-09-22 08:08</div></a><div class="msg">I?m asking if you can run the test from your terminal so that we can see the logs/output</div></div></div><br/>
<div><a id="1632298313.002300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298313.002300" ><div class="time">2021-09-22 08:11</div></a><div class="msg">I was referring to the latest version of my code. I have tried running dotnet test before. Here is the console that runs the dll</div></div></div><br/>
<div><a id="1632298336.002700"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298336.002700" ><div class="time">2021-09-22 08:12</div></a><div class="msg">(sorry for the French... my machine has to be in Fr)</div></div></div><br/>
<div><a id="1632298421.003000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632298421.003000" ><div class="time">2021-09-22 08:13</div></a><div class="msg">hmm i?d expect to see the output from the verifier - do you ever get verifier output from the terminal?</div></div></div><br/>
<div><a id="1632298441.003200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298441.003200" ><div class="time">2021-09-22 08:14</div></a><div class="msg">nope, that's an issue</div></div></div><br/>
<div><a id="1632298445.003400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632298445.003400" ><div class="time">2021-09-22 08:14</div></a><div class="msg">that</div></div></div><br/>
<div><a id="1632298450.003600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632298450.003600" ><div class="time">2021-09-22 08:14</div></a><div class="msg">should definitely work</div></div></div><br/>
<div><a id="1632298473.003800"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298473.003800" ><div class="time">2021-09-22 08:14</div></a><div class="msg">And this is the CLI command (the same as in the code)</div></div></div><br/>
<div><a id="1632298476.004200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632298476.004200" ><div class="time">2021-09-22 08:14</div></a><div class="msg">when I run this workshop locally (via terminal) I definitely see verifier output: <a href="https://github.com/DiUS/pact-workshop-dotnet-core-v3/blob/master/Provider/tests/ProductTest.cs#L35">https://github.com/DiUS/pact-workshop-dotnet-core-v3/blob/master/Provider/tests/ProductTest.cs#L35</a></div></div></div><br/>
<div><a id="1632298493.004500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298493.004500" ><div class="time">2021-09-22 08:14</div></a><div class="msg">Verification is good</div></div></div><br/>
<div><a id="1632298514.004900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632298514.004900" ><div class="time">2021-09-22 08:15</div></a><div class="msg">well, that?s a positive!!</div></div></div><br/>
<div><a id="1632298527.005200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298527.005200" ><div class="time">2021-09-22 08:15</div></a><div class="msg">I know, at least there is that</div></div></div><br/>
<div><a id="1632298552.005400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298552.005400" ><div class="time">2021-09-22 08:15</div></a><div class="msg">ok, true, I'm going to try to tweak it the way Erik did</div></div></div><br/>
<div><a id="1632298566.005800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632298566.005800" ><div class="time">2021-09-22 08:16</div></a><div class="msg">ok, I assumed that did help?somehow</div></div></div><br/>
<div><a id="1632298574.006000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298574.006000" ><div class="time">2021-09-22 08:16</div></a><div class="msg">the xunit output is well configured</div></div></div><br/>
<div><a id="1632298577.006200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632298577.006200" ><div class="time">2021-09-22 08:16</div></a><div class="msg">my first inclination is that spaces are the problem</div></div></div><br/>
<div><a id="1632298595.006500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298595.006500" ><div class="time">2021-09-22 08:16</div></a><div class="msg">something must be obviously wrong with the way it's set up in the test :slightly_smiling_face: that would be a relief</div></div></div><br/>
<div><a id="1632298608.006700"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298608.006700" ><div class="time">2021-09-22 08:16</div></a><div class="msg">hm... the spaces in the command?</div></div></div><br/>
<div><a id="1632298652.007000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632298652.007000" ><div class="time">2021-09-22 08:17</div></a><div class="msg">no, the arguments</div></div></div><br/>
<div><a id="1632298664.007200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632298664.007200" ><div class="time">2021-09-22 08:17</div></a><div class="msg">e.g. ?Event API Consumer V3?</div></div></div><br/>
<div><a id="1632298675.007400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632298675.007400" ><div class="time">2021-09-22 08:17</div></a><div class="msg">without output visibility, it?s just a guess</div></div></div><br/>
<div><a id="1632298676.007600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298676.007600" ><div class="time">2021-09-22 08:17</div></a><div class="msg">ah! yep I thought so...</div></div></div><br/>
<div><a id="1632298696.007800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632298696.007800" ><div class="time">2021-09-22 08:18</div></a><div class="msg">but an educated one. spaces, special characters etc. are often problematic</div></div></div><br/>
<div><a id="1632298712.008000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298712.008000" ><div class="time">2021-09-22 08:18</div></a><div class="msg">but it's not that, the other sample API works and has spacing and uses the same verifier class</div></div></div><br/>
<div><a id="1632298718.008200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298718.008200" ><div class="time">2021-09-22 08:18</div></a><div class="msg">the http one</div></div></div><br/>
<div><a id="1632298749.008500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298749.008500" ><div class="time">2021-09-22 08:19</div></a><div class="msg">and it doesn't seem to be the json serialisation, I double checked</div></div></div><br/>
<div><a id="1632298795.008700"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298795.008700" ><div class="time">2021-09-22 08:19</div></a><div class="msg">but you are helping :slightly_smiling_face:</div></div></div><br/>
<div><a id="1632298800.008900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632298800.008900" ><div class="time">2021-09-22 08:20</div></a><div class="msg">:disappointed:</div></div></div><br/>
<div><a id="1632298857.009100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632298857.009100" ><div class="time">2021-09-22 08:20</div></a><div class="msg">So, do you know if the verifier starts communicating to your framework? Or does it fail before invoking your verification code?</div></div></div><br/>
<div><a id="1632298921.009300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298921.009300" ><div class="time">2021-09-22 08:22</div></a><div class="msg">:open_mouth:</div></div></div><br/>
<div><a id="1632298942.009500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298942.009500" ><div class="time">2021-09-22 08:22</div></a><div class="msg">break through... I tried with the old pact json file on my other branch and it works!</div></div></div><br/>
<div><a id="1632298954.009700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632298954.009700" ><div class="time">2021-09-22 08:22</div></a><div class="msg">hah</div></div></div><br/>
<div><a id="1632298977.009900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632298977.009900" ><div class="time">2021-09-22 08:22</div></a><div class="msg">I have to go get dinner on for kids etc., but if you wanted to pop the before/after JSON can take a look</div></div></div><br/>
<div><a id="1632298979.010100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298979.010100" ><div class="time">2021-09-22 08:22</div></a><div class="msg">it's either a metadata problem, the rust version or the matchers...</div></div></div><br/>
<div><a id="1632298994.010300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298994.010300" ><div class="time">2021-09-22 08:23</div></a><div class="msg">no I can look. Thanks a lot! That helped</div></div></div><br/>
<div><a id="1632298997.010500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632298997.010500" ><div class="time">2021-09-22 08:23</div></a><div class="msg">enjoy your dinner :slightly_smiling_face:</div></div></div><br/>
<div><a id="1632299018.010700"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632299018.010700" ><div class="time">2021-09-22 08:23</div></a><div class="msg">I'll keep you updated and try to push something today</div></div></div><br/>
<div><a id="1632299021.010900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632299021.010900" ><div class="time">2021-09-22 08:23</div></a><div class="msg">Thank you again</div></div></div><br/>
<div><a id="1632299239.011100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632299239.011100" ><div class="time">2021-09-22 08:27</div></a><div class="msg">you?re welcome!</div></div></div><br/>
<div><a id="1632299276.011300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632299276.011300" ><div class="time">2021-09-22 08:27</div></a><div class="msg">it's the metadata... in one pact, there was metadata, in the other not... but why the CLI didn't catch it... very strange</div></div></div><br/>
<div><a id="1632299792.011500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632299792.011500" ><div class="time">2021-09-22 08:36</div></a><div class="msg">:man-shrugging:</div></div></div><br/>
<div><a id="1632299809.011700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632299809.011700" ><div class="time">2021-09-22 08:36</div></a><div class="msg">is it the absence or presence of metadata causing issues ?</div></div></div><br/>
<div><a id="1632299822.011900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632299822.011900" ><div class="time">2021-09-22 08:37</div></a><div class="msg">the presence</div></div></div><br/>
<div><a id="1632299843.012100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632299843.012100" ><div class="time">2021-09-22 08:37</div></a><div class="msg">ah, which metadata - message metadata or pact file metadata? :laughing:</div></div></div><br/>
<div><a id="1632299881.012300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632299881.012300" ><div class="time">2021-09-22 08:38</div></a><div class="msg">but that makes sense, at the moment I push an object by the messaging middleware and to be able to put metadata, I need to think in where to put it ^^</div></div></div><br/>
<div><a id="1632299887.012500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632299887.012500" ><div class="time">2021-09-22 08:38</div></a><div class="msg">message metadata</div></div></div><br/>
<div><a id="1632300163.012700"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632300163.012700" ><div class="time">2021-09-22 08:42</div></a><div class="msg">well! A new thing to figure out!</div></div></div><br/>
<div><a id="1632302152.012900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632302152.012900" ><div class="time">2021-09-22 09:15</div></a><div class="msg">I found this snippet in the FFI project.

Can someone explain to me please how the metadata is actually extracted? I see it's getting something from the header of the request but I must not have the good formatting.

Trying to force to add header info until it works.
Any thought @uglyog? Thanks a lot</div></div></div><br/>
<div><a id="1632302756.013300"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1632302756.013300" ><div class="time">2021-09-22 09:25</div></a><div class="msg">Ah right, there's some docs on this somewhere</div></div></div><br/>
<div><a id="1632302834.013500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632302834.013500" ><div class="time">2021-09-22 09:27</div></a><div class="msg">For now, it seems doing something along these lines might be the answer. Formatting is not right though</div></div></div><br/>
<div><a id="1632302848.013900"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1632302848.013900" ><div class="time">2021-09-22 09:27</div></a><div class="msg">```      // Invoke the handler, and return the JSON response body
      // wrapped in a Message
      this.setupStates(message)
        .then(() =&gt; this.findHandler(message))
        .then((handler) =&gt; handler(message))

        .then((messageFromHandler) =&gt; {
          if (hasMetadata(messageFromHandler)) {
            const metadata = encodeBase64(
              JSON.stringify(messageFromHandler.__pactMessageMetadata)
            );
            res.header('Pact-Message-Metadata', metadata);
            res.header('PACT_MESSAGE_METADATA', metadata);

            return res.json(messageFromHandler.message);
          }
          return res.json(messageFromHandler);
        })```</div></div></div><br/>
<div><a id="1632302862.014100"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1632302862.014100" ><div class="time">2021-09-22 09:27</div></a><div class="msg">This is what we do. I can't remember where it's documented, sorry.</div></div></div><br/>
<div><a id="1632302885.014400"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1632302885.014400" ><div class="time">2021-09-22 09:28</div></a><div class="msg">`Pact-Message-Metadata` &lt;-- you only need this header, the capital one is from an older version</div></div></div><br/>
<div><a id="1632302889.014600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632302889.014600" ><div class="time">2021-09-22 09:28</div></a><div class="msg">that's exactly that</div></div></div><br/>
<div><a id="1632302914.014800"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632302914.014800" ><div class="time">2021-09-22 09:28</div></a><div class="msg">but I believe it doesn't matter since it compares after doing a to_lower_case</div></div></div><br/>
<div><a id="1632302924.015000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632302924.015000" ><div class="time">2021-09-22 09:28</div></a><div class="msg">but serializing a dynamic object might work! let me try</div></div></div><br/>
<div><a id="1632302926.015200"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1632302926.015200" ><div class="time">2021-09-22 09:28</div></a><div class="msg">it does, because `_` and `-`</div></div></div><br/>
<div><a id="1632302967.015400"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1632302967.015400" ><div class="time">2021-09-22 09:29</div></a><div class="msg">I don't speak .NET very well any more, but it looks like your version needs the `encodeBase64`</div></div></div><br/>
<div><a id="1632303022.015600"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1632303022.015600" ><div class="time">2021-09-22 09:30</div></a><div class="msg">You're right that the casing shouldn't matter. I should lower case ours, so it matches the string in the rust source, for better searchability later</div></div></div><br/>
<div><a id="1632303057.015900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632303057.015900" ><div class="time">2021-09-22 09:30</div></a><div class="msg">Thanks @tjones Have a few things to try</div></div></div><br/>
<div><a id="1632303065.016100"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1632303065.016100" ><div class="time">2021-09-22 09:31</div></a><div class="msg">Awesome!</div></div></div><br/>
<div><a id="1632303115.016300"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1632303115.016300" ><div class="time">2021-09-22 09:31</div></a><div class="msg">I'll get you a link to this bit in our source in case there's surrounding context that's useful</div></div></div><br/>
<div><a id="1632303148.016500"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1632303148.016500" ><div class="time">2021-09-22 09:32</div></a><div class="msg"><a href="https://github.com/pact-foundation/pact-js/blob/feat/v3.0.0/src/messageProviderPact.ts#L120">https://github.com/pact-foundation/pact-js/blob/feat/v3.0.0/src/messageProviderPact.ts#L120</a></div></div></div><br/>
<div><a id="1632303253.016700"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1632303253.016700" ><div class="time">2021-09-22 09:34</div></a><div class="msg">That part of the code could be more straightforward. It was written as a hack when we only had the spec v2 verifier. Let me know if you have questions that you can't answer easily - 5 mins of my time could save you much more of yours.</div></div></div><br/>
<div><a id="1632303278.016900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632303278.016900" ><div class="time">2021-09-22 09:34</div></a><div class="msg">That does help. Thanks a lot</div></div></div><br/>
<div><a id="1632304859.017300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632304859.017300" ><div class="time">2021-09-22 10:00</div></a><div class="msg">wow! it now works!
Strangest thing in a while
When I put 'pact-message-metadata' exactly like the one in the ffi it doesn't work. When I paste your code @tjones , as in PACT_MESSAGE_METADATA it does work!</div></div></div><br/>
<div><a id="1632304897.017700"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632304897.017700" ><div class="time">2021-09-22 10:01</div></a><div class="msg">thanks a lot @tjones for your snippet. I could have spent another day trying to figure that one out!</div></div></div><br/>
<div><a id="1632306455.017900"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1632306455.017900" ><div class="time">2021-09-22 10:27</div></a><div class="msg">Welcome! If you're using the FFI v0.0.0 (or possibly v0.0.1) then it's the capitalised one with underscores</div></div></div><br/>
<div><a id="1632309794.018100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632309794.018100" ><div class="time">2021-09-22 11:23</div></a><div class="msg">Sorry, was doing the whole kids dinner/shower/bed/cleanup/passout routine</div></div></div><br/>
<div><a id="1632309799.018300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632309799.018300" ><div class="time">2021-09-22 11:23</div></a><div class="msg">:point_right: <a href="https://github.com/pact-foundation/pact-reference/tree/master/rust/pact_verifier_cli#verifying-metadata">https://github.com/pact-foundation/pact-reference/tree/master/rust/pact_verifier_cli#verifying-metadata</a></div></div></div><br/>
<div><a id="1632309807.018500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632309807.018500" ><div class="time">2021-09-22 11:23</div></a><div class="msg">not exactly convenient, but it is documented there</div></div></div><br/>
<div><a id="1632309838.018800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632309838.018800" ><div class="time">2021-09-22 11:23</div></a><div class="msg">We really need a development implementation guide</div></div></div><br/>
<div><a id="1632309851.019000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632309851.019000" ><div class="time">2021-09-22 11:24</div></a><div class="msg">It?s a lesson learned for this, and we?ll aim not to make that mistake with the plugin work going on</div></div></div><br/>
<div><a id="1632311883.019400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632311883.019400" ><div class="time">2021-09-22 11:58</div></a><div class="msg">oh yeah @matt.fellows it would have been so much easier if I had read the doc.... true. Well, as long as it's in the lib now, it should not bother us.</div></div></div><br/>
<div><a id="1632312083.019700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632312083.019700" ><div class="time">2021-09-22 12:01</div></a><div class="msg">my point was that the docs aren?t very accessible (why would you think to look at the CLI docs for the FFI bits) and also that a guide for developers like you/Adam/Mike etc. would be VERY helpful!</div></div></div><br/>
<div><a id="1632312087.019900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1632312087.019900" ><div class="time">2021-09-22 12:01</div></a><div class="msg">(i.e. it?s our fault!)</div></div></div><br/>
<div><a id="1632312155.020100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632312155.020100" ><div class="time">2021-09-22 12:02</div></a><div class="msg">well, when the next version is out, a doc brainstorming with all these little issues might help :slightly_smiling_face: but no worries. At least it works now. Thanks for the help both.</div></div></div><br/>
<div><a id="1632749748.002600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632749748.002600" ><div class="time">2021-09-27 13:35</div></a><div class="msg">Hi everyone,

This is the PR for the provider messaging: <a href="https://github.com/pact-foundation/pact-net/pull/326">https://github.com/pact-foundation/pact-net/pull/326</a>

I'm having trouble with the latest base -&gt; feature/4.0.0. (some projects have been deleted)
Working on it.

It takes in account all the comments in this previous draft PR =&gt; <a href="https://github.com/pact-foundation/pact-net/pull/309">https://github.com/pact-foundation/pact-net/pull/309</a></div></div></div><br/>
<div><a id="1632752470.003100"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1632752470.003100" ><div class="time">2021-09-27 14:21</div></a><div class="msg">I'm excited to see this happening!</div></div></div><br/>
<div><a id="1632753104.003300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632753104.003300" ><div class="time">2021-09-27 14:31</div></a><div class="msg">The middleware part was hard to make it easy to use but I think it could be a good base to eventually have a provider state middleware as well.</div></div></div><br/>
<div><a id="1632753848.003500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632753848.003500" ><div class="time">2021-09-27 14:44</div></a><div class="msg">rebase is all good but still have unit tests issues on some I haven't touched... pending.</div></div></div><br/>
<div><a id="1632754310.003700"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632754310.003700" ><div class="time">2021-09-27 14:51</div></a><div class="msg">~ok,~</div></div></div><br/>
<div><a id="1632754310.003900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632754310.003900" ><div class="time">2021-09-27 14:51</div></a><div class="msg">al</div></div></div><br/>
<div><a id="1632754311.004100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632754311.004100" ><div class="time">2021-09-27 14:51</div></a><div class="msg">l set</div></div></div><br/>
<div><a id="1632754323.004300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1632754323.004300" ><div class="time">2021-09-27 14:52</div></a><div class="msg">all set :slightly_smiling_face:</div></div></div><br/>
<div><a id="1633427977.000100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633427977.000100" ><div class="time">2021-10-05 09:59</div></a><div class="msg">All comments have been taken in consideration / answered. I need to create another PR for the Unit tests of the future middlewares in the AspNetCore project</div></div></div><br/>
<div><a id="1633550449.004100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1633550449.004100" ><div class="time">2021-10-06 20:00</div></a><div class="msg">@yann.courtel @matt.fellows I ended up writing some quite detailed comments on the messaging provider MR, so instead of making you do all of that I created a branch off Yann's branch with my suggestions implemented:

<a href="https://github.com/pact-foundation/pact-net/tree/feature/messaging-provider-suggestions">https://github.com/pact-foundation/pact-net/tree/feature/messaging-provider-suggestions</a>

That commit can just be merged into Yann's branch. I think it provides an overall cleaner API, is safer due to the type state pattern, and removes the need for `PactNet.AspNetCore` to reference `PactNet.Native` which is probably a big deal for people consuming those NuGets.

I've also made a general suggestion about providing an entire turnkey solution for the messaging verifier REST API instead of just the middleware. I think that would make it much easier for users if they don't have to create the API project themselves then add our small middleware, if instead they just let us spin up the REST API for them without needing to worry about it. They don't even need to know it's there.

Anyway, let me know what you think!</div></div></div><br/>
<div><a id="1633563255.006300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1633563255.006300" ><div class="time">2021-10-06 23:34</div></a><div class="msg">This is what I?ve been saying for ages! The users shouldn?t need to know that to verify a message that the implementation requires an HTTP endpoint to communicate with. That should be hidden away completely as an implementation detail in the framework (and appropriate debug logging available if/when shit hits the fan)

Perhaps I wasn?t explaining myself previously very well, or now that you understand the implemenation it means something more to you. For reference, this is the architecture that other languages have basically adopted to do this: <a href="https://github.com/pact-foundation/pact-message-demo">https://github.com/pact-foundation/pact-message-demo</a></div></div></div><br/>
<div><a id="1633563303.007600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1633563303.007600" ><div class="time">2021-10-06 23:35</div></a><div class="msg">The best part of it is, ideally, you could re-use this for the provider state handling also (i.e. point the provider state handlers for HTTP pact at a similar framework initiatide HTTP endpoint). Provider states can than be mapped in a similar way.</div></div></div><br/>
<div><a id="1633563325.007800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1633563325.007800" ><div class="time">2021-10-06 23:35</div></a><div class="msg">See the JS example here: <a href="https://github.com/pact-foundation/pact-js/#api-with-provider-states">https://github.com/pact-foundation/pact-js/#api-with-provider-states</a></div></div></div><br/>
<div><a id="1633563343.008100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1633563343.008100" ><div class="time">2021-10-06 23:35</div></a><div class="msg">and also the feature called ?request filters?: <a href="https://github.com/pact-foundation/pact-js/#modify-requests-prior-to-verification-request-filters">https://github.com/pact-foundation/pact-js/#modify-requests-prior-to-verification-request-filters</a></div></div></div><br/>
<div><a id="1633563358.008500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1633563358.008500" ><div class="time">2021-10-06 23:35</div></a><div class="msg">all of that is enabled by the framework provided API</div></div></div><br/>
<div><a id="1633563375.008900"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1633563375.008900" ><div class="time">2021-10-06 23:36</div></a><div class="msg">Users essentially just pass anonymous functions and the framework attaches them to middleware and executes for them</div></div></div><br/>
<div><a id="1633591281.009000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633591281.009000" ><div class="time">2021-10-07 07:21</div></a><div class="msg">I love the suggestions and am incorporating them right now. For the server solution instead of starting the REST API, it makes a lot of sense it terms of framework and language compatibility. But for the moment, I would focus on the middleware and we can easily make it evolve to the server solution, most likely in another project all together. Thanks for the comments</div></div></div><br/>
<div><a id="1633591491.009300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633591491.009300" ><div class="time">2021-10-07 07:24</div></a><div class="msg">@matt.fellows that was the plan yes. The package having the messaging middleware could have all the middlewares used in the samples apps. (provider states, auth, etc)</div></div></div><br/>
<div><a id="1633591633.009500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633591633.009500" ><div class="time">2021-10-07 07:27</div></a><div class="msg">The big problem for now is that from my understanding, the RUST needs an HTTP endpoint. Basically, like @pact544 was saying, each lib for each language will need to add an endpoint on the fly and configure it well for messaging purposes. The good thing with that approach is that we could use that server solution for any protocol we want to support in the future.</div></div></div><br/>
<div><a id="1633592373.009800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1633592373.009800" ><div class="time">2021-10-07 07:39</div></a><div class="msg">Yep that's right. The diagram above was back for the ruby implementation but the principle is the same</div></div></div><br/>
<div><a id="1633592419.010000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1633592419.010000" ><div class="time">2021-10-07 07:40</div></a><div class="msg">It could be done over FFI but bidirectional FFI calls are even more :exploding_head:. HTTP at least is a standard and is ubiquitous</div></div></div><br/>
<div><a id="1633592437.010200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633592437.010200" ><div class="time">2021-10-07 07:40</div></a><div class="msg">I think at the time, we were so tightly coupled with HTTP, we just thought that'd be the only way we could make the messaging work :slightly_smiling_face:</div></div></div><br/>
<div><a id="1633592456.010500"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1633592456.010500" ><div class="time">2021-10-07 07:40</div></a><div class="msg">Also wait until plugins come in. Would you and @pact544 like a briefing on that progress?</div></div></div><br/>
<div><a id="1633592469.010700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1633592469.010700" ><div class="time">2021-10-07 07:41</div></a><div class="msg">I have to run to dinner but let us know if/when the time is right</div></div></div><br/>
<div><a id="1633592526.010900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633592526.010900" ><div class="time">2021-10-07 07:42</div></a><div class="msg">That'd be nice, we will need to make timezone work ^^ I was working at 10pm yesterday to answer adam's comments and I think now it's you who's working overtime. Let's plan that next week maybe</div></div></div><br/>
<div><a id="1633592543.011100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633592543.011100" ><div class="time">2021-10-07 07:42</div></a><div class="msg">given our availability</div></div></div><br/>
<div><a id="1633592717.011300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1633592717.011300" ><div class="time">2021-10-07 07:45</div></a><div class="msg">I always work late nights to accommodate EU/US so we'll fit in with you guys.</div></div></div><br/>
<div><a id="1633592737.011600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633592737.011600" ><div class="time">2021-10-07 07:45</div></a><div class="msg">I know :raised_hands: Thanks a lot</div></div></div><br/>
<div><a id="1633592990.011800"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1633592990.011800" ><div class="time">2021-10-07 07:49</div></a><div class="msg">Is it possible to just merge my commit in instead...? That way I still get the credit :joy:</div></div></div><br/>
<div><a id="1633593013.012000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633593013.012000" ><div class="time">2021-10-07 07:50</div></a><div class="msg">I did cherry-picked it :slightly_smiling_face:</div></div></div><br/>
<div><a id="1633593020.012200"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1633593020.012200" ><div class="time">2021-10-07 07:50</div></a><div class="msg">Nice :thumbsup:</div></div></div><br/>
<div><a id="1633593027.012400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633593027.012400" ><div class="time">2021-10-07 07:50</div></a><div class="msg">funny thing is my computer is acting out and the auth is not working on the push...</div></div></div><br/>
<div><a id="1633593124.012800"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633593124.012800" ><div class="time">2021-10-07 07:52</div></a><div class="msg">hm, changing my windows password triggered the credentials manager to change my git token with my new password.... very annoying</div></div></div><br/>
<div><a id="1633593128.013000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633593128.013000" ><div class="time">2021-10-07 07:52</div></a><div class="msg">it's pushed :slightly_smiling_face:</div></div></div><br/>
<div><a id="1633593168.013300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633593168.013300" ><div class="time">2021-10-07 07:52</div></a><div class="msg">I'll finish up some issues I saw whilst adding additional unit tests and we should be good to go</div></div></div><br/>
<div><a id="1633593424.013500"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633593424.013500" ><div class="time">2021-10-07 07:57</div></a><div class="msg">you were thorough, I saw you even added the extensions for adding the options in the DI :slightly_smiling_face:</div></div></div><br/>
<div><a id="1633593466.013700"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1633593466.013700" ><div class="time">2021-10-07 07:57</div></a><div class="msg">I am an annoying perfectionist :joy: I'm just reviewing now but I imagine it'll be fine</div></div></div><br/>
<div><a id="1633593505.013900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633593505.013900" ><div class="time">2021-10-07 07:58</div></a><div class="msg">Yeah I noticed that. I have a lot in my team so I am accustomed to it now ^^</div></div></div><br/>
<div><a id="1633593537.014200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633593537.014200" ><div class="time">2021-10-07 07:58</div></a><div class="msg">annoying the dynamic doesn't work with fluent assertions....</div></div></div><br/>
<div><a id="1633593573.014400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633593573.014400" ><div class="time">2021-10-07 07:59</div></a><div class="msg">I saw an extensions that mapped it to an object behind the scene. If we have spare time, that'd be nice to put it lol</div></div></div><br/>
<div><a id="1633593752.014600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633593752.014600" ><div class="time">2021-10-07 08:02</div></a><div class="msg">That's amazing you can literally use the same approach with the provider states now</div></div></div><br/>
<div><a id="1633597595.014900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633597595.014900" ><div class="time">2021-10-07 09:06</div></a><div class="msg">All good @pact544 for approve and merge</div></div></div><br/>
<div><a id="1633597609.015100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1633597609.015100" ><div class="time">2021-10-07 09:06</div></a><div class="msg">Nice, I'll check it now</div></div></div><br/>
<div><a id="1633597647.015300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633597647.015300" ><div class="time">2021-10-07 09:07</div></a><div class="msg">I didn't add anything else lol :slightly_smiling_face: the other unit tests will be middleware specific and be part of another PR. Thanks a lot for the suggestion and the work on the verifier</div></div></div><br/>
<div><a id="1633597650.015500"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1633597650.015500" ><div class="time">2021-10-07 09:07</div></a><div class="msg">Merged!!! Congrats</div></div></div><br/>
<div><a id="1633597666.015700"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633597666.015700" ><div class="time">2021-10-07 09:07</div></a><div class="msg">:tada::tada: Damn, feels good</div></div></div><br/>
<div><a id="1633683453.002200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633683453.002200" ><div class="time">2021-10-08 08:57</div></a><div class="msg">Hey everyone, I've started looking into moving the provider state middleware into the new AspNetCore project in the feature/4.0.0 branch.
It also gives a V3 PACT compatiblity since the provider in the sample apps didn't test the provider states with parameters for instance. Besides, we've added it on the consumer side so it should be part of the beta version.
I'll update the sample app and post some progress here.
Thanks a lot.</div></div></div><br/>
<div><a id="1633683625.002400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633683625.002400" ><div class="time">2021-10-08 09:00</div></a><div class="msg">@tjones and @matt.fellows I saw this <a href="https://github.com/pact-foundation/pact-js/#modify-requests-prior-to-verification-request-filters">https://github.com/pact-foundation/pact-js/#modify-requests-prior-to-verification-request-filters</a>
And I was wondering how you handle the execution of provider state handle with parameters. Like highlighted in the V3 Specs : <a href="https://github.com/pact-foundation/pact-specification/tree/version-3">https://github.com/pact-foundation/pact-specification/tree/version-3</a>
Thank you for your feedback.</div></div></div><br/>
<div><a id="1633684275.004600"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1633684275.004600" ><div class="time">2021-10-08 09:11</div></a><div class="msg">I?m away from the computer at the moment, but the ffi verifier sends parameters in a json object to the state change endpoint. Pact-js runs a proxy for the provider that catches these state changes (and proxies everything else)</div></div></div><br/>
<div><a id="1633684291.005300"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1633684291.005300" ><div class="time">2021-10-08 09:11</div></a><div class="msg">Tomorrow morning I can send you links to the relevant bits of the code</div></div></div><br/>
<div><a id="1633684333.006000"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1633684333.006000" ><div class="time">2021-10-08 09:12</div></a><div class="msg">The modification of requests is done with middleware in that proxy too</div></div></div><br/>
<div><a id="1633684430.006200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633684430.006200" ><div class="time">2021-10-08 09:13</div></a><div class="msg">Ok. Thanks. Yeah it sounds like the V2 will be very easy. In .NET, to dynamically invoke a method, it has to be (of my knowledge) with an infinite array of object (params object[]).
The invocation of the method should be made generic and the responsibility is only on the testing project to make sure the method invoked have the same arguments as the provider state in the PACT. Thank you for the infos.</div></div></div><br/>
<div><a id="1633685942.006400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1633685942.006400" ><div class="time">2021-10-08 09:39</div></a><div class="msg">So the implementation of the proxy for <a href="https://pact-foundation.slack.com/archives/C021XTMRKM1/p1633563255006300">https://pact-foundation.slack.com/archives/C021XTMRKM1/p1633563255006300</a> (extended to support provider states): <a href="https://github.com/pact-foundation/pact-js/blob/feat/v3.0.0/src/dsl/verifier/proxy/proxy.ts">https://github.com/pact-foundation/pact-js/blob/feat/v3.0.0/src/dsl/verifier/proxy/proxy.ts</a></div></div></div><br/>
<div><a id="1633686010.006600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1633686010.006600" ><div class="time">2021-10-08 09:40</div></a><div class="msg">The definition of a state handler is <a href="https://github.com/pact-foundation/pact-js/blob/feat/v3.0.0/src/dsl/verifier/proxy/types.ts#L43">https://github.com/pact-foundation/pact-js/blob/feat/v3.0.0/src/dsl/verifier/proxy/types.ts#L43</a></div></div></div><br/>
<div><a id="1633686046.006800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1633686046.006800" ><div class="time">2021-10-08 09:40</div></a><div class="msg">(that?s probably a little messy looking, because we make it backwards compatible with the V2 API, but support params, and also setup/teardown hooks. It can also *return* parameters to support provider state injected values</div></div></div><br/>
<div><a id="1633686271.007000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633686271.007000" ><div class="time">2021-10-08 09:44</div></a><div class="msg">:open_mouth: you can actually tell if it's a setup or teardown?? nice</div></div></div><br/>
<div><a id="1633686294.007200"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633686294.007200" ><div class="time">2021-10-08 09:44</div></a><div class="msg">That's something the middleware can do indeed</div></div></div><br/>
<div><a id="1633686308.007400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633686308.007400" ><div class="time">2021-10-08 09:45</div></a><div class="msg">because I assumed everything was only setup methods</div></div></div><br/>
<div><a id="1633686684.007800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1633686684.007800" ><div class="time">2021-10-08 09:51</div></a><div class="msg">yeah, the new verifier will hit the state endpoint on the way up and down, passing a JSON blob each time.</div></div></div><br/>
<div><a id="1633686706.008000"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1633686706.008000" ><div class="time">2021-10-08 09:51</div></a><div class="msg">The shape of that data is: <a href="https://github.com/pact-foundation/pact-js/blob/feat/v3.0.0/src/dsl/verifier/proxy/types.ts#L17-L21">https://github.com/pact-foundation/pact-js/blob/feat/v3.0.0/src/dsl/verifier/proxy/types.ts#L17-L21</a></div></div></div><br/>
<div><a id="1633686779.008200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1633686779.008200" ><div class="time">2021-10-08 09:52</div></a><div class="msg">```{
   "action: setup|teardown,
   "params": key/value map (may be a complex data structure),
   "state": "string description of state from interaction"
}```
</div></div></div><br/>
<div><a id="1633686848.008400"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1633686848.008400" ><div class="time">2021-10-08 09:54</div></a><div class="msg">the state may return a blob of JSON data, where the keys match an expression given in the consumer test.

See this example: <a href="https://github.com/pact-foundation/pact-js/tree/feat/v3.0.0/examples/v3/provider-state-injected">https://github.com/pact-foundation/pact-js/tree/feat/v3.0.0/examples/v3/provider-state-injected</a></div></div></div><br/>
<div><a id="1633686955.008700"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633686955.008700" ><div class="time">2021-10-08 09:55</div></a><div class="msg">I'll have a second look after I made the V2, and V3 provider state middleware work :smile: baby steps</div></div></div><br/>
<div><a id="1633686960.008900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1633686960.008900" ><div class="time">2021-10-08 09:56</div></a><div class="msg">Thanks for all the info</div></div></div><br/>
<div><a id="1633687066.009200"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1633687066.009200" ><div class="time">2021-10-08 09:57</div></a><div class="msg">For clarity, in terms of the public facing API:

? Both V2 and V3 will be called on setup/teardown
? Only V3 supports state parameters
? Only V3 supports returning provider parameters</div></div></div><br/>
<div><a id="1634237294.006300"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1634237294.006300" ><div class="time">2021-10-14 18:48</div></a><div class="msg">#pact-net-development Looking for thoughts on the following idea: For v4 I think we should rename the `PactNet` project in the solution to `PactNet.Abstractions` (since that's what it actually contains now), and rename `PactNet.Native` to `PactNet` instead.

The reasoning is that at the moment the installation instructions are slightly unclear - the main `PactNet` package isn't actually what you want to install even though it has the logical main package name. It doesn't actually contain anything useful at all, just interfaces and simple model objects. Instead you actually want to `dotnet add package PactNet.Native` if you want to get anything done. I think that's confusing for users.

Microsoft and others follow exactly the example I've outlined above - they have `.Abtractions` versions of all their NuGets which just contain things like the generic interfaces and simple POCOs (like model objects), then the main version without the `.Abstractions` is the one you actually want to use. For example:

? <a href="https://www.nuget.org/packages/Microsoft.Extensions.DependencyInjection.Abstractions">https://www.nuget.org/packages/Microsoft.Extensions.DependencyInjection.Abstractions</a> and <a href="https://www.nuget.org/packages/Microsoft.Extensions.DependencyInjection">https://www.nuget.org/packages/Microsoft.Extensions.DependencyInjection</a>
? <a href="https://www.nuget.org/packages/Microsoft.Extensions.Logging.Abstractions">https://www.nuget.org/packages/Microsoft.Extensions.Logging.Abstractions</a> and <a href="https://www.nuget.org/packages/Microsoft.Extensions.Logging">https://www.nuget.org/packages/Microsoft.Extensions.Logging</a>
? ...and so on for Configuration, Options, FileProviders, Hosting, etc etc etc
? <a href="https://www.nuget.org/packages/xunit.abstractions/">https://www.nuget.org/packages/xunit.abstractions/</a> and <a href="https://www.nuget.org/packages/xunit/">https://www.nuget.org/packages/xunit/</a>
It also makes creating extensions and wrapper packages much easier, because third party library authors only need to depend on the `Abstractions` public members, since the internals of the main package are all private. For example, this package ships logging integration for xUnit and only needs to depend on `xunit.abstractions`: <a href="https://www.nuget.org/packages/Divergic.Logging.Xunit/">https://www.nuget.org/packages/Divergic.Logging.Xunit/</a></div></div></div><br/>
<div><a id="1634289905.007000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1634289905.007000" ><div class="time">2021-10-15 09:25</div></a><div class="msg">Hi @pact544 I think it's a good idea since indeed, why should you need the native package to have the implementation at all. It's more straightforward that way. We will need to do some cleanup of some classes we've put in the PactNet (would-be .Abstractions) project to move it to the implementations project.</div></div></div><br/>
<div><a id="1634290583.007300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1634290583.007300" ><div class="time">2021-10-15 09:36</div></a><div class="msg">Hey guys, I seem to have the code working but have trouble reconciling the current sample API example to work properly. Mainly because of the pact specification tied to the sample APIs.
I was thinking of splitting the main folder to have different APIs all together for the different PACT specs version. Does that make sense?</div></div></div><br/>
<div><a id="1634290635.007700"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1634290635.007700" ><div class="time">2021-10-15 09:37</div></a><div class="msg">or even EventAPI_PACT_V2 and EventAPI_PACT_V3 to be ultra clear :slightly_smiling_face:</div></div></div><br/>
<div><a id="1634290856.007900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1634290856.007900" ><div class="time">2021-10-15 09:40</div></a><div class="msg">or another way, a different folder structure
like :
samples / PACT_V2 / EventApi
samples / PACT_V3 / EventApi
                                   / EventImporter
samples / PACT_V4 / ........
......</div></div></div><br/>
<div><a id="1634317902.008100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1634317902.008100" ><div class="time">2021-10-15 17:11</div></a><div class="msg">Yeah I'm gonna try it out locally and see what it ends up looking like.

We'll need to be mindful of keeping anything in Abstractions which may be needed by a plug-in, extension or alternative implementation. Off the top of my head it may be that nothing needs to move at all.

Like if we ever do reimplement PactNet.Remote as an alternative backend, that should only have to rely on Abstractions and should never need to rely on PactNet (with the native default implementation inside).

I'll also keep the root namespace of Abstractions just as PactNet just so that we don't end up with users having to import loads of namespaces. That's what Microsoft do with their packages also.</div></div></div><br/>
<div><a id="1634324346.000100"><img src="https://avatars.slack-edge.com/2022-02-04/3042827452823_04aefaa8271d55360355_72.jpg" /></a><div class="message"><div class="username">pact544</div><a style="text-decoration: none" href="#1634324346.000100" ><div class="time">2021-10-15 18:59</div></a><div class="msg">OK I've done that. Considering the scope of the change the diff actually isn't too bad!

I see what you mean about perhaps needing to move things out, but at the same time I don't think they're anywhere to go now. Perhaps we should rename `Abstractions` to `Core` instead?

The only misfit is the new message scenarios stuff. You'd still want that if you did an alternate implementation so it belongs in the 'central' package, but it's not an 'abstraction'.</div></div></div><br/>
<div><a id="1634343618.000100"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1634343618.000100" ><div class="time">2021-10-16 00:20</div></a><div class="msg">It's good to have some consistency of API across the different frameworks - the original guideline was "close to the ruby implementation", but I don't think the ruby implementation supports the pact spec v3, so perhaps that guideline falls down</div></div></div><br/>
<div><a id="1634465850.000100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1634465850.000100" ><div class="time">2021-10-17 10:17</div></a><div class="msg">Pact JS has the format: `examples/vX/example1`</div></div></div><br/>
<div><a id="1634465874.000300"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1634465874.000300" ><div class="time">2021-10-17 10:17</div></a><div class="msg">But probably it matters less if the docs can deep link to it</div></div></div><br/>
<div><a id="1634512367.000100"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1634512367.000100" ><div class="time">2021-10-17 23:12</div></a><div class="msg">Oh, sorry. I misunderstood the question. Matt has it right</div></div></div><br/>
<div><a id="1634541235.000300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1634541235.000300" ><div class="time">2021-10-18 07:13</div></a><div class="msg">In my last PR (the WIP provider state middleware), I actually made the middleware rely on an "accessor" interface / class which is an abstraction so the Scenarios class will be internal to the now PactNet package</div></div></div><br/>
<div><a id="1634546455.000900"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1634546455.000900" ><div class="time">2021-10-18 08:40</div></a><div class="msg">I tested locally and on the provider side I don't need the Native package any longer!</div></div></div><br/>
<div><a id="1634546635.001100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1634546635.001100" ><div class="time">2021-10-18 08:43</div></a><div class="msg">The only thing remaining are the extensions methods that forces the consumer test project to use the Native one in order to chose a certain implementation of the backend (remote or native) but that's how it's supposed to work anyway going forward, right?</div></div></div><br/>
<div><a id="1634546769.001400"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1634546769.001400" ><div class="time">2021-10-18 08:46</div></a><div class="msg">hm, I see the tricky part here. We don't want to UsingNativeBackend or UsingRemoteBackend to end up in the interface. Would that be such a horrible thing to do, design wise?</div></div></div><br/>
<div><a id="1634546901.001600"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1634546901.001600" ><div class="time">2021-10-18 08:48</div></a><div class="msg">For instance, the IPactV2 would have the old http ruby service and the IPactV3 the native backend. If we have another backend service in V4 (why not) we would add it to the new IPactV4 interface.</div></div></div><br/>
<div><a id="1634561184.001800"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1634561184.001800" ><div class="time">2021-10-18 12:46</div></a><div class="msg">I see that you put the rootnamespace as pactnet so it no longer matters in the sample apps :slightly_smiling_face:</div></div></div><br/>
<div><a id="1634561728.002000"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1634561728.002000" ><div class="time">2021-10-18 12:55</div></a><div class="msg">I heard you @matt.fellows but I will leave PactV2 or PactV3 to avoid any confusion with the pactnet major lib version number vs the pact specs number :slightly_smiling_face:</div></div></div><br/>
<div><a id="1634562260.002300"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1634562260.002300" ><div class="time">2021-10-18 13:04</div></a><div class="msg">The PR is ready for review! <a href="https://github.com/pact-foundation/pact-net/pull/335">https://github.com/pact-foundation/pact-net/pull/335</a></div></div></div><br/>
<div><a id="1635740256.001400"><img src="https://secure.gravatar.com/avatar/a68542ba58871006f35019efd2577fca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png" /></a><div class="message"><div class="username">edanielsen</div><a style="text-decoration: none" href="#1635740256.001400" ><div class="time">2021-11-01 04:17</div></a><div class="msg">Hi @pact544, I see that since October 6 (this commit: `5171d8c5cf8b042fdda1af6cd01184e15ff7dab1`), the `WithPublishedResults` method has been removed from the pact verifier. Was that on purpose or an accident? Is there now a different way to publish verified results back to the pact broker?</div></div></div><br/>
<div><a id="1636020872.000100"><img src="https://avatars.slack-edge.com/2021-08-27/2413662737015_de6ff58508cf010527f8_72.png" /></a><div class="message"><div class="username">yann.courtel</div><a style="text-decoration: none" href="#1636020872.000100" ><div class="time">2021-11-04 10:14</div></a><div class="msg">Hi @edanielsen it looks like it will be included in the pact broker options in the future.
See here: <a href="https://github.com/pact-foundation/pact-net/pull/339#issuecomment-954611791">https://github.com/pact-foundation/pact-net/pull/339#issuecomment-954611791</a></div></div></div><br/>
<div><a id="1636106470.000100"><img src="https://secure.gravatar.com/avatar/a68542ba58871006f35019efd2577fca.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0024-72.png" /></a><div class="message"><div class="username">edanielsen</div><a style="text-decoration: none" href="#1636106470.000100" ><div class="time">2021-11-05 10:01</div></a><div class="msg">Ok, thank you @yann.courtel</div></div></div><br/>
<div><a id="1640785709.000200"><img src="https://secure.gravatar.com/avatar/fcc651a28e04ec23a80f4797ac85522d.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0000-72.png" /></a><div class="message"><div class="username">mch</div><a style="text-decoration: none" href="#1640785709.000200" ><div class="time">2021-12-29 13:48</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1641155365.001500"><img src="https://secure.gravatar.com/avatar/fcc651a28e04ec23a80f4797ac85522d.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0000-72.png" /></a><div class="message"><div class="username">mch</div><a style="text-decoration: none" href="#1641155365.001500" ><div class="time">2022-01-02 20:29</div></a><div class="msg">Hi, could you tell me when this issue is expected to be solved: <a href="https://github.com/pact-foundation/pact-net/issues/327">https://github.com/pact-foundation/pact-net/issues/327</a>? Can I contribute to it or is it currently worked on?</div></div></div><br/>
<div><a id="1641179514.001700"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1641179514.001700" ><div class="time">2022-01-03 03:11</div></a><div class="msg">Looks like a pretty trivial fix, if you?re up for a PR that?d be great!</div></div></div><br/>
<div><a id="1641191778.001900"><img src="https://secure.gravatar.com/avatar/fcc651a28e04ec23a80f4797ac85522d.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0000-72.png" /></a><div class="message"><div class="username">mch</div><a style="text-decoration: none" href="#1641191778.001900" ><div class="time">2022-01-03 06:36</div></a><div class="msg">What should be the starting branch for this, master or feature/4.0.0?</div></div></div><br/>
<div><a id="1641193830.002100"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1641193830.002100" ><div class="time">2022-01-03 07:10</div></a><div class="msg">This specific request master (the standalone is only used by master) but the feature needs to be in 4.x.x as well (I don't know if it's been implemented in it already tho)</div></div></div><br/>
<div><a id="1641206156.002300"><img src="https://secure.gravatar.com/avatar/fcc651a28e04ec23a80f4797ac85522d.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0000-72.png" /></a><div class="message"><div class="username">mch</div><a style="text-decoration: none" href="#1641206156.002300" ><div class="time">2022-01-03 10:35</div></a><div class="msg">@matt.fellows It doesn't seem to be currently implemented in feature/4.0.0</div></div></div><br/>
<div><a id="1641206245.002600"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1641206245.002600" ><div class="time">2022-01-03 10:37</div></a><div class="msg">Thanks. The branch property exists on the latest rust core, so if you were up for doing it in the 4.x.x branch also that would be :pray:</div></div></div><br/>
<div><a id="1641206270.002800"><img src="https://avatars.slack-edge.com/2018-04-12/346985093526_697d2fedcd27f4fc4996_72.jpg" /></a><div class="message"><div class="username">matt.fellows</div><a style="text-decoration: none" href="#1641206270.002800" ><div class="time">2022-01-03 10:37</div></a><div class="msg">I haven?t heard from the .NET maintainers for a little while, so I suspect they are on leave over this time of year</div></div></div><br/>
<div><a id="1641239207.003000"><img src="https://secure.gravatar.com/avatar/fcc651a28e04ec23a80f4797ac85522d.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0000-72.png" /></a><div class="message"><div class="username">mch</div><a style="text-decoration: none" href="#1641239207.003000" ><div class="time">2022-01-03 19:46</div></a><div class="msg">Pull request ready :slightly_smiling_face:</div></div></div><br/>
<div><a id="1646375847.450029"><img src="https://secure.gravatar.com/avatar/5f26112b4b3e23fd30904c536a43ea91.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0002-72.png" /></a><div class="message"><div class="username">tomas.sakinis</div><a style="text-decoration: none" href="#1646375847.450029" ><div class="time">2022-03-04 06:37</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1649427683.231899"><img src="https://secure.gravatar.com/avatar/8133f588e1cc93aefde434f5536796d8.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0013-72.png" /></a><div class="message"><div class="username">henit.laxmicant</div><a style="text-decoration: none" href="#1649427683.231899" ><div class="time">2022-04-08 14:21</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1651243124.213449"><img src="https://avatars.slack-edge.com/2021-12-09/2847110156736_e05273c817f2c1a28851_72.png" /></a><div class="message"><div class="username">yousafn</div><a style="text-decoration: none" href="#1651243124.213449" ><div class="time">2022-04-29 14:38</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1651710731.723239"><img src="https://secure.gravatar.com/avatar/3d118b71e69a37138c8e6cf474307507.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0016-72.png" /></a><div class="message"><div class="username">rholshausen</div><a style="text-decoration: none" href="#1651710731.723239" ><div class="time">2022-05-05 00:32</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1652119257.172799"><img src="https://avatars.slack-edge.com/2021-06-07/2129819394007_8ed3b61dfb8a1266e27e_72.png" /></a><div class="message"><div class="username">heytaco</div><a style="text-decoration: none" href="#1652119257.172799" ><div class="time">2022-05-09 18:00</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1652119265.668109"><img src="https://avatars.slack-edge.com/2022-05-09/3501740885028_0927e4b769c57ee9769f_72.png" /></a><div class="message"><div class="username">orbit</div><a style="text-decoration: none" href="#1652119265.668109" ><div class="time">2022-05-09 18:01</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1652690885.420759"><img src="https://avatars.slack-edge.com/2018-06-18/383099788962_f8a3efa7488b02d0dfb8_72.png" /></a><div class="message"><div class="username">tjones</div><a style="text-decoration: none" href="#1652690885.420759" ><div class="time">2022-05-16 08:48</div></a><div class="msg">@tjones has left the channel</div></div></div><br/>
<div><a id="1653036098.239239"><img src="https://secure.gravatar.com/avatar/5f26112b4b3e23fd30904c536a43ea91.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0002-72.png" /></a><div class="message"><div class="username">tomas.sakinis</div><a style="text-decoration: none" href="#1653036098.239239" ><div class="time">2022-05-20 08:41</div></a><div class="msg">@tomas.sakinis has left the channel</div></div></div><br/>
<div><a id="1654708921.103089"><img src="https://avatars.slack-edge.com/2022-10-06/4188780648804_06ad6132e8393dbb202f_72.png" /></a><div class="message"><div class="username">slacksync</div><a style="text-decoration: none" href="#1654708921.103089" ><div class="time">2022-06-08 17:22</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
<div><a id="1660980336.573019"><img src="https://avatars.slack-edge.com/2022-08-20/3980240791361_a2e07b726cc933ec5455_72.png" /></a><div class="message"><div class="username">duynguyenptithcm</div><a style="text-decoration: none" href="#1660980336.573019" ><div class="time">2022-08-20 07:25</div></a><div class="msg">has joined #pact-net-development</div></div></div><br/>
</div></body></html>